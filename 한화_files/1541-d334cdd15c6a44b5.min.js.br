"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="bedc8480-bb4b-5bd8-96fd-53964cf91cea")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["1541"],{493982(t,e,i){i.d(e,{I:()=>n,h:()=>o});var s=i(87683);let n=(0,s.NC)("PROGRESS_CLEAR"),o=(0,s.NC)("PROGRESS_SET")},114900(t,e,i){i.d(e,{$x:()=>o,Vt:()=>r,oh:()=>n});var s=i(620749);let n=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(t){try{return new URL(t),!0}catch(t){return!1}}function r(t){return s.I6(t,"url").concat(s.I6(t,"email")).filter(t=>!!o(t.href)&&n.test(t.href))}},71981(t,e,i){i.d(e,{i:()=>O});var s=i(239976),n=i(105652),o=i(865702),r=i(726577),a=i(225519),l=i(70555),d=i(336435),h=i(14308),c=i(124144),m=i(934163),u=i(881619),p=i(580074),g=i(679499),T=i(263618),f=i(204752),w=i(617176),b=i(75339),v=i(59883),y=i(377440),k=i(466393),C=i(130940),x=i(612348),E=i(855277),R=i(526865);let L=(0,m.hG)(R.tui),M=(0,m.hG)(R.IKB),P=t=>null!==t?t:void 0;class O extends n.Component{constructor(t){super(t),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.updateRcsKeyLocationIfChanged=t=>{let e=t[0];if(e?.boundingClientRect==null)return void this.setState({rcsKeyLocation:null});let i=this.computeLocation(e.boundingClientRect);(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==i.top||this.state.rcsKeyLocation.left!==i.left)&&this.setState({rcsKeyLocation:i})},this.getRcsKeyElementObserver=new IntersectionObserver(this.updateRcsKeyLocationIfChanged),this.elementMutationObserver=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let t=this.props.step;if(t.modalType!==x.q3.DRAGGABLE)return;if(!t.onboardingKey)return void this.setState({rcsKeyLocation:null});let e=this.getRcsKeyElement();e?this.getRcsKeyElementObserver.observe(e):(this.elementMutationObserver=new MutationObserver(()=>{let t=this.getRcsKeyElement();t&&(this.getRcsKeyElementObserver.observe(t),this.stopWatchingForElement())}),this.elementMutationObserver.observe(document.body,{childList:!0,subtree:!0}))},this.stopWatchingForElement=()=>{this.elementMutationObserver&&(this.elementMutationObserver.disconnect(),this.elementMutationObserver=null)},this.cleanUpRcsKeyElementScanner=()=>{this.getRcsKeyElementObserver.disconnect(),this.stopWatchingForElement()},this.acceptHeight=t=>this.setState({modalHeight:t}),this.button=null,this.nextButtonRef=t=>{t&&(this.button=t,this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=t=>{let e=this.props.step;if(e.modalType!==x.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(e.pointDirection===x._L.LEFT_TITLE){let e=t.top+t.height/2;return{left:t.left+t.width+16,top:e-20,arrowRelativeX:-18,arrowRelativeY:b.uF/2-9,arrowPosition:b.F_.LEFT_TITLE}}if(e.pointDirection===x._L.RIGHT_TITLE){let e=t.top+t.height/2,i=t.left-this.width-16,s=b.uF/2-9;return{left:i,top:e-20,arrowRelativeX:this.width,arrowRelativeY:s,arrowPosition:b.F_.RIGHT_TITLE}}let i=t.left+t.width/2,s=t.bottom+18,n=i-this.width/2,o=i-(n=Math.min(n=Math.max(n,10),window.innerWidth-10-this.width)),r=b.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-s<this.state.modalHeight+12&&(s=t.top-this.state.modalHeight-12,r=b.F_.BOTTOM),{left:n,top:s,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:r}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let t=this.props.step;return t.modalType===x.q3.DRAGGABLE&&t.onboardingKey?(0,y.xT)(t.onboardingKey):null},this.acceptTitle=t=>{this.setState({title:t,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(t,e)=>{let i=this.getFramePosition();if(i.top&&i.left)return{initialPosition:new u.Mi(i.left,i.top)};switch(t){case x.LN.BOTTOM_LEFT:return{initialPosition:e||new u.Mi(M,M),initialConstraints:{x:"left",y:"bottom"}};case x.LN.BOTTOM_RIGHT:return{initialPosition:e||new u.Mi(p.lc,16),initialConstraints:{x:"right",y:"bottom"}};case x.LN.TOP_RIGHT:return{initialPosition:e||new u.Mi(M,L+M),initialConstraints:{x:"right",y:"top"}};case x.LN.CENTER:default:return{initialPosition:e||new u.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(t,e){this.focusButton();let i=this.props.step;if(i.modalType!==x.q3.DRAGGABLE)return;let s=t.step;(s.modalType!==x.q3.DRAGGABLE||i.onboardingKey&&i.onboardingKey!==s.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let t=this.props.step;switch(t.modalType){case x.q3.FEATURE_UPDATE:return t.width||x.No;case x.q3.DRAGGABLE:return t.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(t,e){return t.step!==e.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let t=this.props.step,e=this.getFramePosition(),i={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},n=(0,s.jsx)(k.Uj.Provider,{value:this.forceRender,children:(0,s.jsx)(t.element,{...i})}),a=()=>{switch(t.modalType){case x.q3.DRAGGABLE:let{initialPosition:i,initialConstraints:a}=this.getPositionAndConstraints(t.defaultLocation,t.initialPosition),l=t.title instanceof Function?t.title():t.title,d=this.state.title||l,h=t.onboardingKey||t.highlightOnlyKey;return(0,s.jsxs)(s.Fragment,{children:[h&&!t.disableHighlight&&(0,s.jsx)(C.x,{target:h}),(0,s.jsxs)(b.Ao,{acceptHeight:this.acceptHeight,animatedIn:!0,arrowPosition:t.hideArrow?void 0:P(e.arrowPosition),arrowRelativeX:t.hideArrow?void 0:P(e.arrowRelativeX),arrowRelativeY:t.hideArrow?void 0:P(e.arrowRelativeY),disableDragging:t.disableDragging,dragHeaderOnly:!!d,headerClassName:t.headerClassName,initialConstraints:a,initialPosition:i,initialWidth:this.width,onClose:this.props.dismissModal,title:d,zIndex:t.zIndex,children:[n,t.disableFooter?null:(0,s.jsxs)(k.iy,{className:t.footerClassName,children:[!t.hideStepCounter&&t.stepCounter&&(0,s.jsx)("div",{className:E.S,children:t.stepCounter}),(0,s.jsxs)("div",{className:E.v0,children:[t.additionalButton&&(0,s.jsx)("div",{className:T.s.ml8.$,children:(0,s.jsx)(I,{additionalButton:t.additionalButton,dismissModal:this.props.dismissModal,dispatch:this.props.dispatch})}),(0,s.jsx)("div",{className:T.s.ml8.$,children:(0,s.jsx)(f.$z,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,trackingProperties:{trackingDescriptor:t.ctaTrackingDescriptor},disabled:!!t.ctaIsLoading,children:(0,s.jsx)(g.x,{isLoading:!!t.ctaIsLoading,className:E.zP,children:()=>(0,s.jsx)("div",{children:t.ctaText})})})})]})]})]})]});case x.q3.FEATURE_UPDATE:return(0,s.jsx)(j,{width:this.width,onAdditionalExplicitDismiss:this.props.additionalOnExplicitDismiss,onDismissModal:this.props.dismissModal,children:n});case x.q3.WALK_THROUGH:return(0,s.jsxs)(s.Fragment,{children:[!t.disableHighlight&&(0,s.jsx)(C.x,{target:t.onboardingKey}),(0,s.jsx)(v.CR,{additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,className:t.className,disableClickOutsideToHide:t.disableClickOutsideToHide,dismissModal:this.props.dismissModal,height:t.height,hideCloseButton:t.hideCloseButton,pointerForegroundColor:t.pointerForegroundColor,shouldCenterArrow:t.shouldCenterArrow,shouldDismissWhenLostDOMTarget:t.shouldDismissWhenLostDOMTarget,targetKey:t.onboardingKey,topPadding:t.topPadding,width:t.width,children:n})]});case x.q3.WELCOME:return(0,s.jsxs)(s.Fragment,{children:[t.fullscreen&&(0,s.jsx)("div",{className:E.qg}),(0,s.jsx)(F,{onDismissModal:this.props.dismissModal,children:(0,s.jsx)(r.i,{children:n})})]});case x.q3.SELF_CONTAINED:return n;case x.q3.POINTER:return(0,s.jsxs)(s.Fragment,{children:[t.showHighlight&&(0,s.jsx)(C.x,{target:t.onboardingKey}),(0,s.jsx)(v.NJ,{dismissModal:this.props.dismissModal,targetKey:t.onboardingKey,width:t.width,topPadding:t.topPadding,shouldCenterArrow:t.shouldCenterArrow,shouldNotWrapInParagraphTag:t.shouldNotWrapInParagraphTag,arrowPosition:t.arrowPosition,onTargetLost:t.onTargetLost,children:n})]});case x.q3.ANNOUNCEMENT_POINTER:let c=t.title instanceof Function?t.title():t.title;return(0,s.jsx)(v.OA,{arrowPosition:t.arrowPosition,bottomLeftText:t.stepCounter,ctaText:t.ctaText,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,onClickSecondaryCta:t.preventDismissOnClickSecondaryCta?o.lQ:this.props.dismissModal,secondaryCtaText:t.secondaryCtaText,shouldCenterArrow:t.shouldCenterArrow,shouldCenterModal:t.shouldCenterModal,targetKey:t.onboardingKey,title:c,topPadding:t.topPadding,width:t.width,children:n})}};return(0,c.T8)(a(),t.trackingContextName,t.trackingProperties,t.trackingEnabled)}}function j({children:t,width:e,onAdditionalExplicitDismiss:i,onDismissModal:o}){let r=(0,c.j6)(),m=n.useCallback(({source:t})=>{if("button"===t){let t=r.name;(0,h.Cu)({...r.properties,...null!=t?{trackingContext:t}:{},text:"Close"})}i?.(),o()},[i,o,r]),u=a.hS({open:!0,onClose:m});return(0,s.jsx)(l.bL,{manager:u,width:e??"fit-content",children:(0,s.jsx)(d.vo,{children:(0,s.jsx)(d.nB,{padding:0,children:t})})})}function F({children:t,onDismissModal:e}){let i=a.hS({open:!0,onClose:e,preventUserClose:!0});return(0,s.jsx)(l.bL,{manager:i,width:"fit-content",children:(0,s.jsx)(d.vo,{children:(0,s.jsx)(d.nB,{padding:0,children:t})})})}function I({additionalButton:t,dismissModal:e,dispatch:i}){if(!t)return null;let n=t.textForTracking?{text:t.textForTracking()}:{};return"link"===t.onClickBehavior?(0,s.jsx)(w.pW,{href:t.href,variant:"secondary",trackingProperties:n,newTab:!0,children:t.label}):(0,s.jsx)(f.$z,{onClick:()=>{t.onClick(i),e()},trackingProperties:n,variant:"secondary",children:t.label})}O.displayName="RcsFrame"},186290(t,e,i){i.d(e,{k0:()=>u,kt:()=>c,z$:()=>h});var s=i(239976),n=i(105652),o=i(291061),r=i(295870),a=i(32186),l=i(588415),d=i(982021);let h=n.createContext(null);function c({label:t,context:e,timeoutMs:i,maxTasks:o,children:r,logToFigment:a}){let[l,d]=n.useReducer(t=>t+1,0),[c]=n.useState(()=>new m({label:t,context:e,maxTasks:o,triggerTryVerifyCompleteEffect:d,timeoutMs:i,logToFigment:a}));n.useEffect(()=>{c.mounted=!0,c.tryVerifyComplete()},[c,l]);let p=u({label:t});return n.useEffect(()=>(p.pendOn(c.promise),()=>{c.resolve(),c.cleanup()}),[c,p]),(0,s.jsx)(h.Provider,{value:c,children:r})}class m{constructor({label:t,context:e,maxTasks:i,triggerTryVerifyCompleteEffect:s,timeoutMs:n,logToFigment:o}){let r;this.active=!0,this.mounted=!1,this.timeoutId=null,this.label=t,this.durationTimer=new l.rw({enabled:!0}),this.pendingTasks=new Map,this.completedTasks=new Map,this.context={...e},this.maxTasks=i,this.triggerTryVerifyCompleteEffect=s,this.timeoutMs=n,this.timeoutId=setTimeout(()=>this.enactTimeout(),this.timeoutMs),this.logToFigment=o,this.promise=new Promise(t=>{r=t}),this.resolve=r}addContext(t){Object.assign(this.context,t)}pendOn(t,e){!this.active||this.pendingTasks.has(e)||this.completedTasks.has(e)||(this.pendingTasks.set(e,{taskLabel:t,beginTime:Date.now()}),this.pendingTasks.size+this.completedTasks.size>this.maxTasks&&(g(Error(`<LoadTimer label="${this.label}"> exceeded child maxTasks limit of ${this.maxTasks} via: `+[...this.completedTasks.values(),...this.pendingTasks.values()].map(t=>t.taskLabel).join(", ")),{label:this.label,pendingTasks:this.pendingTasks,completedTasks:this.completedTasks}),this.cleanup()),e.finally(()=>{this.handleFulfilledTask(e,t)}))}handleFulfilledTask(t,e){if(!this.pendingTasks.has(t))return;let{beginTime:i}=this.pendingTasks.get(t);this.pendingTasks.delete(t),this.completedTasks.set(t,{taskLabel:e,beginTime:i,endTime:Date.now()}),0===this.pendingTasks.size&&this.triggerTryVerifyCompleteEffect()}tryVerifyComplete(){this.active&&0===this.pendingTasks.size&&(this.durationTimer?this.durationTimer.stop((t,e,i)=>{!function({label:t,logToFigment:e,context:i,duration:s,backgrounded:n,offlined:r,completedTasks:l}){let h=Date.now(),c=h-s,m=Math.max(...[...l.values()].map(({endTime:t})=>t)),u=Array.from(new Set([...l.values()].filter(({endTime:t})=>t===m).map(({taskLabel:t})=>t))).sort(),p=(t,e)=>[t-c,e-c],g=new Set,T=(()=>{let t={};for(let{taskLabel:e,beginTime:i,endTime:s}of l.values()){t[e]||={beginMoment:1/0,duration:0,endMoment:-1/0,isTailTask:!1,numPromises:0,_promiseIntervals:[],promiseIntervals:""};let n=t[e],[o,r]=p(i,s);n.beginMoment=Math.min(n.beginMoment,o),n.endMoment=Math.max(n.endMoment,r),n.duration=n.endMoment-n.beginMoment,s===m&&(n.isTailTask=!0),n.numPromises+=1,n._promiseIntervals.push([o,r]),g.add(e)}return Object.values(t).forEach(t=>{t.promiseIntervals=JSON.stringify(t._promiseIntervals.sort()),delete t._promiseIntervals}),t})(),f=Array.from(g).sort();d.J.logVital(t,{level:o.$b.INFO,startTime:c,duration:s,description:`<LoadTimer label="${t}"> incl ${l.size} tasks`,context:{is_load_timer:!0,wasBackgrounded:n,wasOffline:r,load_timer:{label:t,beginTime:c,duration:s,endTime:h,tasks:T,tasksJson:JSON.stringify(T),taskLabels:f.join(","),tailTasks:u.join(","),numTasks:l.size},...i}}),e&&(0,a.sx)("load_timer.duration",{label:t,beginTime:c,duration:s,endTime:h,wasBackgrounded:n,wasOffline:r,taskLabels:f,tailTasks:u,numTasks:l.size,tasks:JSON.stringify(T),context:JSON.stringify(i)})}({label:this.label,logToFigment:this.logToFigment,context:this.context,duration:t,backgrounded:e,offlined:i,completedTasks:this.completedTasks})}):g(Error(`<LoadTimer label="${this.label}"> tried to use this.durationTimer MetricsTimer after it was already cleaned up.`),{label:this.label,pendingTasks:this.pendingTasks,completedTasks:this.completedTasks}),this.resolve(),this.cleanup())}enactTimeout(){this.active&&(this.mounted&&g(Error(`<LoadTimer label="${this.label}"> abandoned after ${this.timeoutMs}ms timeout waiting for ${this.pendingTasks.size} tasks: `+[...this.pendingTasks.values()].map(t=>t.taskLabel).join(", ")),{label:this.label,pendingTasks:this.pendingTasks,completedTasks:this.completedTasks}),this.cleanup())}cleanup(){this.active=!1,this.durationTimer?.stop((...t)=>null),this.durationTimer=null,this.pendingTasks.clear(),this.completedTasks.clear(),this.context={},null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}function u({label:t,isComplete:e}){let i=n.useContext(h),[s]=n.useState(()=>new p({timer:i,label:t})),[{ltPromise:o,ltResolve:r}]=n.useState(()=>s.makePromiseWithResolvers());return n.useLayoutEffect(()=>{if(void 0!==e)return s.pendOn(o),e&&r(),r},[s,o,r,e]),s}class p{constructor({timer:t,label:e}){this.timer=null,this.timer=t,this.label=e}pendOn(t){null!==this.timer&&this.timer.pendOn(this.label,t)}makePromiseWithResolvers(){let t,e,i=new Promise((i,s)=>{t=i,e=s});return{promise:i,resolve:t,reject:e,ltPromise:i,ltResolve:t,ltReject:e}}}function g(t,{label:e,pendingTasks:i,completedTasks:s}){d.J.addError(t,r.FigmaTeam.PRODUCTION_ENGINEERING,{is_load_timer:!0,load_timer:{label:e,pendingTasks:Array.from(i.values()),completedTasks:Array.from(s.values())}})}}}]);

//# debugId=bedc8480-bb4b-5bd8-96fd-53964cf91cea

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/37bfea8218c737ae5cf1e23b2c8fe42664e7784b/1541-d334cdd15c6a44b5.min.js.map