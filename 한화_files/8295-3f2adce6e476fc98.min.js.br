"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c69cd9ac-531b-5ce0-9810-b7d566b687a0")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["8295"],{958850(e,t,r){r.d(t,{Om:()=>s,R:()=>d,j6:()=>i,o:()=>o,r$:()=>l,rR:()=>n,xn:()=>a});let a="interactive_thumbnail--thumbnail--weL9A",n="interactive_thumbnail--onboardingTarget--r3Gag",l="interactive_thumbnail--dots--uCufy",i="interactive_thumbnail--dotHoverArea--C3Tz9",s="interactive_thumbnail--dot--ULKPh",o="interactive_thumbnail--activeDot--JtmqS",d="interactive_thumbnail--hidden--xiiPn"},776090(e,t,r){r.d(t,{Az:()=>x});var a=r(105652);if(1464==r.j)var n=r(270450);var l=r(759231),i=r(979897),s=r(863589),o=r(699715),d=r(376750),c=r(57396),u=r(285901),p=r(620338),f=r(778841),_=r(240256),m=r(930501),h=r(306874);let y=(0,l.Iz)(({orgId:e})=>(0,l.eU)(t=>e?t((0,c.K)((0,h.WF4)({orgId:e}))).transform(({org:e})=>{let t=!!(0,d.oA)(e?.isSalesAssistedPlanProperty)?.value,r=!!(0,d.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty);return{isSalesAssisted:t,noTosAcceptanceKey:(0,d.oA)(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==m.Lb.SEATS_MODEL_BILLING_2025,shouldNotAutoRenew:r}}):i.Qw.disabled()));function x(e){let t,r,i,c=e?.id??null,m=!(0,f.CT)(),{warningStatus:h,renewalDate:x,warningType:b}=function(e){let t=(0,s.Xf)(e),r=t.data?.analyze_data_contract_v2_start,a=r?(0,o.A)(r):null,n=(0,u.w)();function l(e,t,r){return{warningType:e,renewalDate:t,warningStatus:r}}if(a&&n.isBefore(a))if(30>=a.diff(n,"day"))return l("error",a,"loaded");else if(90>=a.diff(n,"day"))return l("warning",a,"loaded");else return l(null,a,"loaded");return l(null,a,t.status)}(c),v=!!(0,n.getFeatureFlags)().order_form_billing_terms_banner,g=(0,_.n)(),w=(0,l.md)((0,a.useMemo)(()=>y({orgId:c}),[c])),E=(0,d.oA)(w.data),k=function({orgCreatedAt:e,isSalesAssisted:t,noTosAcceptanceKey:r,shouldNotAutoRenew:a,onExclusionList:n,isAdminView:l,isTermsOfServiceUpdateOn:i}){return!!(e&&(0,p.d)({date:new Date(e)})&&t&&r&&(a||n)&&(l||i))}({orgCreatedAt:e?.created_at,isSalesAssisted:!!E?.isSalesAssisted,noTosAcceptanceKey:!!E?.noTosAcceptanceKey,shouldNotAutoRenew:!!E?.shouldNotAutoRenew,onExclusionList:m,isAdminView:g,isTermsOfServiceUpdateOn:(t=!!(0,n.getFeatureFlags)().terms_of_service_may_2025_update,r=(0,u.w)(),i=!!x&&r.isBefore(x)&&30>=x.diff(r,"day"),t&&i)}),T=(0,a.useMemo)(()=>"loaded"===w.status&&!!k,[w.status,k]);return"loading"===w.status||"loading"===h?(0,d.Xm)():(0,d.gB)({isEligible:v&&T,renewalDate:x,warningType:b})}},620338(e,t,r){r.d(t,{d:()=>l});var a=r(699715),n=r(824203);function l(e){let t=(0,n.initialOptions)().analyze_data_flow_v2_until;return!!t&&(0,a.A)(e.date).isBefore((0,a.A)(t))}},661584(e,t,r){r.d(t,{f:()=>c,x:()=>d});var a=r(239976);if(1464==r.j)var n=r(470683);if(1464==r.j)var l=r(944371);var i=r(124144);if(1464==r.j)var s=r(338301);var o=r(839286);let d="FILE_CREATION_OMNICREATE_DROPDOWN";function c({menuItems:e,"data-onboarding-key":t,trackingProperties:r}){let c=e.newFiles.map(({key:e,...t})=>(0,a.jsx)(o.e,{...t},e));return(0,a.jsx)(l.a,{mode:"match",children:(0,a.jsx)(n.mc,{"data-onboarding-key":t,children:(0,a.jsxs)(i.fu,{name:s.e0.RESOURCE_CREATION_DROPDOWN,properties:{...r,fileCreationDefaultsDropdownType:d},onlyOnce:!0,children:[(0,a.jsx)(n.YJ,{children:c}),function(){if(!e.import)return null;let{key:t,...r}=e.import;return(0,a.jsx)(o.e,{...r},t)}()]})})})}},839286(e,t,r){r.d(t,{e:()=>p,_:()=>u});var a,n=r(239976);if(1464==r.j)var l=r(470683);if(1464==r.j)var i=r(731112);if(1464==r.j)var s=r(429270);var o=r(417675);r(323264);var d=r(201368);function c({text:e,disabled:t}){return(0,n.jsx)(d.Ex,{color:t?d.zE.DISABLED:d.zE.DEFAULT_TRANSLUCENT,text:e})}var u=1464==r.j?((a=u||{}).REQUEST_UPGRADE="REQUEST_UPGRADE",a.REQUEST_SENT="REQUEST_SENT",a.ALPHA="ALPHA",a.BETA="BETA",a):null;function p(e){let t=(0,i.G)(),r=e.isDisabled||e.isLoading;return(0,n.jsx)(s.J,{brand:e.brand,children:(0,n.jsx)(l.q7,{...{0:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh x1pcmjzl xmh6jz9 x1hop9l x1sd2uan x1g40iwv"},2:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv xc4ye4f"},1:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"},3:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"}}[("dark"===t.color)<<1|!!e.brand],onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:r,"data-onboarding-key":e.dataOnboardingKey,children:(0,n.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xh8yej3"},children:[(0,n.jsxs)("div",{...{className:"x78zum5 x167g77z x6s0dn4 x1iyjqo2"},children:[(0,n.jsx)("div",{...{0:{},2:{className:"x1aue78i"},1:{className:"xe5c7bq"},3:{className:"xe5c7bq"}}[!!e.brand<<1|!!e.isDisabled],children:e.icon}),(0,n.jsx)("span",{...{0:{className:"x17akokd x1qxcl5b xclx6tv x1akne3o"},1:{className:"x17akokd x1qxcl5b xclx6tv x3vvef7"}}[0|!!e.isDisabled],children:e.title})]}),e.badges?(0,n.jsx)("div",{...{className:"x78zum5 x1c4vz4f x6s0dn4"},children:e.badges.map(e=>(0,n.jsx)(c,{text:f(e),disabled:r},e))}):null]})})})}let f=e=>{switch(e){case"REQUEST_UPGRADE":return(0,o.t)("upgrades.request");case"REQUEST_SENT":return(0,o.t)("upgrades.request_sent");case"ALPHA":return(0,o.t)("file_browser.creation_buttons.alpha");case"BETA":return(0,o.t)("file_browser.creation_buttons.beta")}}},504743(e,t,r){r.d(t,{q:()=>c});var a=r(239976),n=r(225519),l=r(70555),i=r(336435),s=r(942356),o=r(417675),d=r(559381);let c=(0,r(354584).Ju)(function(e){let{open:t,onClose:r,onRemove:c,fileName:u}=e,p=n.hS({open:t,onClose:r}),f=(0,a.jsx)(d.E,{fontWeight:"semi-bold",children:u}),_=async()=>{await c(),r()};return(0,a.jsx)(l.bL,{manager:p,width:"md",children:(0,a.jsxs)(i.vo,{children:[(0,a.jsx)(i.Y9,{children:(0,a.jsx)(i.hE,{children:(0,o.tx)("shared_with_you.confirm_delete.remove_file")})}),(0,a.jsx)(i.nB,{children:(0,o.tx)("shared_with_you.confirm_delete.body",{file_name:f})}),(0,a.jsx)(i.wi,{children:(0,a.jsxs)(i.jk,{children:[(0,a.jsx)(s.$n,{variant:"secondary",onClick:r,children:(0,o.tx)("shared_with_you.confirm_delete.cancel")}),(0,a.jsx)(s.$n,{variant:"destructive",onClick:_,children:(0,o.tx)("shared_with_you.confirm_delete.remove")})]})})]})})})},567195(e,t,r){let a;r.d(t,{a:()=>i});var n=r(948006),l=r(354584);function i(){return a??=(0,l.Ju)(n.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("7360"),r.e("826"),r.e("7205"),r.e("158"),r.e("612"),r.e("6802"),r.e("1386"),r.e("5683"),r.e("5389"),r.e("2860"),r.e("8883"),r.e("7976"),r.e("6781"),r.e("6687"),r.e("7500"),r.e("7471"),r.e("8251"),r.e("9646"),r.e("2857"),r.e("8295"),r.e("5519"),r.e("1761"),r.e("3278")]).then(r.bind(r,20640)).then(e=>e.AddPinModal),(0,l.Ij)("AddPinModal")))}},338283(e,t,r){let a;r.d(t,{I:()=>i});var n=r(948006),l=r(354584);function i(){return a??=(0,l.Ju)(n.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("7360"),r.e("826"),r.e("7205"),r.e("158"),r.e("612"),r.e("6802"),r.e("1386"),r.e("5683"),r.e("5389"),r.e("2860"),r.e("8883"),r.e("7976"),r.e("6781"),r.e("6687"),r.e("7500"),r.e("7471"),r.e("8251"),r.e("9646"),r.e("2857"),r.e("8295"),r.e("5519"),r.e("1761"),r.e("3278")]).then(r.bind(r,177648)).then(e=>e.DeletePinModal),(0,l.Ij)("DeletePinModal")))}},4812(e,t,r){let a;r.d(t,{l:()=>i});var n=r(948006),l=r(354584);function i(){return a??=(0,l.Ju)(n.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("7360"),r.e("826"),r.e("7205"),r.e("158"),r.e("612"),r.e("6802"),r.e("1386"),r.e("5683"),r.e("5389"),r.e("2860"),r.e("8883"),r.e("7976"),r.e("6781"),r.e("6687"),r.e("7500"),r.e("7471"),r.e("8251"),r.e("9646"),r.e("2857"),r.e("8295"),r.e("5519"),r.e("1761"),r.e("3278")]).then(r.bind(r,293657)).then(e=>e.EditPinModal),(0,l.Ij)("EditPinModal")))}},145288(e,t,r){r.d(t,{Z:()=>tY});var a,n=r(239976),l=r(105652),i=r(645186),s=r(270450),o=r(478741),d=r(759231),c=r(323264),u=r(867760),p=r(504923),f=r(708421),_=r(611325),m=r(425921),h=r(981517),y=r(759179),x=r(362060),b=r(580776),v=r(751239),g=r(321204),w=r(730436),E=r(417675),k=r(62387),T=r(774841),F=r(569931),C=r(270307),I=r(852541),S=r(978546),j=r(150775),R=r(674622),A=r(293666),O=r(862114);function N(e){let t=e?.type??null,r=(0,d.md)(x.J),a=(0,d.md)(x.jM),n=(0,d.md)(x.P_),[i,s]=(0,d.fp)(R.R9),o=(0,d.md)(R.Q8),c=(0,d.md)(R.BA),u=(0,d.md)(R.sC),p=(0,d.md)(_.hO.isFragmentSearchAtom),[f,m]=(0,d.fp)((0,x.l4)(t)),h=(0,O.L)(p?"fragment_search_modal":"file_browser",u,!0);return l.useCallback(()=>{if(!e||!f)return;let t=null;e.type===A.WY.RESOURCE&&f.type===A.WY.RESOURCE?t=null:e.type===A.WY.CREATOR&&f.type===A.WY.CREATOR?t=(0,S.C8)(e,S.M2.REMOVE_FROM_GROUP,f):e.type===A.WY.SPACE&&f.type===A.WY.SPACE&&(t=(0,S.q1)(e,S.M2.REMOVE_FROM_GROUP,f)),m(t);let l=(0,S.gh)(t||{type:e.type,value:null},a,r,n,i??void 0);s(l?.searchModelType??null),h(o,A.uH.FILES,l,c,!1,!1)},[e,r,f,a,n,c,h,i,o,m,s])}var P=r(774197);let L="facet_pills--type---RCNh";function M({previewIsShown:e}){let t=(0,d.md)(x.L8),r=(0,d.md)(x.rG);return(0,n.jsx)(n.Fragment,{children:t.map((t,a)=>(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(D,{facet:t,index:a,isActive:(0,C.c2)(t,r),previewIsShown:e},`pill-${a}`):(0,n.jsx)(B,{facet:t,index:a,isActive:(0,C.c2)(t,r)},`pill-${a}`))})}function D({facet:e,index:t,isActive:r,previewIsShown:a}){let i=l.useRef(null),s=(0,d.md)(x.L8),o=(0,d.Xr)(x.rG),c=N(e),u=(0,S.gl)(e.type),p=(0,S.FR)(e),f=(0,j.k)(),_=l.useCallback(t=>{r?(o(null),i.current?.blur()):(t.stopPropagation(),o(e),i.current?.focus())},[e,r,o]),m=l.useCallback(a=>{r&&(("Backspace"===a.key||"Delete"===a.key)&&(c(),f((0,S.oM)(e),A.jD.PILL,A.uR.AUTOCOMPLETE)),"ArrowLeft"===a.key&&t>0&&o(s[t-1]),"ArrowRight"===a.key&&(t<s.length-1?o(s[t+1]):o(null)))},[s,t,r,c,o,f,e]),h=l.useCallback(e=>{a&&_(e)},[a,_]);return l.useEffect(()=>{r&&i.current?.focus()},[r]),(0,n.jsx)("span",{className:r?"facet_pills--activePill--ujE04 facet_pills--pill--11FPS faceted_search_bar--activePill--5IYCE":"facet_pills--pill--11FPS",children:(0,n.jsxs)(I.v,{variant:"primary",selected:r,hasCloseButton:!0,onKeyDown:m,onMouseDown:h,tabIndex:0,ref:i,onClose:c,children:[(0,n.jsx)("span",{className:L,children:u}),p]})})}function B({facet:e,index:t,isActive:r}){let a=l.useRef(null),s=(0,i.d4)(e=>e.modalShown?.type===P.R),o=(0,d.md)(x.L8),c=(0,d.Xr)(x.rG),u=N(e),p=(0,S.gl)(e.type),f=(0,S.FR)(e),_=(0,j.k)(),m=l.useCallback(t=>{r?(c(null),a.current?.blur()):(t.stopPropagation(),c(e),a.current?.focus())},[e,r,c]),h=l.useCallback(a=>{r&&(("Backspace"===a.key||"Delete"===a.key)&&(u(),_((0,S.oM)(e),A.jD.PILL,A.uR.AUTOCOMPLETE)),"ArrowLeft"===a.key&&t>0&&c(o[t-1]),"ArrowRight"===a.key&&(t<o.length-1?c(o[t+1]):c(null)))},[o,t,r,u,c,_,e]),y=l.useCallback(e=>{s&&m(e)},[s,m]);return l.useEffect(()=>{r&&a.current?.focus()},[r]),(0,n.jsxs)("button",{className:r?"facet_pills--activePill_DEPRECATED--8WzJB facet_pills--pill_DEPRECATED--x5yCZ faceted_search_bar--activePill--5IYCE":"facet_pills--pill_DEPRECATED--x5yCZ",onKeyDown:h,onMouseDown:y,ref:a,children:[(0,n.jsx)("span",{className:L,children:p}),f]})}var W=r(854763),U=r(889953),H=((a=H||{}).TYPE="TYPE",a.TYPE_AND_VALUES="TYPE_AND_VALUES",a);let K=(0,d.eU)([]),Y=(0,d.eU)(e=>e(K),(e,t,r)=>{t(K,r)}),z=(0,d.eU)(e=>{let t=e(x.L8),r=e(x.zD),a=e(R.Q8),n=e(R.BA),l=G(t,r);if(a.length<2||0===l.length||n)return null;for(let e of l){let t=X((0,S.qM)(e)+":"),r=X(a,!0).lastIndexOf(t);if(r>=0)return{suggestionType:"TYPE",facetType:e,facetTypeIndex:r,valueToQuery:a.slice(r+t.length).trim()};let n=X(a).split(" ").pop();if(n&&Q(n,t))return{suggestionType:"TYPE",facetType:e,facetTypeIndex:a.lastIndexOf(n),valueToQuery:null}}return null}),V=(0,d.eU)(e=>{let t=e(z);if(!t||null==t.valueToQuery)return null;let r=t.valueToQuery;if(t.facetType===A.WY.RESOURCE){let a=e(x._4),n=a.map(S.S2),l=[];return(a.forEach((e,t)=>{Q(r,n[t])&&l.push(e)}),0===l.length)?null:{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.RESOURCE,facetTypeIndex:t.facetTypeIndex,facetValues:l.slice(0,6)}}let a=e(Y);if(0===a.length)return null;if(t.facetType===A.WY.CREATOR){let r=(0,U.nv)(a,A.dC.USERS);if(0===r.length)return null;let n=e(x.J),l=n?.value||[],i=r.filter(e=>!(0,C.Jj)(l,e)).slice(0,5);if(0===i.length)return null;let s=i.map(e=>({type:A.WY.CREATOR,value:e}));return{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.CREATOR,facetTypeIndex:t.facetTypeIndex,facetValues:s}}if(t.facetType===A.WY.SPACE){let r=e(x.P_),n=e(x.q$),l=[];if(n.includes(A.qy.FOLDER)){let e=r?.value?.folders||[],t=(0,U.nv)(a,A.dC.PROJECTS).slice(0,5).filter(t=>!(0,C.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.FOLDER,value:e}));l.push(...t)}if(n.includes(A.qy.TEAM)){let e=r?.value?.teams||[],t=(0,U.nv)(a,A.dC.TEAMS).slice(0,5).filter(t=>!(0,C.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.TEAM,value:e}));l.push(...t)}if(n.includes(A.qy.ORG)){let e=r?.value?.orgs||[],t=(0,U.nv)(a,A.dC.ORGS).slice(0,5).filter(t=>!(0,C.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.ORG,value:e}));l.push(...t)}return 0===l.length?null:{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.SPACE,facetTypeIndex:t.facetTypeIndex,facetValues:l.slice(0,5)}}return null}),$=(0,d.eU)(e=>{let t=e(z);return e(V)||t}),q=(0,d.eU)(null);function G(e,t){let r=new Set(t);(0,S.sd)(A.WY.RESOURCE,e)&&r.delete(A.WY.RESOURCE);let a=0,n=0;for(let t of e)t.type===A.WY.CREATOR&&a++,t.type===A.WY.SPACE&&n++;return a>=S.hp&&r.delete(A.WY.CREATOR),n>=S.hp&&r.delete(A.WY.SPACE),Array.from(r)}let Q=(e,t)=>X(t).startsWith(X(e)),X=(e,t)=>t?e.toLocaleLowerCase():e.toLocaleLowerCase().trim().replace(/\s+/g," ");var J=r(535374);function Z(){let e=(0,d.Xr)(Y),t=(0,d.md)(z),r=t?.facetType,a=t?.valueToQuery??null,n=(0,J.F)(a,r);l.useEffect(()=>{"loading"===n.status||e(n.data?n.data:[])},[n,e])}function ee({hideSearchPreview:e,autocomplete:t,searchInputRef:r,expanded:a,expandModal:s,collapseModal:o}){let c=(0,i.wA)(),u=(0,h._6)(),p=(0,y.X0)(u),[f,C]=l.useState(!1),I=l.useRef(null),[S,j]=(0,d.fp)(R.Q8),A=(0,d.md)(R.BA),P=(0,d.md)(R.sC),L=(0,d.md)(x.oT),D=(0,d.md)(x.L8),[B,U]=(0,d.fp)(x.rG),H=(0,d.Xr)(x.q4),K=(0,d.md)(_.hO.isFragmentSearchAtom),Y=(0,O.y)(K?"fragment_search_modal":p?"desktop_new_tab":"file_browser",P,!0),z=N(B),{activeValue:V,setActiveValue:$}=l.useContext(W.M),q="[role=option]",G=t?.refs.scroll,Q=l.useCallback(()=>{let e=G?.current,t=e?.querySelector(q);return t?t.id:void 0},[G]),X=l.useCallback(()=>{let e=G?.current,t=e?.querySelectorAll(q);return t?.[t.length-1]?t?.[t.length-1].id:void 0},[G]);Z();let J=l.useCallback(()=>{I.current?.scrollTo({left:I.current.scrollWidth})},[]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(r.current?.focus(),J())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[J,r]);let ee=l.useCallback(t=>{j(t.target.value),e||Y(t.target.value,A,!1,!1)},[A,Y,j,e]),et=l.useCallback(e=>{if(f)return;"Escape"===e.key||"Tab"===e.key?o?.():s?.();let{selectionStart:t,selectionEnd:r}=e.currentTarget,a=0===t&&0===r,n=0===S.trim().length&&0===D.length;if("Enter"===e.key&&void 0===V){if(n)return;Y(S,A,!0,!0),K&&o?.()}!A&&(("Backspace"===e.key||"Delete"===e.key)&&a&&(B?z():U(L)),"ArrowLeft"===e.key&&a&&U(L))},[f,B,A,L,D.length,Y,S,z,U,K,V,o,s]),er=l.useCallback(()=>{j(""),c(m._z({})),H(),A&&(0,y.kV)(u)&&c(T.sf(u.previousView??{view:"recentsAndSharing"}))},[H,c,u,A,j]),ea=l.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),r.current?.focus(),a||s?.(),r.current){let e=r.current.value.length;r.current.setSelectionRange(e,e)}B&&U(null)},[B,U,r,a,s]),en=l.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);l.useEffect(()=>{B||A||!a||(r.current?.focus(),$(void 0))},[B,D,S,A,$,a,r]);let el=0!==D.length,ei=0===S.length&&(!el||A);l.useLayoutEffect(()=>{if(!r||!r.current)return;if(ei){r.current.style.width="calc(100% - 10px)";return}var e=document.createElement("span");e.innerHTML=(0,k.p)(S.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;r.current.style.width=`${t}px`,document.body.removeChild(e),J()},[S,J,r,ei]);let es=!A&&!p,eo=l.useMemo(()=>t?.getInputProps({onKeyDown:et,onFocus:s})??{ref:r,onKeyDown:et,onFocus:s},[t,et,r,s]),ed={...eo,onKeyDown:l.useCallback(e=>{if("ArrowUp"===e.key&&void 0!==V&&Q()===V)G.current?.scrollTo({top:0}),e.preventDefault(),$(void 0);else{if("ArrowUp"===e.key&&void 0===V||"ArrowDown"===e.key&&void 0!==V&&X()===V)return;eo.onKeyDown?.(e)}},[V,Q,X,eo,$,G])};return(0,n.jsxs)(b.Y.Root,{className:"faceted_search_bar--searchBar--FO3mb search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",onMouseDown:ea,onClick:en,children:[(0,n.jsx)("div",{className:"faceted_search_bar--rightFadeContainer--NFGS6 faceted_search_bar--_fadeContainer--TZ-3N",children:(0,n.jsx)(g.W,{className:"faceted_search_bar--iconWrapper--0xWey","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"faceted_search_bar--clipContainer--LZia-",ref:I,children:[es&&(0,n.jsx)(M,{previewIsShown:a}),(0,n.jsx)(b.Y,{"aria-label":(0,E.t)("search.search_bar.placeholder_v2"),className:"faceted_search_bar--input--DXi7V","data-testid":"facetedSearchInput",id:"facetedSearchInput",onChange:(e,t)=>ee(t.event),onCompositionEnd:()=>C(!1),onCompositionStart:()=>C(!0),onMouseDown:e=>{e.stopPropagation(),s?.()},placeholder:ei?(0,E.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:!1,value:S,...ed})]}),(!!S||el)&&(0,n.jsx)("div",{className:"faceted_search_bar--leftFadeContainer--CFZP0 faceted_search_bar--_fadeContainer--TZ-3N","data-testid":"facetedSearchClear",children:(0,n.jsx)("div",{className:"faceted_search_bar--clearButtonWrapper--30-gF",children:(0,n.jsx)(v.K,{"aria-label":(0,E.t)("search.search_bar.clear"),"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,E.t)("search.search_bar.clear"),onClick:er,actionOnPointerDown:!0,children:(0,n.jsx)(w.X,{})})})})]})}var et=r(425006),er=r(224542),ea=r.n(er),en=r(934163),el=r(485036),ei=r(537791),es=r(892480);function eo({hideSearchPreview:e}){let t=(0,i.wA)(),r=(0,h._6)(),a=(0,y.X0)(r),[s,c]=l.useState(!1),u=l.useRef(null),p=l.useRef(null),[f,b]=(0,d.fp)(R.Q8),C=(0,d.md)(R.BA),I=(0,d.md)(R.sC),S=(0,d.md)(x.oT),j=(0,d.md)(x.L8),[A,P]=(0,d.fp)(x.rG),L=(0,d.Xr)(x.q4),D=(0,d.md)(_.hO.isFragmentSearchAtom),B=(0,O.y)(D?"fragment_search_modal":a?"desktop_new_tab":"file_browser",I,!0),W=N(A);Z();let{setKeyboardNavigationElement:U,keyboardNavigationItem:H,isFocused:K,isFauxFocused:Y}=(0,el.M3)({id:"faceted-search-bar",path:[0]});(0,o.h)(()=>{u.current&&U?.(u.current)});let z=l.useCallback(()=>{p.current?.scrollTo({left:p.current.scrollWidth})},[]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(H?.focus(),H?.fauxFocus(),z())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[H,z]);let V=l.useCallback(t=>{b(t.target.value),e||B(t.target.value,C,!1,!1)},[C,B,b,e]),$=l.useCallback(e=>{if(s)return;let{selectionStart:r,selectionEnd:a}=e.currentTarget,n=0===r&&0===a,l=0===f.trim().length&&0===j.length;if("Enter"===e.key&&Y){if(l)return;B(f,C,!0,!0),D&&t(es.Lo())}!C&&(("Backspace"===e.key||"Delete"===e.key)&&n&&(A?W():P(S)),"ArrowLeft"===e.key&&n&&P(S))},[Y,j.length,s,A,C,S,B,f,W,P,D,t]),q=l.useCallback(()=>{b(""),t(m._z({})),L(),C&&(0,y.kV)(r)&&t(T.sf(r.previousView??{view:"recentsAndSharing"}))},[L,t,r,C,b]),G=l.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),H?.focus(),H?.fauxFocus(),u.current){let e=u.current.value.length;u.current.setSelectionRange(e,e)}A&&P(null)},[A,H,P]),Q=l.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);l.useEffect(()=>{K&&(H?.focus(),H?.fauxFocus(),z(),t(m.W0({entryPoint:D?"fragment_search_modal":"file_browser"})))},[t,K,H,z,D]),l.useEffect(()=>{A||C||(H?.focus(),H?.fauxFocus())},[A,j,H,f,C]);let X=0!==j.length,J=0===f.length&&(!X||C);l.useLayoutEffect(()=>{if(!u||!u.current)return;if(J){u.current.style.width="calc(100% - 10px)";return}var e=document.createElement("span");e.innerHTML=(0,k.p)(f.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;u.current.style.width=`${t}px`,document.body.removeChild(e),z()},[f,z,u,J]);let ee=!C&&!a;return(0,n.jsxs)("div",{className:"faceted_search_bar_deprecated--searchBar--NATRa search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",onMouseDown:G,onClick:Q,role:"button",tabIndex:0,children:[(0,n.jsx)("div",{className:"faceted_search_bar_deprecated--rightFadeContainer--MfSDN faceted_search_bar_deprecated--_fadeContainer--JLh32",children:(0,n.jsx)(g.W,{className:"faceted_search_bar_deprecated--iconWrapper--Ej1Tq"})}),(0,n.jsxs)("div",{className:"faceted_search_bar_deprecated--clipContainer--vGZa5",ref:p,children:[ee&&(0,n.jsx)(M,{}),(0,n.jsx)(ei.i,{ref:u,autoFocus:!0,className:"faceted_search_bar_deprecated--input--OUQ1l","data-testid":"facetedSearchInput",onChange:V,onCompositionEnd:()=>c(!1),onCompositionStart:()=>c(!0),onKeyDown:$,onMouseDown:e=>e.stopPropagation(),placeholder:J?(0,E.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:"false",value:f})]}),(!!f||X)&&(0,n.jsx)("div",{className:"faceted_search_bar_deprecated--leftFadeContainer--IcGj- faceted_search_bar_deprecated--_fadeContainer--JLh32","data-testid":"facetedSearchClear",children:(0,n.jsx)(v.K,{"aria-label":(0,E.t)("search.search_bar.clear"),onClick:q,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,E.t)("search.search_bar.clear"),children:(0,n.jsx)(w.X,{})})})]})}var ed=r(852059),ec=r(751293),eu=r(354584),ep=r(287789),ef=r(217871),e_=r(365146),em=r(863508),eh=r(257903),ey=r(306874),ex=r(28583),eb=r(152666),ev=r(925778),eg=r(296039),ew=r(860736),eE=r(938328),ek=r(536248),eT=r(643651),eF=r(134489),eC=r(424823),eI=r(122491),eS=r(449979),ej=r(429921),eR=r(770589),eA=r(376661),eO=r(837487);let eN=l.createContext("PREVIEW");function eP({href:e,icon:t,id:r,path:a,text:s,breadcrumbElement:o,disableRecentSearchOnClick:c,onClickCallback:u,onContextMenuCallback:p,onKeyEnterCallback:f,sideElement:_,sideElementAlwaysVisible:h,rowStyle:y,rowHeight:x,textToHighlight:b,trackInteraction:v,elementBesideName:g}){let w=(0,eS.sR)(l.useContext(eN),"Must use `FacetedSearchPreviewRowBase` inside `<SearchRowContext.Provider>"),E=(0,i.wA)(),k=(0,d.md)(R.Q8),T=(0,i.d4)(e=>e.currentUserOrgId),F=(0,em.S)(T)?.searches,{setKeyboardNavigationElement:C,isFauxFocused:I}=(0,el.M3)({id:r,path:a}),S=l.useCallback(()=>{k&&!c&&E(m.nG({searchQuery:k,previousSearches:F})),v?.(ed.vj.Query.ClickAction.CLICK)},[c,E,F,k,v]),j=l.useCallback(e=>{S(),u?.(e)},[S,u]),A=l.useCallback(e=>{1===e.button&&(S(),u?.(e))},[S,u]),O=l.useCallback(e=>{"Enter"===e.key&&(v?.(ed.vj.Query.ClickAction.ENTER),f?.(e))},[f,v]),N=l.useCallback(e=>{p?.(e)},[p]);return(0,n.jsx)(ej.o,{eventListeners:["onClick","onMouseDown"],children:(0,n.jsx)(eR.N,{href:e??"",onContextMenu:N,onKeyDown:O,onAuxClick:A,tabIndex:0,onClick:j,ref:C,children:(0,n.jsxs)("div",{className:ea()(eO.nM,{[eO._O]:"BRAND"===y,[eO.iJ]:"BRAND_HOVER"===y,[eO.fc]:"SHORT"===x,[eO.Hi]:I}),children:[(0,n.jsxs)("div",{className:eO.aU,tabIndex:-1,children:[t&&(0,n.jsx)("div",{className:ea()(eO.Kk,{[eO.L0]:"CHECKBOX"===y}),children:t}),(0,n.jsxs)("div",{className:ea()(eO.FS,{[eO.y4]:!t,[eO.JX]:"BRAND"===y||"BRAND_HOVER"===y,[eO.b3]:"DROPDOWN"===w,[eO.P6]:"CHECKBOX"===y}),children:[(0,n.jsxs)("div",{className:eO.mX,children:[(0,n.jsx)("div",{className:eO.h5,children:b?(0,n.jsx)(eA.f,{text:s,query:b}):(0,n.jsx)(n.Fragment,{children:s})}),!!g&&g]}),!!o&&(0,n.jsx)("div",{className:eO.QF,children:o})]})]}),!!_&&(0,n.jsx)("div",{className:ea()({[eO.qZ]:!h,[eO.PQ]:h,[eO.eF]:"CHECKBOX"===y,[eO.Hi]:I}),tabIndex:-1,children:_})]})})})}function eL({leftElement:e,rightElement:t}){return(0,n.jsxs)("div",{className:"faceted_search_preview_row_breadcrumb--breadcrumbContainer--iSL-F text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,n.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--ellipsis--Xxf2x ellipsis--ellipsis--70pHK",children:e}),!!e&&!!t&&(0,n.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--dot--aW3BF",children:"\xb7"}),(0,n.jsx)("span",{children:t})]})}function eM({fileResult:e,id:t,path:r,position:a,onContextMenuCallback:o}){let c=(0,i.wA)(),u=(0,i.d4)(e=>e.currentUserOrgId||void 0),p=(0,i.d4)(e=>e.currentTeamId),f=(0,i.d4)(e=>e.user),_=(0,i.d4)(e=>e.search.sessionId),m=(0,d.md)(R.Q),y=(0,ek.$E)(),x=(0,h._6)(),b=(0,U.EN)(e),v=b?e.model:e,g=b?e:v,{data:w}=(0,eg.bc)((0,ey.yf7)(v.folder_id?{projectId:v.folder_id}:null)),E=w?.project?.path??"",k=(0,U.AR)(v,f,u,p,x),T=(0,eT.GT)(k,a,b?e:void 0),{Sprig:F}=(0,ew.A)(),C=(0,eF.v)(),I=l.useCallback(()=>{(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?C((0,eC.fA)(v)):(c(es.AS()),(0,U.K4)(c,v,u??null,p,f,F))},[u,p,f,c,v,C,F]),S=l.useCallback(e=>{e.preventDefault(),(0,s.getFeatureFlags)().file_browser_sentiment_survey&&F("setAttribute","fb_file_opened",!0),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?C((0,eC.fA)(v),e):e.metaKey||1===e.button?ev.Ay.redirect(k,"_blank"):I()},[k,I,v,C,F]),j=l.useCallback(e=>{e.preventDefault(),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?C((0,eC.fA)(v),e):(c(es.AS()),(0,U.K4)(c,v,u??null,p,f,F))},[u,p,f,c,v,C,F]),A=l.useCallback(e=>{o({index:0,data:g,canAccessFileResultFolder:!!E},e)},[g,E,o]),O=l.useCallback(t=>{b?T(t):ed.vj.Recents.trackRecentsClick(_,a,e.key,ed.vj.RecentType.FILE)},[e,b,a,_,T]),N=y(v);return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{breadcrumbElement:(0,n.jsx)(eD,{file:v,folderName:E}),icon:(0,n.jsx)(ek.w4,{size:16,type:N}),id:t,onClickCallback:S,onContextMenuCallback:A,onSelectCallback:I,text:v.name,textToHighlight:m,trackInteraction:O}):(0,n.jsx)(eP,{breadcrumbElement:(0,n.jsx)(eD,{file:v,folderName:E}),icon:(0,n.jsx)(ek.w4,{size:16,type:N}),id:t,onClickCallback:S,onContextMenuCallback:A,onKeyEnterCallback:j,path:r,text:v.name,textToHighlight:m,trackInteraction:O})}function eD({file:e,folderName:t}){let r=e.touched_at?(0,E.tx)("search.preview_item.edited_from_now",{relativeTimeString:(0,n.jsx)(eE.h1,{date:e.touched_at,style:"narrow"})}):null;return(0,n.jsx)(eL,{leftElement:t||null,rightElement:r})}var eB=r(270166),eW=r(728177),eU=r(556486),eH=r(19264);function eK({id:e,path:t,position:r,recentSearch:a}){let o=(0,i.wA)(),c=(0,h._6)(),u=(0,y.X0)(c)?"desktop_new_tab":"file_browser",p=(0,d.Xr)(R.Q8),f=(0,d.md)(R.sC),_=(0,d.md)(R.R9),b=(0,d.md)(x.CZ),g=(0,i.d4)(e=>e.currentUserOrgId||null),w=(0,i.d4)(e=>e.search.sessionId),k=(0,em.S)(g)?.searches,T=l.useCallback(()=>{(0,y.X0)(c)&&o(m.Rz({query:a.query,searchScope:f,searchModelType:A.uH.FILES})),o(m.Dy({entryPoint:u})),p(a.query),(0,U.Yb)(o,c,u,a.query,f,_??A.uH.FILES,!0,b),o(es.AS())},[o,u,b,a.query,_,f,c,p]),F=l.useCallback(e=>{if(e.preventDefault(),e.metaKey){(0,y.X0)(c)&&o(m.Rz({query:a.query,searchScope:f,searchModelType:A.uH.FILES}));let e=(0,U.XW)(a.query,g,_??A.uH.FILES);ev.Ay.redirect(e,"_blank")}else T()},[c,o,T,a.query,f,g,_]),C=l.useCallback(e=>{e.stopPropagation(),e.preventDefault(),o(m.uL({orgId:g,searchQuery:a.query,previousSearches:k}))},[g,o,k,a.query]),I=l.useCallback(()=>{ed.vj.Recents.trackRecentsClick(w,r,null,ed.vj.RecentType.SEARCH)},[r,w]),S=(0,n.jsx)("div",{className:"faceted_search_preview_recent_row--clearButton--BwAYl raw_components--iconButtonEnabled--dC-EG raw_components--_iconButton--aCldD",children:(0,n.jsx)(v.K,{"aria-label":(0,E.t)("search.search_bar.clear"),onClick:C,children:(0,n.jsx)(eB.A,{})})});return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{icon:(0,n.jsx)(eW.R,{}),id:e,text:a.query,onClickCallback:F,onSelectCallback:T,sideElement:S,trackInteraction:I}):(0,n.jsx)(eP,{icon:(0,n.jsx)(eU.B,{className:"faceted_search_preview_recent_row--icon--NNpnj",svg:eH.A}),id:e,path:t,text:a.query,onClickCallback:F,sideElement:S,trackInteraction:I})}function eY({id:e,path:t}){let r=(0,i.d4)(e=>e.currentUserOrgId),a=(0,em.S)(r),s=a.searches.slice(0,A.Or),o=A.MU-s.length,d=function(){let[e]=(0,e_.IT)((0,ey.MAl)({})),t=l.useMemo(()=>e.transform(e=>(0,ex.YN)(e.currentUser.recentFiles)),[e]);return l.useEffect(()=>{"loaded"===t.status&&(0,ef.Wn)(t.data)},[t]),l.useMemo(()=>t.transform(e=>e.recent_files),[t])}(),c=d?.data?.slice(0,o)||[];return"loaded"!==d.status||"loaded"!==a.status?(0,n.jsx)(eb.e,{numRows:A.MU}):(0,n.jsxs)(n.Fragment,{children:[s.length+c.length>0&&(0,n.jsx)("div",{className:"faceted_search_preview_recents--header--eCXyq",children:(0,E.tx)("search.preview_section.recent")}),s.map((r,a)=>{let l=`${e}-recent-search-${a}`;return(0,n.jsx)(eK,{id:l,path:[...t,0,a],position:a,recentSearch:r},l)}),(0,n.jsx)(eh.Q0,{isDropdown:!0,children:(0,n.jsx)(eh.kq.Consumer,{children:r=>(0,n.jsx)(n.Fragment,{children:c.map((a,l)=>{let i=`${e}-recent-file-${l}`,o=s.length+l;return(0,n.jsx)(eM,{fileResult:a,id:i,path:[...t,1,l],position:o,onContextMenuCallback:r.onContextMenuClick},i)})})})})]})}var ez=r(16533),eV=r(57894),e$=r(972732),eq=r(30631),eG=r(11637);function eQ({folderResult:e,id:t,path:r,position:a,onContextMenuCallback:o}){let c=(0,i.wA)(),u=(0,d.md)(R.Q8),p=(0,U.uF)(e.model),f=(0,eT.GT)(p,a,e),_=(0,eq.EB)(),m=l.useCallback(()=>{c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?_(e.model.id):(0,U.NE)(c,e.model)},[c,e,_]),h=l.useCallback(t=>{t.preventDefault(),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||c(es.AS()),_(e.model.id,t)):t.metaKey||1===t.button?ev.Ay.redirect(p,"_blank"):m()},[p,m,e.model.id,_,c]),y=l.useCallback(t=>{t.preventDefault(),c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?_(e.model.id,t):(0,U.NE)(c,e.model)},[c,e,_]),x=l.useCallback(t=>{o({index:0,data:e},t)},[e,o]);return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{breadcrumbElement:(0,n.jsx)(eX,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,n.jsx)(e$.W,{}):void 0,icon:(0,n.jsx)(eV.J,{}),id:t,onClickCallback:h,onContextMenuCallback:x,onSelectCallback:m,text:e.model.name,textToHighlight:u,trackInteraction:f}):(0,n.jsx)(eP,{breadcrumbElement:(0,n.jsx)(eX,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,n.jsx)(e$.W,{}):void 0,icon:(0,n.jsx)(eU.B,{className:"faceted_search_preview_folder_row--icon--DDefz",svg:eG.A}),id:t,onClickCallback:h,onContextMenuCallback:x,onKeyEnterCallback:y,path:r,text:e.model.name,textToHighlight:u,trackInteraction:f})}function eX({folderResult:e}){let{data:t}=(0,eg.bc)(ey.sn$,{teamId:e.model.team_id??""},{enabled:!!e.model.team_id}),r=t?.team?.name||"",a=r?(0,E.tx)("search.preview_item.in_team",{teamName:r}):null,l=(0,E.tx)("search.preview_item.num_files_in_project",{fileCount:e.file_count});return(0,n.jsx)(eL,{leftElement:a,rightElement:l})}var eJ=r(704895),eZ=r(438168);function e0({teamResult:e,id:t,path:r,position:a,onContextMenuCallback:o}){let c=(0,i.wA)(),u=(0,d.md)(R.Q),p=(0,U.Xx)(e.model),f=(0,eT.GT)(p,a,e),_=(0,eZ.lo)(),m=l.useCallback(()=>{c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?_(e.model):(0,U.e_)(c,e.model)},[c,e,_]),h=l.useCallback(t=>{t.preventDefault(),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||c(es.AS()),_(e.model,t)):t.metaKey||1===t.button?ev.Ay.redirect(p,"_blank"):m()},[p,m,e,_,c]),y=l.useCallback(t=>{t.preventDefault(),c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?_(e.model,t):(0,U.e_)(c,e.model)},[c,e,_]),x=l.useCallback(t=>{o({index:0,data:e},t)},[o,e]);return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{breadcrumbElement:(0,n.jsx)(e1,{teamResult:e}),icon:(0,n.jsx)(eJ.nl,{team:e.model,size:eJ.Pf.MEDIUM}),id:t,onClickCallback:h,onContextMenuCallback:x,onSelectCallback:m,text:e.model.name,textToHighlight:u,trackInteraction:f}):(0,n.jsx)(eP,{breadcrumbElement:(0,n.jsx)(e1,{teamResult:e}),icon:(0,n.jsx)(eJ.nl,{team:e.model,size:eJ.Pf.MEDIUM}),id:t,onClickCallback:h,onContextMenuCallback:x,onKeyEnterCallback:y,path:r,text:e.model.name,textToHighlight:u,trackInteraction:f})}function e1({teamResult:e}){let t=(0,i.d4)(t=>t.teams[e.model.id]),r=(0,E.tx)("search.preview_item.num_members_in_team",{memberCount:e.member_count}),a=t?(0,E.tx)("search.preview_item.num_projects_in_team",{projectCount:t.projects??0}):null;return(0,n.jsx)(eL,{leftElement:r,rightElement:a})}var e4=r(102890),e2=r(39366),e5=r(763738);function e8({id:e,path:t,position:r,userResult:a,onContextMenuCallback:o}){let c=(0,i.wA)(),u=(0,d.md)(R.Q),p=(0,i.d4)(e=>e.currentUserOrgId||void 0),f=(0,i.d4)(e=>e.orgById),_=(0,e2.t)(a.model,p),m=(0,eT.GT)(_,r,a),h=(0,e4.y)(),y=l.useCallback(()=>{c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?h(a.model):(0,U.KL)(c,a.model)},[c,a,h]),x=l.useCallback(e=>{e.preventDefault(),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(e.metaKey||1===e.button||c(es.AS()),h(a.model,e)):e.metaKey||1===e.button?ev.Ay.redirect(_,"_blank"):y()},[_,y,a,h,c]),b=l.useCallback(e=>{e.preventDefault(),c(es.AS()),(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?h(a.model,e):(0,U.KL)(c,a.model)},[c,a,h]),v=l.useCallback(e=>{o({index:0,data:a},e)},[o,a]),g=a.model.org_id&&f[a.model.org_id]||null,w=(0,n.jsxs)("div",{className:"faceted_search_preview_user_row--iconContainer--qq0UZ",children:[(0,n.jsx)(eJ.H8,{user:a.model,size:eJ.Pf.MEDIUM}),g&&(0,n.jsx)("div",{className:"faceted_search_preview_user_row--planIcon--YZqvT",children:(0,n.jsx)(e5.H,{entityId:g.id,entityName:g.name,imgUrl:g.img_url,size:10})})]});return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{breadcrumbElement:a.last_active_at?(0,E.tx)("search.preview_item.active_from_now",{relativeTimeString:(0,n.jsx)(eE.h1,{date:a.last_active_at,style:"narrow"})}):void 0,icon:w,id:e,onClickCallback:x,onContextMenuCallback:v,onSelectCallback:y,text:a.model.name||a.model.handle,textToHighlight:u,trackInteraction:m}):(0,n.jsx)(eP,{icon:w,id:e,onClickCallback:x,onContextMenuCallback:v,onKeyEnterCallback:b,path:t,text:a.model.name||a.model.handle,textToHighlight:u,trackInteraction:m})}var e6=r(559579),e7=r(580664),e3=r(418353),e9=r(976541),te=r(158487),tt=r(519668);function tr({onSearch:e,id:t,path:r,showResultsForModelType:a}){let i=(0,d.md)(R.Q8),o=(0,d.md)(x.jM),c=a&&o?(0,A.Xr)(o):null,u=l.useCallback(()=>{e(i,!1,!0,!0)},[i,e]),p=l.useCallback(e=>{e.preventDefault(),e.metaKey||u()},[u]),f=l.useMemo(()=>{if((0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration)switch(c){case A.uH.FILES:return(0,n.jsx)(e6.p,{});case A.uH.PROJECTS:return(0,n.jsx)(e7.e,{});case A.uH.TEAMS:return(0,n.jsx)(e3.b,{});case A.uH.USERS:return(0,n.jsx)(e9.j,{});default:return(0,n.jsx)(g.W,{})}switch(c){case A.uH.FILES:return(0,n.jsx)(te.In,{icon:"page-16",fill:"brand"});case A.uH.PROJECTS:return(0,n.jsx)(te.In,{icon:"folder-16",fill:"brand"});case A.uH.TEAMS:return(0,n.jsx)(te.In,{icon:"team-16",fill:"brand"});case A.uH.USERS:return(0,n.jsx)(eU.B,{svg:tt.A,className:"faceted_search_see_all_results--icon--nYbNU"});default:return(0,n.jsx)(te.In,{icon:"search-32",fill:"brand"})}},[c]),_=l.useMemo(()=>{switch(c){case A.uH.FILES:return(0,E.t)("search.facet_preview_section.see_more_files");case A.uH.PROJECTS:return(0,E.t)("search.facet_preview_section.see_more_projects");case A.uH.TEAMS:return(0,E.t)("search.facet_preview_section.see_more_teams");case A.uH.USERS:return(0,E.t)("search.facet_preview_section.see_more_users");default:return(0,E.t)("search.preview_section.see_all_results")}},[c]);return(0,n.jsx)("div",{className:"faceted_search_see_all_results--container--LPor3",onContextMenu:e=>e.preventDefault(),children:(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(eI.cr,{icon:f,id:t,onClickCallback:p,onSelectCallback:u,rowStyle:eI.yY.BRAND_HOVER,rowHeight:eI.CO.SHORT,text:_}):(0,n.jsx)(eP,{icon:f,id:t,onClickCallback:p,path:r,rowStyle:eI.yY.BRAND_HOVER,rowHeight:eI.CO.SHORT,text:_})})}let ta="faceted_search_preview_results--emptyState--zuAcX";function tn({id:e,path:t}){let r=(0,s.getFeatureFlags)().search_preview_results_livestore?ez.lN:ez.KU,a=(0,d.md)(x.jM),i=(0,d.md)(R.ih),o=(0,d.md)(x.CZ),c=(0,d.md)(R.Q),u=(0,A.Xr)(a),p=(0,d.md)(R.sC),f=(0,h._6)(),_=(0,y.X0)(f)?"desktop_new_tab":"file_browser",m=(0,O.y)(_,p,!0),b=r(),v=l.useMemo(()=>b.data?.searchPreviewOrder??[],[b.data?.searchPreviewOrder]),g=l.useMemo(()=>b.data?.searchResults??{},[b.data?.searchResults]),w=l.useMemo(()=>!b.status||"loading"===b.status||!(0,C.c2)(i,o),[b.status,i,o]),k=l.useMemo(()=>{if(!g)return!1;for(let e of v){let t=g[e]?.results;if(t&&t.length>0)return!1}return!0},[v,g]);return(0,S.GX)(c)?(0,n.jsx)("div",{className:ta,children:(0,E.tx)("search.error.max_query_length_exceeded")}):w?(0,n.jsx)(eb.e,{numRows:7}):k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ta,"data-testid":"facetedSearchNoResults",children:c?u?(0,n.jsxs)(n.Fragment,{children:[(0,A.hf)(u),"\xa0",(0,n.jsx)("span",{children:c})]}):(0,E.tx)("search.empty_state.no_file_project_team_or_people_results",{searchQuery:c}):(0,E.tx)("search.zero_state.empty_state")}),(0,n.jsx)(tr,{id:e,path:t,onSearch:m})]}):(0,n.jsx)(eh.Q0,{isDropdown:!0,children:(0,n.jsx)(eh.kq.Consumer,{children:r=>(0,n.jsxs)(n.Fragment,{children:[v.map((a,i)=>{let s=g[a]?.results;return s&&0!==s.length?(0,n.jsxs)(l.Fragment,{children:[v.length>1&&(0,n.jsx)("div",{className:"faceted_search_preview_results--header--sS4dy faceted_search_preview_recents--header--eCXyq",children:(0,A.q6)(a)}),s.map((a,l)=>{if(a.search_model_type===A.uH.FILES){let s=`${e}-file-${l}`;return(0,n.jsx)(eM,{fileResult:a,id:s,path:[...t,0,i,l],position:l,onContextMenuCallback:r.onContextMenuClick},s)}if(a.search_model_type===A.uH.PROJECTS){let s=`${e}-folder-${l}`;return(0,n.jsx)(eQ,{folderResult:a,id:s,path:[...t,0,i,l],position:l,onContextMenuCallback:r.onContextMenuClick},s)}if(a.search_model_type===A.uH.TEAMS){let s=`${e}-team-${l}`;return(0,n.jsx)(e0,{teamResult:a,id:s,path:[...t,0,i,l],position:l,onContextMenuCallback:r.onContextMenuClick},s)}if(a.search_model_type===A.uH.USERS){let s=`${e}-user-${l}`;return(0,n.jsx)(e8,{userResult:a,id:s,path:[...t,0,i,l],position:l,onContextMenuCallback:r.onContextMenuClick},s)}})]},i):null}),(0,n.jsx)(tr,{id:`${e}-see-all`,path:[...t,1],onSearch:m,showResultsForModelType:!0})]})})})}var tl=r(40647),ti=r(32186),ts=r(675108),to=r(595886),td=r(385451),tc=r(44811),tu=r(836848),tp=r(296219);let tf="faceted_search_preview_suggestion_row--pill--M8GIO",t_="faceted_search_preview_suggestion_row--row--5I2v9",tm="faceted_search_preview_suggestion_row--fauxFocus--LXfPz",th="faceted_search_preview_suggestion_row--hoveredPill--TbBLC",ty="faceted_search_preview_suggestion_row--helpText--Gq-VM",tx="faceted_search_preview_suggestion_row--container--I7wBO",tb="faceted_search_preview_suggestion_row--valueContainer--SczlK";function tv({type:e,value:t,onSelect:r,showHint:a}){let i=(0,d.md)(R.Q8),{activeValue:s}=l.useContext(W.M),o=(e=>{switch(e){case A.WY.RESOURCE:return(0,E.t)("search.facets.filter_by_resource");case A.WY.CREATOR:return(0,E.t)("search.facets.filter_by_creator");case A.WY.SPACE:return(0,E.t)("search.facets.filter_by_space");default:return(0,tu.xb)(e)}})(e),c=l.useId(),u=s===c;return(0,n.jsx)(tp.M.Option,{onSelect:r,value:c,id:c,children:(0,n.jsx)(ej.o,{eventListeners:["onPointerMove"],children:(0,n.jsxs)("div",{className:ea()(t_,u&&tm),"aria-current":u||void 0,children:[(0,n.jsxs)("div",{className:tx,children:[(0,n.jsx)("div",{className:ea()(tf,u&&th),children:(0,S.gl)(e)}),!!t&&(0,n.jsx)("div",{className:tb,children:(0,n.jsx)(eA.f,{text:t,query:i})})]}),a&&(0,n.jsx)("div",{className:ty,children:o})]})})})}function tg({type:e,value:t,onSelect:r,showHint:a,id:l,path:i}){let s=(0,d.md)(R.Q8),{setKeyboardNavigationElement:o,isFauxFocused:c}=(0,el.M3)({id:l,path:i}),u=(e=>{switch(e){case A.WY.RESOURCE:return(0,E.t)("search.facets.filter_by_resource");case A.WY.CREATOR:return(0,E.t)("search.facets.filter_by_creator");case A.WY.SPACE:return(0,E.t)("search.facets.filter_by_space");default:return""}})(e);return(0,n.jsxs)(et.E,{ref:o,className:ea()(t_,"faceted_search_preview_suggestion_row--rowDeprecated--FyjY-",c&&tm),"aria-label":u,"aria-current":c||void 0,onClick:r,children:[(0,n.jsxs)("div",{className:tx,children:[(0,n.jsx)("div",{className:ea()(tf,c&&th),children:(0,S.gl)(e)}),!!t&&(0,n.jsx)("div",{className:tb,children:(0,n.jsx)(eA.f,{text:t,query:s})})]}),a&&(0,n.jsx)("div",{className:ty,children:u})]})}function tw({id:e,path:t}){let r=(0,d.md)(x.zD),a=(0,d.md)(x.L8),o=(0,d.md)($),[c,u]=(0,d.fp)(R.Q8),p=(0,tc.iZ)(),f=G(a,r),m=function(){let e=(0,d.md)($),t=(0,d.md)(R.sC),r=(0,d.md)(R.BA),a=(0,d.md)(x.jM),n=(0,d.md)(x.J),i=(0,d.md)(x.P_),[s,o]=(0,d.fp)(R.R9),[c,u]=(0,d.fp)(R.Q8),p=(0,td.f)(),f=(0,to.n)(),m=(0,d.Xr)((0,x.l4)(e?.facetType??null)),h=(0,d.md)(_.hO.isFragmentSearchAtom),y=(0,O.L)(h?"fragment_search_modal":"file_browser",t,!0),b=l.useCallback(t=>{if(e)if("TYPE_AND_VALUES"===e.suggestionType){let l=e.facetType,s=null==t?e.facetValues[0]:e.facetValues[t],d=l===A.WY.RESOURCE?{type:A.WY.RESOURCE,value:s}:s,p=null;l===A.WY.RESOURCE?p=(0,S.jN)(s):l===A.WY.CREATOR?p=(0,S.C8)(s,S.M2.ADD_TO_GROUP,n):l===A.WY.SPACE&&(p=(0,S.q1)(s,S.M2.ADD_TO_GROUP,i)),m(p);let _=c.slice(0,e.facetTypeIndex);if(u(_),!p)return;let x=(0,S.gh)(p,a,n,i);o(x?.searchModelType??null),h||y(_,A.uH.FILES,x,r,!1,!1),f((0,S.oM)(d),c)}else{let t=c.split(" ").slice(0,-1).join(" "),l=t+(t?" ":"")+(0,S.gl)(e.facetType);u(l);let o=(0,S.nX)(a,n,i,s??void 0);h||y(l,A.uH.FILES,o,r,!1,!1),p(A.uR.AUTOCOMPLETE,e.facetType)}},[e,m,c,u,a,n,i,s,o,y,r,f,p,h]);return l.useMemo(()=>b,[b])}(),h=l.useCallback(e=>{m(e)},[m]),y=l.useCallback((e,t)=>{e.preventDefault(),m(t)},[m]),b=l.useCallback(e=>{let t=(0,S.gl)(e);u(c?c+" "+t:t)},[c,u]),v=l.useCallback((e,t)=>{e.preventDefault();let r=(0,S.gl)(t);u(c?c+" "+r:r)},[c,u]);return(!function(){let e,t,r,a=(0,d.md)($),[n,s]=(0,d.fp)(x.a3),[o,c]=(0,d.fp)(q),u=(0,d.md)(x.wf),p=(0,d.md)(z),f=p?.valueToQuery??"",_=(e=(0,i.d4)(e=>e.search.sessionId),t=(0,i.d4)(e=>e.search.queryId),r=(0,i.d4)(e=>e.search.parameters.query),a=>{let n={sessionId:e,queryId:t,query:r,facet_entrypoint:A.uR.AUTOCOMPLETE,facet_type:a};(0,ti.sx)("facet_type_shown",n)}),m=(0,tl.P)(),h=(0,ts.A)();l.useEffect(()=>{a&&(a.suggestionType===H.TYPE?_(a.facetType):f.length>0&&n!==u&&(s(u),m(f,a.facetType,A.uR.AUTOCOMPLETE))),!a&&o&&h(A.uR.AUTOCOMPLETE,o.facetType),c(a)},[a])}(),o)?o.suggestionType===H.TYPE?(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(tv,{type:o.facetType,value:null,onSelect:h,showHint:!0},o.facetType):(0,n.jsx)(tg,{type:o.facetType,value:null,onSelect:y,showHint:!0,id:`${e}-facet-type`,path:t}):(0,n.jsx)(n.Fragment,{children:o.facetValues.map((r,a)=>{let l,i=((e,t,r)=>{if(t===A.WY.RESOURCE){let t=(0,S.jN)(e);return t?(0,S.yA)(t):""}return t===A.WY.CREATOR||t===A.WY.SPACE?(0,S.FR)(e,r):""})(r,o.facetType,p?.id),d=o.facetType;switch(d){case A.WY.RESOURCE:l=`${d}-${r}`;break;case A.WY.CREATOR:case A.WY.SPACE:l=`${d}-${r.value.id}`;break;default:l=`${d}-${i}`}return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(tv,{type:d,value:i,onSelect:()=>h(a),showHint:!1},l):(0,n.jsx)(tg,{type:o.facetType,value:i,onSelect:e=>y(e,a),showHint:!1,id:`${e}-facet-type`,path:[...t,a]},a)})}):c||a.length>0?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:f.map((r,a)=>(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(tv,{type:r,value:null,onSelect:()=>b(r),showHint:!0},`${r}`):(0,n.jsx)(tg,{type:r,value:null,onSelect:e=>v(e,r),showHint:!0,id:`${e}-${a}`,path:[...t,a]},`suggestion-row-${a}`))})}var tE=r(526865);let tk=(0,en.jz)(tE.RAo),tT=(0,en.jz)(tE.aIx),tF=(0,en.jz)(tE.cU5),tC=(0,en.jz)(tE.Fcu),tI=(0,eu.Ju)(function(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.modalShown),r=(0,i.d4)(e=>e.search.sessionId),a=(0,d.md)(R.Q),s=(0,d.md)(x.L8);l.useEffect(()=>()=>{r&&ed.vj.Session.searchModalExit(r)},[r]);let c=l.useCallback(()=>{e(p.ky())},[e]),[u,f]=l.useState(t?.data.topOffset);if((0,o.h)(()=>{if(t?.data.relativePositionRef&&t?.data.resizableObservedRef){let e=new ResizeObserver(()=>{f(t?.data.relativePositionRef.current.getBoundingClientRect().top-tk)});return e.observe(t?.data.resizableObservedRef.current,{box:"border-box"}),()=>e.disconnect()}}),!t)return null;let _=t.data.width??tT,m=t.data.hideFacetFilters??!1,h=t.data.leftOffset,y=t.data.bottomPadding;return(0,n.jsx)(ep.d_,{absolutePosition:{top:u,left:h},"data-testid":"facetedSearchModal",maxHeight:y?`calc(100vh - ${u}px - ${y}px)`:"90vh",minHeight:tC+2*tk,onHide:c,padding:`0 0 ${tk}px 0`,popStack:!0,size:"any",tintedModalBackground:!1,useModalViewScroll:!1,width:`calc(min(${_}px, calc(100vw - 2 * ${tk}px))`,children:(0,n.jsx)(el.dP,{children:(0,n.jsxs)(eI.a3.Provider,{value:eI.Vm.PREVIEW,children:[(0,n.jsx)("div",{style:{margin:tk,width:_-2*tk,maxWidth:`calc(100vw - 4 * ${tk}px)`},children:(0,n.jsx)(eo,{hideSearchPreview:t.data.hideSearchPreview})}),(0,n.jsxs)(ec.P,{maxHeight:y?`calc(100vh - ${u}px - ${y}px - ${tF}px - ${tk}px)`:`calc(80vh - 2 * ${tF}px)`,children:[!m&&(0,n.jsx)(tw,{id:"suggestions",path:[4]}),t.data.hideSearchPreview?null:a||s.length>0?(0,n.jsx)(tn,{id:"search-results",path:[5]}):(0,n.jsx)(eY,{id:"recents",path:[5]})]})]})})})},P.R);var tS=r(343696),tj=r(92589),tR=r(930501),tA=r(38068),tO=r(867206),tN=r(148865);function tP(){let e=(0,i.wA)(),t=(0,tS.UP)();return l.useCallback(async()=>{let r=await (0,tj.Q)((0,tA.mZ)(!0)),a=await (0,tj.Q)((0,tA.Ji)(!0)),n=(0,tO.zQ)(r),l=(0,tO.A8)(a,tR.Xn.MEMBER);e(m.Ns({searchScope:(0,tN.l_)(t,n,l)}))},[e,t])}let tL=(0,en.jz)(tE.RAo);function tM({hideSearchPreview:e,modalPositionRef:t}){let r=(0,i.wA)(),a=(0,i.d4)(e=>e.modalShown),s=(0,h._6)(),c=(0,y.X0)(s),u=tP(),[p,f]=(0,d.fp)(R.Q8),b=(0,d.md)(x.L8),v=l.useRef(null),w=(0,d.Xr)(x.q4),k=l.useCallback(()=>{let n,l,i;if(!v.current||a?.type===P.R)return;let s=v.current.getBoundingClientRect(),o=s.top-tL,d=s.left-tL,u=(0,en.jz)(tE.aIx),p=!1;c&&(d=void 0,u=(0,en.jz)(tE.xc),p=!0,n=(0,en.jz)(tE.akG),l=t,i=v),r(es.to({type:tI,data:{topOffset:o,leftOffset:d,hideSearchPreview:e,width:u,hideFacetFilters:p,resizableObservedRef:l,relativePositionRef:i,bottomPadding:n},showModalsBeneath:!0}))},[a?.type,c,r,e,t]);(0,o.h)(()=>{u()}),l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!a&&k()},t=e=>{"Tab"===e.key&&a?.type===P.R&&r(es.AS())};return document.addEventListener("keydown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keydown",t)}},[r,a,k]);let T=(0,d.md)(_.hO.isFragmentSearchAtom);if(l.useEffect(()=>{T||"search"===s.view||(r(m._z({})),f(""),w())},[r,s,f,w,T]),l.useEffect(()=>{if(c){let e=()=>{"visible"===document.visibilityState&&(r(m._z({})),f(""),w())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}},[w,r,c,f]),"search"===s.view)return(0,n.jsx)("div",{className:"faceted_search_entrypoint_deprecated--fullResultsSearchWrapper--TN-d9",children:(0,n.jsx)(el.dP,{children:(0,n.jsx)(eo,{})})});let F=!c;return(0,n.jsxs)(et.E,{className:ea()("faceted_search_entrypoint_deprecated--inputWrapper--V197A search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",{"faceted_search_entrypoint_deprecated--isDesktopNewTabSearch--019Zm":c}),onClick:k,onFocus:k,"data-testid":"facetedSearchEntrypoint",ref:v,"aria-label":(0,E.t)("search.search_bar.placeholder_v2"),children:[(0,n.jsx)(g.W,{className:"faceted_search_entrypoint_deprecated--iconWrapper--ZC-MA"}),(0,n.jsxs)("div",{className:"faceted_search_entrypoint_deprecated--contentContainer--5abd1",children:[F&&(0,n.jsx)(M,{}),(0,n.jsx)(ei.i,{className:"faceted_search_entrypoint_deprecated--input--nUU8P faceted_search_bar_deprecated--input--OUQ1l",placeholder:0===b.length?(0,E.t)("search.search_bar.placeholder_v2"):"",value:p})]}),!e&&(0,n.jsx)("div",{className:"faceted_search_entrypoint_deprecated--leftFadeContainer--4t-7q faceted_search_bar_deprecated--leftFadeContainer--IcGj- faceted_search_bar_deprecated--_fadeContainer--JLh32"})]})}function tD({maxHeight:e,modalHideFacetFilters:t,modalHiddenStyles:r,modalExpandedStyles:a,expanded:s,expandModal:o,collapseModal:u}){let p=(0,i.d4)(e=>e.search.sessionId),f=(0,d.md)(R.Q),_=(0,d.md)(x.L8);l.useEffect(()=>()=>{p&&ed.vj.Session.searchModalExit(p)},[p]);let m=l.useRef(null),[h,y]=l.useState(void 0),b=tp.M.useAutocomplete({activeValue:h,onActiveValueChange:y,expanded:s,expandOnFocus:!1});return(0,n.jsx)("div",{"data-testid":"facetedSearchModal",...c.xk(s?tB.facetedSearchModalExpanded:tB.facetedSearchModalHidden,s?a:r),ref:m,children:(0,n.jsx)(eI.a3.Provider,{value:eI.Vm.PREVIEW,children:(0,n.jsxs)(W.M.Provider,{value:{activeValue:h,setActiveValue:y},children:[(0,n.jsx)("div",{...{className:"x1e56ztr xet2fuk x1db2dqx"},children:(0,n.jsx)(ee,{expanded:s,expandModal:o,collapseModal:u,hideSearchPreview:!s,autocomplete:b,searchInputRef:b.refs.input})}),s&&(0,n.jsxs)(tp.M.List,{...b.getListProps({maxHeight:e}),"data-testid":"facetedSearchPreviewList",children:[!t&&(0,n.jsx)(tw,{id:"suggestions",path:[4]}),s?f||_.length>0?(0,n.jsx)(tn,{id:"search-results",path:[5]}):(0,n.jsx)(eY,{id:"recents",path:[5]}):null]})]})})})}let tB={facetedSearchModalExpanded:{kVAEAm:"x10l6tqk",k87sOh:"x1v4kod4",kY2c9j:"x1h5zca0",kaIpWk:"x1mxnbhz",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kGVxlE:"x1wu5q8a",kWkggS:"x1yjdb4r",kLKAdn:"x1y1aw1k",ks0D6T:"x87tlaw",kGO01o:"xwib8y2",$$css:!0},facetedSearchModalHidden:{kVAEAm:"x1n2onr6",ks0D6T:"x87tlaw",$$css:!0}},tW={kbCHJM:"x2akjr6",kLqNvP:null,kt4wiu:null,kzqmXN:"xzx2ped",$$css:!0},tU={kzqmXN:"xf14fn5",$$css:!0},tH={kzqmXN:"x1j0aogd",$$css:!0};function tK(){let e=(0,i.wA)(),t=(0,h._6)(),r=(0,y.X0)(t),a=tP(),s=(0,d.Xr)(R.Q8),c=l.useRef(null),b=(0,d.Xr)(x.q4),[v,g]=l.useState(!1),w=l.useCallback(()=>{v&&(e(p.ky()),g(!1))},[v,e,g]),E=(0,d.md)(_.hO.isFragmentSearchAtom),k=l.useCallback(()=>{if(!v){g(!0);let t=E?"fragment_search_modal":r?"desktop_new_tab":"file_browser";e(m.W0({entryPoint:t}))}},[v,g,e,E,r]);(0,o.h)(()=>{a()});let T=l.useCallback(()=>{let e=`calc(80vh - 2 * ${f.ID.previewRowHeight})`;if(r){let t=f.ID.bottomPaddingDesktopNewTab;if(c.current){let r=c.current.getBoundingClientRect(),a=`${r.top}px`;e=`calc(100vh - ${a} - ${t} - ${f.ID.previewRowHeight})`}return{maxHeight:e,modalHideFacetFilters:!0,modalBottomPadding:t,modalHiddenStyles:tW,modalExpandedStyles:tW}}return{maxHeight:e,modalHideFacetFilters:!1,modalHiddenStyles:tH,modalExpandedStyles:tU}},[c,r]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!v&&(c.current?.focus(),k())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[k,c,v]),l.useEffect(()=>{E||"search"===t.view||(e(m._z({})),s(""),b())},[e,t,s,b,E]),l.useEffect(()=>{if(r){let t=()=>{"visible"===document.visibilityState&&(e(m._z({})),s(""),b(),w(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)}},[b,e,r,s,w]);let F=l.useRef(null);return"search"===t.view?(v&&g(!1),(0,n.jsx)("div",{...{className:"x1661ufe xdj266r"},children:(0,n.jsx)(ee,{searchInputRef:F})})):(0,n.jsxs)("div",{ref:c,...{0:{className:"x1n2onr6 xzo6umx"},1:{className:"x1n2onr6 xqd9ieg"}}[0|!!r],"data-testid":"facetedSearchEntrypoint",children:[v&&(0,n.jsx)(u.X9,{closeDropdown:w}),(0,n.jsx)(tD,{...T(),expanded:v,expandModal:k,collapseModal:w})]})}function tY({hideSearchPreview:e,modalPositionRef:t}){return(0,s.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,n.jsx)(tK,{}):(0,n.jsx)(tM,{hideSearchPreview:e,modalPositionRef:t})}},643651(e,t,r){r.d(t,{GT:()=>_,aL:()=>x,db:()=>h,hA:()=>y});var a=r(105652),n=r(645186);if(1464==r.j)var l=r(722395);var i=r(852059),s=r(889953),o=r(425921),d=r(841312),c=r(981517),u=r(44811),p=r(860563);function f(e,t,r,a,n,l,o){let d=(0,s.mv)(e);new i.vj.Analytics(n,{position:t,resource_id:d,resource_type:e.search_model_type.toString(),matched_queries:e.matched_queries,result:e},{plan:o}).click(e.search_model_type,l,{action:a,target:r})}function _(e,t,r){let i=(0,n.wA)(),s=(0,n.d4)(e=>e.search),d=(0,c._6)(),u=(0,n.d4)(e=>(0,l.S)(e));return a.useCallback(a=>{i(o.ky()),r&&f(r,t,e,a,s,d,u)},[i,e,t,r,s,d,u])}function m(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.search),r=(0,c._6)(),i=(0,n.d4)(e=>(0,l.S)(e));return a.useCallback((a,n,l,s)=>{e(o.ky()),f(s,a,n,l,t,r,i)},[e,t,r,i])}function h(){let e=(0,u.iZ)(),t=(0,d.dq)(),r=(0,p.ol)()?.id,n=(0,c._6)(),l=m();return a.useCallback((a,i,o)=>{if(!o)return;let d=o.model;l(a,(0,s.AR)(d,e,t,r,n),i,o)},[e,t,r,n,l])}function y(){let e=m();return a.useCallback((t,r,a)=>{if(!a)return;let n=a.model;e(t,(0,s.uF)(n),r,a)},[e])}function x(){let e=m();return a.useCallback((t,r,a)=>{if(!a)return;let n=a.model;e(t,(0,s.Xx)(n),r,a)},[e])}},114540(e,t,r){r.d(t,{G:()=>c,R:()=>o});var a=r(239976),n=r(105652),l=r(645186);if(1464==r.j)var i=r(722395);var s=r(852059);let o="search_file_browser_full_results",d=e=>"href"in e?e.href:null;function c({category:e,searchResult:t,index:r,children:o,planFilter:c}){let u=(0,l.d4)(e=>e.search),p=(0,l.d4)(e=>e.selectedView),f=(0,l.d4)(i.S),_=(0,n.useMemo)(()=>({position:r,resource_id:"id"in t.model?t.model.id:t.model.key,resource_type:t.search_model_type,matched_queries:t.matched_queries,result:t}),[t,r]),m=(0,n.useMemo)(()=>new s.vj.Analytics(u,_,{plan:f}),[]);(0,n.useEffect)(()=>{m.update(u,_,{plan:f})},[m,u,_,f]);let h=(0,n.useCallback)(t=>{let r=t.target,a=r.closest("[data-search-click-action]")?.getAttribute("data-search-click-action");a!==s.jr&&m.click(e,p,{action:a||"click",target:d(r)},c)},[m,e,p,c]),y=(0,n.useCallback)(t=>{let r=t.target,a=r.closest("[data-search-context-menu-action]")?.getAttribute("data-search-context-menu-action");a!==s.jr&&m.click(e,p,{action:a||"context-click",target:d(r)})},[m,e,p]);return(0,a.jsx)("div",{"data-search-context-menu-action":"context-click","data-search-click-action":"click",onClickCapture:h,onContextMenuCapture:y,children:o})}},257903(e,t,r){r.d(t,{kq:()=>eE,Q0:()=>ek,ro:()=>ew});var a,n,l,i,s,o,d,c,u,p,f,_,m,h,y,x,b,v=r(239976),g=r(836848),w=r(86118),E=r(105652),k=r(645186),T=r(878725),F=r(774841),C=r(170198),I=r(293666),S=r(114540),j=r(867760);function R(e){return t=>{let r,a;return r=e.map(e=>e(t.data)).filter(e=>null!==e),a={...t.targetRect,position:"fixed"},(0,v.jsx)(j.ms,{style:a,children:r.map((e,t)=>null===e?null:"SEPARATOR"===e?t===r.length-1?null:(0,v.jsx)(j.wv,{},`sep${t}`):(0,v.jsx)(j.c$,{id:e.id,onClick:e.onClick,disabled:e.disabled,onMouseDown:e=>e.preventDefault(),children:e.text},e.id))})}}var A=r(417675),O=r(341299),N=r(935745),P=r(370152),L=r(892480),M=r(295549),D=r(981040),B=r(424823),W=r(959371),U=r(927048),H=r(969360),K=r(32186),Y=r(925778),z=r(860736),V=r(941948),$=r(911893),q=r(950054);(e=>{var t;e.Separator=()=>"SEPARATOR";let r=(e,t)=>r=>{let a=e(r);return a?t(a):null};function a(e){let t=(0,k.wA)(),{Sprig:r}=(0,z.A)();if(!e)return null;let{overrides:a,...n}=e;return{id:"open_view",text:(0,A.t)("general.open"),onClick:()=>{let e=(0,Y.Xr)();"fullscreen"===n.view&&n.fileKey&&e&&((0,K.sx)("Open File Click",{fileKey:n.fileKey,uiSelectedView:JSON.stringify(e.view)}),(0,$.k1)(n.fileKey,{selectedViewName:e.view,sprig:r})),t(F.sf(n))},...a}}let n=e=>{let t=(0,k.wA)(),{overrides:r,...a}=e;return{id:"copy_link",text:(0,A.t)("file_browser.copy_link"),onClick:()=>t(O.S(a)),...r}};function l(e){let t=(0,k.wA)();if(!e)return null;let{overrides:r,...a}=e;return{id:"copy_view_link",text:(0,A.t)("file_browser.copy_link"),onClick:()=>t(O.le(a)),...r}}let i=e=>{let t=(0,k.wA)(),{overrides:r,...a}=e;return{id:"open_in_new_tab",text:(0,A.t)("file_browser.open_in_new_tab"),onClick:()=>t(V.V3(a)),...r}};function s(e){let t=(0,k.wA)(),r=(0,k.Pj)();if(!e)return null;let{overrides:a,...n}=e;return{id:"open_view_in_new_tab",text:(0,A.t)("file_browser.open_in_new_tab"),onClick:()=>{let e=(0,Y.Xr)();"fullscreen"===n.view&&n.fileKey&&e&&((0,K.sx)("Open File in New Tab Click",{fileKey:n.fileKey,uiSelectedView:JSON.stringify(e.view)}),t(V.UN({fileKey:n.fileKey})));let a=(0,q.xS)(r.getState(),n);t(V.V3({url:a}))},...a}}(t=e.Creators||(e.Creators={})).Open=e=>r(e,a),t.CopyLink=e=>r(e,n),t.CopyViewLink=e=>r(e,l),t.OpenInNewTab=e=>r(e,i),t.OpenViewInNewTab=e=>r(e,s)})(u||(u={}));let G=e=>({view:"fullscreen",fileKey:e.key,editorType:(0,M.wN)(e.editorType||"design")});(a=p||(p={})).Open=u.Creators.Open(G),a.OpenInNewTab=u.Creators.OpenViewInNewTab(G),a.CopyLink=function(e){let t=(0,k.wA)(),r=(0,k.d4)(e=>e.sharingAttributionContextKey);return{id:"copy_view_link",text:(0,A.t)("file_browser.copy_link"),onClick:()=>{let a=new U.a;t(O.TH({selector:a,selectedView:G(e),data:{sharingAttributionContextKey:r,resources:{file:C.F.toSinatra(e),repo:e.fileRepo}}}))}}},a.Share=e=>{let t=(0,k.wA)();return{id:"share_file",text:"Share",onClick:()=>{t((0,L.to)({type:H.g_,data:{fileKey:e.key,source:D.nk.fileBrowserContextMenu}}))}}},a.ShowInFolder=function(e){let t=(0,k.wA)(),{folderId:r}=e;return r?{id:"show_in_folder",text:"Show in project",onClick:()=>{t(F.sf({view:"folder",folderId:r})),t(P.y$({type:W.F.FILES,tiles:[(0,B.fA)(C.F.toSinatra(e))]}))}}:null},a.SetFavoriteStatus=e=>{let t=(0,k.wA)();return e.isFavorited?{id:"set_favorite_status",text:e.isFavorited?(0,A.t)("tile.favoriting.remove_from_favorites"):(0,A.t)("tile.favoriting.add_to_favorites"),onClick:()=>{e.isFavorited?t(N.qP({file:{editorType:e.editorType,key:e.key},entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})):t(N.Fb({file:e,entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})),t(F.oB())}}:null};var Q=r(272197);let X=e=>function(t){return e&&w.eD?null:{view:"folder",folderId:t.id}};(n=f||(f={})).CopyLink=u.Creators.CopyViewLink(X(!1)),n.Open=u.Creators.Open(X(!1)),n.OpenInNewTab=u.Creators.OpenViewInNewTab(X(!0)),n.ShowInTeam=e=>{let t=(0,k.wA)(),{team_id:r}=e;return r?{id:"show_in_team",text:"Show team",onClick:()=>{t(F.sf({view:"team",teamId:r}))}}:null},n.Share=e=>{let t=(0,k.wA)();return{id:"share_folder",text:"Share",onClick:()=>{t(L.to({type:Q.WY,data:{folderId:e.id}}))}}};var J=r(4257),Z=r(165117),ee=r(44811);let et=e=>({view:"communityHub",subView:"hubFile",hubFileId:e.id});(l=_||(_={})).Open=u.Creators.Open(et),l.OpenInNewTab=u.Creators.OpenViewInNewTab(et),l.CopyLink=u.Creators.CopyViewLink(et),l.Duplicate=e=>{let t=(0,k.wA)(),r=(0,ee.iZ)();return{id:"duplicate_hub_file",text:"Duplicate",onClick:()=>{r?t((0,Z.p7)({hubFileId:e.id,workspace:{userId:r.id,orgId:null}})):t(J.F.enqueue({message:"Must be signed in to duplicate a file",error:!0}))}}};let er=e=>function(t){return e&&w.eD?null:{view:"communityHub",subView:"plugin",publishedPluginId:t.id}};(i=m||(m={})).Open=u.Creators.Open(er(!1)),i.OpenInNewTab=u.Creators.OpenViewInNewTab(er(!0)),i.CopyLink=u.Creators.CopyViewLink(er(!1));let ea=e=>({view:"communityHub",subView:"handle",handle:e.profile_handle});(s=h||(h={})).Open=u.Creators.Open(ea),s.OpenInNewTab=u.Creators.OpenViewInNewTab(ea),s.CopyLink=u.Creators.CopyViewLink(ea);var en=r(296039),el=r(306874),ei=r(302007);let es=e=>{let t=(0,en.bc)(el.yQw,{teamId:e.id}).transform(({team:e})=>!e?.canRead).unwrapOr(!1);return{view:"team",teamId:e.id,overrides:{disabled:!!t}}};(o=y||(y={})).Open=u.Creators.Open(es),o.OpenInNewTab=u.Creators.OpenViewInNewTab(function(e){return w.eD?null:es(e)}),o.CopyLink=u.Creators.CopyViewLink(es),o.Leave=e=>{let t=(0,k.wA)(),r=(0,k.d4)(e=>e.user),a=(0,k.d4)(t=>t.roles?.byTeamId[e.id]);return r&&a&&a[r.id]?{id:"leave_team_prompt",text:"Leave team",onClick:()=>{t((0,L.to)({type:ei.p,data:{teamId:e.id}}))}}:null};var eo=r(391283);let ed=e=>function(t){return e&&w.eD?null:{view:"user",userId:t.id,orgId:t.org_id,userViewTab:eo.o.INTERNAL_PROFILE}};(d=x||(x={})).Open=u.Creators.Open(ed(!1)),d.OpenInNewTab=u.Creators.OpenViewInNewTab(ed(!0)),d.CopyLink=u.Creators.CopyViewLink(ed(!1));let ec=e=>function(t){return e&&w.eD?null:{view:"communityHub",subView:"widget",widgetId:t.id}};(c=b||(b={})).Open=u.Creators.Open(ec(!1)),c.OpenInNewTab=u.Creators.OpenViewInNewTab(ec(!0)),c.CopyLink=u.Creators.CopyViewLink(ec(!1));let eu=R([m.Open,m.OpenInNewTab,u.Separator,m.CopyLink]),ep=R([_.Open,_.OpenInNewTab,u.Separator,_.CopyLink,_.Duplicate]),ef=R([_.Open,u.Separator,_.CopyLink,_.Duplicate]),e_=R([x.Open,x.OpenInNewTab,u.Separator,x.CopyLink]),em=R([h.Open,h.OpenInNewTab,u.Separator,h.CopyLink]),eh=R([y.Open,y.OpenInNewTab,u.Separator,y.Leave]),ey=R([b.Open,b.OpenInNewTab,u.Separator,b.CopyLink]);function ex(e){let t,{data:r,canAccessFileResultFolder:a}=e.selected,n=(t=e.isDropdown,R([p.Open].concat([p.OpenInNewTab],[u.Separator],[p.CopyLink],t?[]:[p.Share],a?[p.ShowInFolder]:[],[p.SetFavoriteStatus])));if(!("search_model_type"in r))return(0,v.jsx)(n,{targetRect:e.targetRect,data:C.F.toLiveGraph(r)});switch(r.search_model_type){case I.uH.HUB_FILES:if(w.eD)return(0,v.jsx)(ef,{targetRect:e.targetRect,data:r.model});return(0,v.jsx)(ep,{targetRect:e.targetRect,data:r.model});case I.uH.PUBLIC_PLUGINS:return(0,v.jsx)(eu,{targetRect:e.targetRect,data:r.model});case I.uH.PUBLIC_PROFILES:return(0,v.jsx)(em,{targetRect:e.targetRect,data:r.model});case I.uH.USERS:return(0,v.jsx)(e_,{targetRect:e.targetRect,data:r.model});case I.uH.FILES:return(0,v.jsx)(n,{targetRect:e.targetRect,data:C.F.toLiveGraph(r.model)});case I.uH.TEAMS:return(0,v.jsx)(eh,{targetRect:e.targetRect,data:r.model});case I.uH.PROJECTS:let l,i=(l=e.isDropdown,R([f.Open].concat([f.OpenInNewTab],[u.Separator],l?[]:[f.Share],[f.ShowInTeam])));return(0,v.jsx)(i,{targetRect:e.targetRect,data:r.model});case I.uH.PRIVATE_PLUGINS:return(0,v.jsx)(eu,{targetRect:e.targetRect,data:r.model});case I.uH.PUBLIC_WIDGETS:case I.uH.PRIVATE_WIDGETS:return(0,v.jsx)(ey,{targetRect:e.targetRect,data:r.model});default:return(0,g.xb)(r)}}let{Context:eb,Provider:ev}=function(e,t){let r=E.createContext({onContextMenuClick:(e,t)=>{}});function a(r){let a=(0,k.d4)(e=>e.dropdownShown);return a&&a.data&&a.type===e?t(r,{...a.data}):null}let n=class extends E.PureComponent{constructor(){super(...arguments),this.onContextMenuClick=(t,r)=>{r.stopPropagation(),r.preventDefault();let a=window.innerWidth,n=window.innerHeight,l={};l={left:r.clientX<a/2?r.clientX:"auto",right:r.clientX<a/2?"auto":a-r.clientX,top:r.clientY<n/2?r.clientY:"auto",bottom:r.clientY<n/2?"auto":n-r.clientY},this.props.onContextClick&&this.props.onContextClick(t,r),this.props.dispatch(F.j7({type:e,data:{selected:t,targetRect:l,modifiers:(0,T.sN)(r)}}))}}render(){let e={onContextMenuClick:this.onContextMenuClick};return(0,v.jsx)(r.Provider,{value:e,children:this.props.children})}};return{Context:r,Provider:e=>{let t=(0,k.wA)(),r=(0,k.d4)(e=>e.dropdownShown);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n,{dispatch:t,dropdownShown:r,...e}),(0,v.jsx)(a,{...e,children:void 0})]})}}}("search-results-context-menu",(e,t)=>{let{data:r,index:a}=t.selected;return"search_model_type"in r?(0,v.jsx)(S.G,{category:r.search_model_type,searchResult:r,index:a,children:(0,v.jsx)(ex,{isDropdown:e.isDropdown,...t})}):(0,v.jsx)(ex,{isDropdown:e.isDropdown,...t})});function eg(e){return(0,v.jsx)("div",{onContextMenu:t=>{let r={index:e.index,data:e.data};e.onContextMenu(r,t)},children:e.children})}function ew(e){return(0,v.jsx)(eb.Consumer,{children:t=>(0,v.jsx)(eg,{onContextMenu:t.onContextMenuClick,...e})})}let eE=eb,ek=ev},774197(e,t,r){r.d(t,{R:()=>a});let a="FACETED_SEARCH_MODAL_DEPRECATED_TYPE"},795(e,t,r){if(r.d(t,{C:()=>s}),1464==r.j)var a=r(836848);var n=r(536248),l=r(424823);if(1464==r.j)var i=r(930501);function s(e){let t=(0,n.NN)();switch(e.type){case l.nb.FILE:return t(e.file);case l.nb.PINNED_FILE:case l.nb.OFFLINE_FILE:if(e.file.editorType===i._Y.WHITEBOARD)return n.y1.WHITEBOARD;if(e.file.editorType===i._Y.SLIDES)return n.y1.SLIDES;if(e.file.editorType===i._Y.SITES)return n.y1.SITES;if(e.file.editorType===i._Y.COOPER)return n.y1.COOPER;if(e.file.editorType===i._Y.FIGMAKE)return n.y1.FIGMAKE;if(e.file.editorType===i._Y.DESIGN||null===e.file.editorType)return n.y1.DESIGN;(0,a.xb)(e.file.editorType);case l.nb.PROTOTYPE:return n.y1.PROTOTYPE;case l.nb.REPO:return n.y1.REPO;default:(0,a.xb)(e)}}},30631(e,t,r){r.d(t,{EB:()=>c,WJ:()=>p,ym:()=>u});var a=r(105652),n=r(645186),l=r(925778),i=r(878725);if(1464==r.j)var s=r(941948);var o=r(774841),d=r(950054);function c(){let e=u(),t=p();return a.useCallback(async(r,a)=>{(a?.preventDefault(),a&&((0,i.oJ)(a)||1===a.button))?t(r):await e(r)},[e,t])}function u(){let e=(0,n.wA)();return a.useCallback(async t=>{e(o.oB()),await e(s.gN(t))},[e])}function p(){let e=(0,n.wA)(),t=(0,n.Pj)();return a.useCallback(r=>{e(o.oB());let a=s.gN(r),n=t.getState(),i=(0,d.xS)(n,a.payload);l.Ay.redirect(i,"_blank")},[e,t])}},134489(e,t,r){r.d(t,{v:()=>T});var a=r(105652),n=r(645186);if(1464==r.j)var l=r(836848);var i=r(917262),s=r(86118),o=r(925778),d=r(878725),c=r(774841),u=r(71164),p=r(858942),f=r(295549),_=r(209855),m=r(644722),h=r(424823),y=r(841312),x=r(981517),b=r(44811),v=r(967041),g=r(860563);if(1464==r.j)var w=r(727580);var E=r(597211);if(1464==r.j)var k=r(294377);function T(){let e=(0,b.iZ)(),t=(0,y.dq)(),r=(0,g.cD)(),l=(0,x._6)(),i=(0,n.wA)(),o=(0,n.d4)(e=>e.selectedBranchKeyByRepoId);return a.useCallback(async(a,n)=>{i(c.oB());let u=n&&1===n.button,p=n&&((0,d.Fo)(n)||u),f=null;if(p&&n?.shiftKey?f=s.aw.FOCAL_TAB:p?f=s.aw.BACKGROUND_TAB:n?.shiftKey&&(f=s.aw.NEW_WINDOW),s.eD){F({tile:a,selectedBranchKeyByRepoId:o,dispatch:i,user:e,target:f}),n?.preventDefault();return}return null!=f&&n?void C({tile:a,e:n,selectedBranchKeyByRepoId:o,target:f,dispatch:i}):(n?.preventDefault(),void await I({tile:a,selectedBranchKeyByRepoId:o,dispatch:i,user:e,selectedView:l,currentUserOrgId:t,currentTeamId:r}))},[o,i,e,t,r,l])}let F=({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,user:a,target:n})=>{if(!s.eD)return void(0,l.KF)(!0,"Should not be calling openGenericTileDesktop if not in the desktop app");n=n??s.aw.FOCAL_TAB;let i=h.Tf.getIsTeamTemplate(e),o=h.Tf.getName(e),d=h.Tf.getEditorType(e);switch(e.type){case h.nb.FILE:s.eD.openFile({fileKey:e.file.key,title:e.file.name,fileEditorType:e.file.editorType,target:n,isBranch:(0,_.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:i,userId:a?.id});break;case h.nb.PINNED_FILE:s.eD.openFile({fileKey:e.file.key,title:o,fileEditorType:d,isTeamTemplate:i,target:n,userId:a?.id});break;case h.nb.PROTOTYPE:s.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",n,a?.id);break;case h.nb.REPO:let c=(0,_.mr)(e.repo,e.branches,t);c&&s.eD.openFile({fileKey:c.key,title:c.name,fileEditorType:c.editor_type,target:n,isBranch:(0,_.Xm)(c),isLibrary:!!c.last_published_at,userId:a?.id});break;case h.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:E.ai.NEW_TAB,source:w.U.OFFLINE_FILE_TILE}));break;default:(0,l.xb)(e)}},C=({tile:e,e:t,selectedBranchKeyByRepoId:r,dispatch:a})=>{e.type===h.nb.OFFLINE_FILE&&a(u.NA({file:e.file,openNewFileIn:E.ai.NEW_TAB,source:w.U.OFFLINE_FILE_TILE}));let n=h.Tf.getEditUrl(e,r);o.Ay.redirect(n,"_blank"),t.preventDefault()},I=async({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,currentUserOrgId:a,selectedView:n,currentTeamId:s,user:o})=>{let d="recentsAndSharing"===n.view||"folder"===n.view?n:void 0;r(p.c5({planId:a||s,planType:a?k.O.ORG:k.O.TEAM}));let y={user:o,teamId:s,orgId:a,selectedView:n};switch(e.type){case h.nb.FILE:i.N7(a,e.file.parentOrgId,s,e.file.teamId)?i.QV({file:{key:e.file.key,editorType:e.file.editorType||void 0}},y):r(c.sf({view:"fullscreen",fileKey:e.file.key,editorType:m.z4.getIsExtension()?f.nT.DevHandoff:e.file.editorType?(0,f.wN)(e.file.editorType):f.nT.Design,prevSelectedView:d}));break;case h.nb.PINNED_FILE:let x=await v.M4.fetchFile(e.file.key);i.N7(a,x.parent_org_id,s,x.team_id)?i.QV({file:{key:e.file.key,editorType:e.file.editorType}},y):r(c.sf({view:"fullscreen",fileKey:e.file.key,editorType:(0,f.wN)(e.file.editorType),prevSelectedView:d}));break;case h.nb.PROTOTYPE:let b=e.prototype.fig_file;i.N7(a,b.parent_org_id,s,b.team_id)?i.QV({base:"proto",file:{key:b.key,editorType:b.editor_type||void 0},nodeId:e.prototype.page_id},y):r(c.sf({view:"prototype",file:b,nodeId:e.prototype.page_id,prevSelectedView:d}));break;case h.nb.REPO:let g=(0,_.mr)(e.repo,e.branches,t);if(!g)return;i.N7(a,g.parent_org_id,s,g.team_id)?i.QV({file:{key:g.key}},y):r(c.sf({view:"fullscreen",fileKey:g.key,editorType:f.nT.Design,prevSelectedView:d}));break;case h.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:E.ai.SAME_TAB,source:w.U.OFFLINE_FILE_TILE}));break;default:(0,l.xb)(e)}}},438168(e,t,r){r.d(t,{TS:()=>p,Vj:()=>f,lo:()=>u});var a=r(105652),n=r(645186),l=r(925778),i=r(878725);if(1464==r.j)var s=r(941948);var o=r(774841),d=r(841312),c=r(740418);function u(){let e=p(),t=f();return a.useCallback((r,a)=>{a&&((0,i.oJ)(a)||1===a.button)?t(r.id):(a?.preventDefault(),e(r.id))},[t,e])}function p(){let e=(0,n.wA)();return a.useCallback(t=>{e(s.kg({clickedResourceType:"team",resourceIdOrKey:t})),e(o.sf({view:"team",teamId:t}))},[e])}function f(){let e=(0,d.dq)();return a.useCallback(t=>{let r=(0,c.bL)(t,e);l.Ay.redirect(r,"_blank")},[e])}},102890(e,t,r){r.d(t,{y:()=>p});var a=r(105652),n=r(645186),l=r(925778),i=r(878725);if(1464==r.j)var s=r(39366);var o=r(774841),d=r(841312),c=r(44811);if(1464==r.j)var u=r(391283);function p(){let e=(0,n.wA)(),t=(0,c.TA)(),r=(0,d.dq)();return a.useCallback((a,n)=>{if(n&&((0,i.oJ)(n)||1===n.button)){n?.stopPropagation();let e=a.id;if(e===t)return void l.Ay.redirect(`/files/${r}/user/${e}`,"_blank");let i=a.org_id,o=(0,s.t)(a,i);return void l.Ay.redirect(o,"_blank")}n?.preventDefault(),e(o.sf({view:"user",userId:a.id,orgId:a.org_id||null,userViewTab:u.o.INTERNAL_PROFILE}))},[t,r,e])}},763(e,t,r){r.d(t,{$:()=>i});var a=r(291061),n=r(32186),l=r(982021);let i=new class{constructor(e){this.type=e}start(e){performance.mark(`${this.type}_${e}.startSpan`,{startTime:performance.now()})}endAndReport(e){let t=performance.now(),r=`${this.type}_${e}`;performance.mark(`${r}.endSpan`,{startTime:t});try{let e=performance.measure(`${r}`,`${r}.startSpan`,`${r}.endSpan`).duration;n.az.trackDefinedEvent("file_browser.total_context_menu_load_time",{durationMs:Math.round(e),type:this.type});let t=performance.getEntriesByName(`${r}.startSpan`)[0]?.startTime??0;l.J.logVital(`${this.type}.duration`,{level:a.$b.INFO,startTime:t+performance.timeOrigin,duration:e,description:`Latency for ${this.type} dropdown to render`}),performance.clearMarks(`${r}.startSpan`),performance.clearMarks(`${r}.endSpan`)}catch(e){}}}("tile-action-dropdown")},771469(e,t,r){if(r.d(t,{K:()=>l}),1464==r.j)var a=r(836848);if(1464==r.j)var n=r(930501);function l(e){switch(e){case n._Y.DESIGN:return"design";case n._Y.WHITEBOARD:return"whiteboard";case n._Y.SLIDES:return"piper";case n._Y.SITES:return"seascape";case n._Y.FIGMAKE:return"bake-filebrowser";case n._Y.COOPER:return"cooper";default:return(0,a.S9)(e,"design")}}},39366(e,t,r){r.d(t,{t:()=>a});function a(e,t){return t?`/files/${t}/user/${e.id}`:`/files/user/${e.id}`}},931301(e,t,r){r.d(t,{i:()=>k});var a=r(239976),n=r(105652),l=r(295870),i=r(32186),s=r(873608),o=r(588415),d=r(315171),c=r(586785),u=r(845136),p=r(763),f=r(794432),_=r(655615),m=r(345564),h=r(839480),y=r(644686),x=r(829248),b=r(449996),v=r(517838),g=r(424823),w=r(170198),E=r(930501);function k({tileActions:e,openTile:t,tile:r,selectedTiles:k,dropdownVisible:T,trackSearchFn:F}){var C,I;let S,j,R,A,O,N=r||(1===k.length?k[0]??null:null),P=T&&null!==r,{filePermissions:L,repoPermissions:M,protoPermissions:D}=(0,s.xD)(k),B=(0,v.ud)(),W=n.useMemo(()=>{if(!N)return null;let e=null;if(N.type===g.nb.FILE)e=N.file;else if(N.type===g.nb.REPO){let t=B[N.repo.default_file_key];e=t?w.F.toLiveGraph(t):null}else N.type===g.nb.PINNED_FILE&&(e=N.file);return e},[B,N]),U=function({sourceFile:e,tile:t,tileActions:r,enabled:a}){let n=t?.file?.key,l=(0,y.ac)(e,a);(0,h.d)({file:e??null});let i=t?g.Tf.getOrgId(t):null,s=t?g.Tf.getFavoriteResourceTeamId(t):null,o=(0,b.jm)(i,s),d=(0,m.Y)(n??"",E.bk.FILE,i,s,a),c=(0,u.pH)(e?.key??"",{enabled:!!e&&r.pinToWorkspace&&a}),p=d.hasMaxFavorites,f=d.favorite,_=d.orderedSidebarSections??[],v=(0,x.t$)(d.userSidebarSections??[],_),w=v.find(e=>e.id===f?.resource.sidebarSectionId),k="loaded"!==d.status&&"disabled"!==d.status,T="loaded"!==l.status&&"disabled"!==l.status,F="loaded"!==c.status&&"disabled"!==c.status;return{loading:k||T||F,data:{hasMaxFavorites:p,userSidebarSections:v,favoriteSidebarSection:w,createBranchStatus:l.data,isResourceInUserPlan:!!o,fileWorkspacePinActions:c.data}}}({sourceFile:W,tile:N,tileActions:e,enabled:1===k.length}),H=U.loading&&r?.type!==g.nb.OFFLINE_FILE||"loaded"!==L.status||"loaded"!==M.status||"loaded"!==D.status,K=(C=k.length>1,S=n.useRef(!1),j=n.useRef(P),R=n.useRef(null),n.useEffect(()=>{P&&!1===j.current&&(R.current&&(R.current=null),H?R.current=new o.rw:(S.current=!0,i.az.trackDefinedEvent("file_browser.context_menu_render",{cache_hit:!0,durationMs:0,isBulkSelect:C}))),P&&!H&&(R.current?.stop(e=>{let t=e<=50;i.az.trackDefinedEvent("file_browser.context_menu_render",{cache_hit:t,durationMs:e,isBulkSelect:C}),S.current=t}),R.current=null),j.current=P},[P,H,C]),S.current);return(I=P&&!K?k:[],A=(0,_.z0)(),O=n.useMemo(()=>I,[I.map(e=>g.Tf.getId(e)).join(",")]),n.useEffect(()=>{let e=O.length>1;O.forEach(t=>{let r=A(t);i.az.trackDefinedEvent("file_browser.context_menu_item_loaded",{wasHovered:void 0!==r,isBulkSelect:e,timeSinceHoverMs:r?Date.now()-r:void 0})})},[O,A]),!P||H)?null:(0,a.jsx)(c.tH,{boundaryKey:"TileActionDropdown",sentryTags:{area:l.FigmaTeam.WAYFINDING},fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,a.jsx)(d.u9,{label:"TileActionDropdown",context:{enabledActions:{...e}},logToFigment:!0,children:(0,a.jsx)(f.w,{className:"subscribed_tile_action_dropdown--tileActions--vYgPX",loadedQueries:U.data,onMount:()=>{p.$.endAndReport(`${g.Tf.getId(r)}`)},openTile:t,permsByFileKey:L.data,permsByPrototypeId:D.data,permsByRepoId:M.data,selectedTiles:k,sourceFile:W,tile:r,tileActions:e,trackSearchFn:F})})})}},794432(e,t,r){r.d(t,{w:()=>e3,L:()=>e7});var a=r(239976),n=r(105652),l=r(645186),i=r(836848),s=r(295870),o=r(417675),d=r(270450),c=r(847923),u=r(759231),p=r(917262),f=r(573103),_=r(217871),m=r(170499),h=r(948129),y=r(873608),x=r(86118),b=r(925778),v=r(365146),g=r(184634),w=r(860736),E=r(23226),k=r(805242);function T({children:e,portalTarget:t,portalKey:r}){return(0,k.createPortal)(e,t,r)}var F=r(51477),C=r(338283),I=r(4812),S=r(504743),j=r(494534),R=r(845136),A=r(341299),O=r(935745),N=r(774841),P=r(145823),L=r(71164),M=r(276733),D=r(449551),B=r(114094),W=r(132233),U=r(62367),H=r(489134),K=r(370152),Y=r(892480),z=r(732636),V=r(118836),$=r(989884),q=r(209855),G=r(284253),Q=r(829248),X=r(449996),J=r(550758),Z=r(981040),ee=r(424823),et=r(251929),er=r(323994),ea=r(44811),en=r(380086),el=r(170198),ei=r(960619),es=r(930501),eo=r(202353),ed=r(867206),ec=r(795554),eu=r(750569),ep=r(727580),ef=r(597211),e_=r(959371),em=r(971127),eh=r(338301),ey=r(842121),ex=r(123473),eb=r(549919),ev=r(987879),eg=r(689765),ew=r(434845),eE=r(737719),ek=r(969360),eT=r(149373),eF=r(789549),eC=r(738337);let eI="COPY_LINK",eS="DELETE",ej="DUPLICATE",eR="DUPLICATE_TO_DRAFTS",eA="OPEN",eO="OPEN_NEW_TAB",eN="OPEN_WITH_DISABLED_PREVIEW",eP="PIN_FILE_TO_FOLDER",eL="PIN_REPO_TO_FOLDER",eM="PIN_FILE_TO_WORKSPACE",eD="RENAME",eB="MOVE_FILE",eW="SHARE",eU="SHOW_IN_FOLDER",eH="REMOVE_FROM_RECENTS",eK="REMOVE_FROM_SHARED_FILES",eY="RESTORE_FROM_VERSION",ez="UNPIN_FILE_FROM_FOLDER",eV="UNPIN_REPO_FROM_FOLDER",e$="UNPIN_FILE_FROM_WORKSPACE",eq="EDIT_WORKSPACE_PIN",eG="CREATE_BRANCH",eQ="FAVORITE_FILE",eX="FAVORITE_PROTOTYPE",eJ="FAVORITE_REPO",eZ="UNFAVORITE_FILE",e0="UNFAVORITE_PROTOTYPE",e1="UNFAVORITE_REPO",e4="USE_IN_NEW_FILE",e2="FILE_ANALYTICS",e5="DELETE_FOREVER",e8="RESTORE",e6="RESTORE_TO";function e7(){let e=`TILE_ACTION_DROPDOWN_${n.useId()}`;return(0,et.BK)(e)}function e3(e){let t,r,k,et,e7,e3,e9,te,tt,tr,ta,tn,tl,ti,ts,to,td,tc,tu,tp,tf=(0,er.FC)(),t_=(0,l.wA)(),{user:tm,currentUserOrgId:th}=tf,{dropdownShown:ty,openFileFolderId:tx,selectedView:tb,tileSelect_REDUX:tv,pinnedFileKeys:tg,selectedBranchKeyByRepoId:tw,fileKeysByRepoId:tE,isOnDeleted:tk,attributionContextKey:tT}=(0,c.R)(e=>({dropdownShown:e.dropdownShown,openFileFolderId:e.openFile?.folderId,selectedView:e.selectedView,tileSelect_REDUX:e.tileSelect,pinnedFileKeys:e.pinnedFileKeys,selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,fileKeysByRepoId:e.fileKeysByRepoId,isOnDeleted:"deletedFiles"===e.selectedView.view,attributionContextKey:e.sharingAttributionContextKey})),tF=e.tile,tC=(0,ea.TA)(),[tI]=(0,v.IT)((0,V.OL)({userId:tC})),tS=(0,n.useMemo)(()=>tI?.data??{},[tI]),tj=(0,y.gS)(e.selectedTiles),tR=(0,d.getFeatureFlags)().remove_tile_select_redux_reads?tj:tv,tA=tF.type===ee.nb.FILE?tF.file?.teamId:void 0,tO=(0,eE.vt)(tA),tN=(0,ey.jn)(),{hasPendingRequest:tP,getUpgradeEligibility:tL,getUpgradePathway:tM}=(0,eu.wH)({folderId:tF.type===ee.nb.FILE?tF.file.folderId:null,fileInBrowser:tF.type===ee.nb.FILE?tF.file:void 0}),tD=(0,R.GI)("tile_action_dropdown"),{Sprig:tB}=(0,w.A)(),tW=(0,E.bY)("file_multi_move_limit").getDynamicConfig().get("fileLimit",100),tU=()=>{(0,d.getFeatureFlags)().file_browser_sentiment_survey&&tB("setAttribute","fb_file_organized",!0)},tH=(0,u.Xr)(ee.Y6),tK=e=>{t_(B.Z({fileKey:e.key})),tU()},tY=()=>{t_((0,J.n_)({toDraft:!1,tileSelect:tR})),t_(K.an()),tU()},tz=()=>{let{selectedCount:t,deletableCount:r,allDrafts:a,filesByKey:n,reposById:l,offlineFilesByKey:i}=M.Mw(e.selectedTiles,e.permsByFileKey,e.permsByRepoId);if(r<t){let e=(0,o.t)("tile.dropdown.no_permission_to_trash_error");t_(F.s.error(e));return}t_(M.U1({filesByKey:n,reposById:l,offlineFilesByKey:i,allDrafts:a})),tU()},tV=()=>{let t=(0,m.m8)(t1,e.permsByFileKey),r=(0,h.gX)(t2,e.permsByRepoId);t.length+r.length<t1.length+t2.length?t_(F.s.error((0,o.t)("flash.dont_have_permission_permanently_delete_files"))):(t_(M.Fh({fileKeys:t,repoIds:r})),tU())},t$=()=>{let t=(0,m.g4)(t1,e.permsByFileKey),r=(0,h._H)(t2,e.permsByRepoId);0===t.length+r.length?t_(F.s.error((0,o.t)("tile.dropdown.no_permission_to_restore_error"))):(t_((0,J.b4)({fileKeys:t,repoIds:r})),tU())},tq=()=>{t_((0,J.g4)({tileSelect:tR})),t_(K.an()),tU()},tG=()=>{let e=Object.keys(tR[e_.F.REPOS]);e.length>0&&t_(H.iC({recent_repo_ids:e}));let t=[];for(let r of e)t=t.concat(tE[r]);let r=Object.keys(tR[e_.F.FILES]).concat(t),a=r.map(e=>({key:e}));for(let e of(a.length>0&&(0,_.yN)(a.map(e=>e.key)).catch(e=>{throw t_(F.s.error((0,o.t)("file_browser.file_browser_actions.recently_viewed_error",{numFiles:r.length}))),e}),Object.keys(tR[e_.F.PROTOTYPES]))){let[t,r,a]=e.split(",");t_(U.tl({fileKey:t,pageId:r}))}t_(K.an())},tQ=()=>{let t=e.sourceFile,r=e.loadedQueries.createBranchStatus;if(!t||!r)return;let a=eh.e0.FILE_BROWSER;switch(r.status){case"upsell-org":t_(D.j({trackingContextName:a}));break;case"enabled":t_(D.l({trackingContextName:a,sourceFileKey:t.key,dispatchedFromEditor:!1}));break;case"disabled":case"hidden":break;default:(0,i.xb)(r.status)}},tX=(e,t,r)=>{let a={file:e,sectionId:t,entrypoint:"dropdown",fileBrowserFavorite:!0};r?t_(O.Fb(a)):t_(O.qP(a)),tU()},tJ=(e,t)=>{let r={prototype:e,entrypoint:"dropdown",fileBrowserEntryPoint:!0};t?t_(O.iN(r)):t_(O.X7(r))},tZ=(e,t,r,a)=>{let n=e.is_favorited&&t.some(e=>e.id===r?.id);return{displayText:e.is_favorited?`${(0,o.t)("favorited_resources.indicate_section_prefix")}: ${r?.name||(0,o.t)("sidebar.starred")}`:(0,o.t)("favorited_resources.add_to_sidebar"),children:t.map(({id:e,name:t})=>({recordingKey:"FAVORITE_FILE.CUSTOM",displayText:""===t?(0,o.t)("sidebar.starred"):t,isChecked:r?.id===e,alwaysShowCheckMarkOffset:n,callback:()=>a(e)}))}},t0=(e,t,r,a)=>{if(null===e.default_file_key)return void console.error("Repo file key should not be null");let n={file:el.F.toLiveGraph(t),repoId:e.id,sectionId:r,entrypoint:"dropdown",fileBrowserFavorite:!0};a?t_(O.Fb(n)):t_(O.qP(n))},t1=n.useMemo(()=>Object.keys(tR[e_.F.FILES]),[tR]),t4=n.useMemo(()=>Object.keys(tR[e_.F.PINNED_FILES]),[tR]),t2=n.useMemo(()=>Object.keys(tR[e_.F.REPOS]),[tR]),t5=n.useMemo(()=>(0,m.Ul)(t1,e.permsByFileKey)||[],[e.permsByFileKey,t1]),t8=n.useMemo(()=>(0,m.n)(t1,e.permsByFileKey)||[],[e.permsByFileKey,t1]),t6=n.useMemo(()=>(0,m.g4)(t1,e.permsByFileKey)||[],[e.permsByFileKey,t1]),t7=n.useMemo(()=>(0,m.SW)(t1,e.permsByFileKey)||[],[e.permsByFileKey,t1]),t3=n.useMemo(()=>(0,m.v_)(t1,e.permsByFileKey).length,[e.permsByFileKey,t1]),t9=n.useMemo(()=>(0,m.v_)(t4,e.permsByFileKey).length,[e.permsByFileKey,t4]),re=n.useMemo(()=>(0,m.m8)(t1,e.permsByFileKey)||[],[e.permsByFileKey,t1]),rt=n.useMemo(()=>{let t={};for(let r of e.selectedTiles.filter(e=>e.type===ee.nb.REPO)){let e=r.repo.id,a=tw[e],n=r.repo.default_file_key;a?t[e]=a:n&&(t[e]=n)}return t},[e.selectedTiles,tw]),rr=n.useMemo(()=>tk?Object.keys(tR[e_.F.REPOS]).length:((0,h.nL)(t2,rt,e.permsByRepoId)||[]).length,[tk,e.permsByRepoId,tR,t2,rt]),ra=n.useMemo(()=>(0,h.zj)(t2,e.permsByRepoId)||[],[e.permsByRepoId,t2]),rn=n.useMemo(()=>(0,h._H)(t2,e.permsByRepoId)||[],[e.permsByRepoId,t2]),rl=n.useMemo(()=>(0,h.CS)(t2,e.permsByRepoId)||[],[e.permsByRepoId,t2]),ri=n.useMemo(()=>(0,h.gX)(t2,e.permsByRepoId)||[],[e.permsByRepoId,t2]),rs=n.useMemo(()=>Object.keys((0,V.gp)(tR[e_.F.OFFLINE_FILES],{offlineFiles:tS})),[tS,tR]),ro=n.useMemo(()=>(0,h.ae)(t2,e.permsByRepoId)||[],[e.permsByRepoId,t2]),rd=n.useMemo(()=>Object.keys(tR[e_.F.FILES]).length+Object.keys(tR[e_.F.REPOS]).length+Object.keys(tR[e_.F.PROTOTYPES]).length,[tR]),rc=n.useMemo(()=>Object.keys(tR[e_.F.FILES]).length+Object.keys(tR[e_.F.PROTOTYPES]).length,[tR]),ru=n.useMemo(()=>Object.keys(tR[e_.F.FILES]).length+Object.keys(tR[e_.F.REPOS]).length,[tR]),rp=n.useMemo(()=>{let t=new Set,r=new Set;return t1.forEach(a=>{let n=e.permsByFileKey[a];n&&(t.add(n.planType||""),r.add(n.planId||""))}),t2.forEach(a=>{let n=e.permsByRepoId[a];n&&(t.add(n.planType||""),r.add(n.planId||""))}),1===t.size&&(t.has("team")||1===r.size)},[e.permsByFileKey,e.permsByRepoId,t1,t2]),rf=(0,eC.aI)(),r_=tF.type===ee.nb.FILE?tF.file:null,rm=tF.type===ee.nb.PINNED_FILE?tF.file:null,rh=rm||r_,ry=tF.type===ee.nb.REPO?tF.repo:null,rx=(rh&&e.permsByFileKey[rh.key])??null,rb=(ry&&e.permsByRepoId[ry.id])??null,rv=e.tile.type===ee.nb.PROTOTYPE?e.tile.prototype:null,rg=null!=ry&&tF.branches?tF.branches.find(e=>(0,q.SA)(e,ry)):null,rw=rg?el.F.toLiveGraph(rg):null,rE=e.tile.type===ee.nb.OFFLINE_FILE?e.tile.file:null,rk=(0,eF.mu)(e.tile.type===ee.nb.FILE?el.F.toSinatra(e.tile.file):null,tC),rT=(0,z.a9)(),rF=tF.type===ee.nb.REPO?rw:rh,rC=(0,n.useMemo)(()=>{let e=ee.Tf.getEditorType(tF);if(!tm||!e||!rF)return null;let t=el.F.toSinatra(rF),r=rx?.mustUpgradeToShareDraft??!1;return tL((0,$.wR)(e),!(0,eT.l)({file:{...t,mustUpgradeToShareDraft:r},user:tm,orgUser:rT,orgDraftsOwner:rT,teamUser:rk}))},[tF,rF,tm,rk,tL,rT,rx?.mustUpgradeToShareDraft]),rI=Object.keys(tR[e_.F.FILES]).length,rS=Object.keys(tR[e_.F.PINNED_FILES]).length,rj=Object.keys(tR[e_.F.PROTOTYPES]).length,rR=Object.keys(tR[e_.F.REPOS]).length,rA=Object.keys(tR[e_.F.OFFLINE_FILES]).length,rO=(0,ec.jB)({files:r_?[el.F.toSinatra(r_)]:[],repos:ry?[ry]:[],destinationFolderId:ee.Tf.getFolderId(tF),isDestinationDrafts:!1}),rN=(0,ec.Cp)(rO.destinationPlan?.key||null,rO.licenseType),rP=e.selectedTiles.filter(e=>e.type===ee.nb.FILE).map(e=>e.file).some(e=>e.editorType===es._Y.FIGMAKE)&&rO.requiresUpgrade&&!rf,rL=(0,ed.D6)("TileActionDropdown"),rM=(0,ed.Kd)(rL).unwrapOr(!1),rD=(0,u.md)(eb.V1),rB=ty?.data;if(!rB)return null;let rW=rI+rS+rR,rU=rW+rA,rH=rI+rS+rR+rj+rA,rK=1===rW,rY=1===rU;if(0===rH)return(0,a.jsx)("div",{});let rz=!0,rV=!0,r$=!0,rq=!1,rG=!0,rQ=!0,rX=!0;(t8.length+ra.length+rs.length<rI||rj>0)&&(rz=!1),(re.length+ri.length<rI||rj>0||rA>0)&&(rV=!1),(t6.length<rI||rn.length<rR||rj>0||rA>0)&&(r$=!1),t7.length===rI&&rl.length===rR&&(rq=!0),(t3<rI||t9<rS||rr<rR||rj>0||rA>0)&&(rG=!1),rA>0&&(rQ=!1);let rJ=t5.length+ro.length;rJ<rW&&(rX=!1);let rZ="";rK||(rZ=(0,o.t)("tile.dropdown.multiple_file_suffix",{totalSelected:rW}));let r0="";rY||(r0=(0,o.t)("tile.dropdown.multiple_file_suffix",{totalSelected:rU}));let r1=(r=(t=(0,Q.D6)(th))?(0,o.t)("favorited_resources.remove_from_sidebar"):(0,o.t)("tile.favoriting.remove_from_favorites"),{[eI]:e=>({displayText:(0,o.t)("tile.dropdown.copy_link"),callback:()=>(e=>{switch(e.type){case ee.nb.FILE:let t=e.file;t_(P.S({fileKey:t.key,url:(0,en.jN)({file:t,attributionContext:(0,ei.b)(tT,ei.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:ei.d.FILE_TILE_CONTEXT_MENU}));break;case ee.nb.PINNED_FILE:t_(P.S({fileKey:e.file.key,url:(0,en.jN)({file:e.file,attributionContext:(0,ei.b)(tT,ei.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:ei.d.FILE_TILE_CONTEXT_MENU}));break;case ee.nb.PROTOTYPE:t_(A.S({url:(0,en.Kw)({base:"proto",file:{key:e.prototype.file_key},nodeId:e.prototype.page_id,attributionContext:(0,ei.b)(tT,ei.d.FILE_TILE_CONTEXT_MENU)})}));break;case ee.nb.REPO:let r=(0,q.mr)(e.repo,e.branches,tw);t_(P.S({fileKey:r.key,url:(0,q.CE)(r,e.repo,"file"),source:ei.d.FILE_TILE_CONTEXT_MENU}))}})(e)}),[eS]:(e,t,r)=>{let a=!1;if(e.type===ee.nb.REPO){let t=(0,q.mr)(e.repo,e.branches,tw);a=!(0,q.SA)(t,e.repo)}return{displayText:a?(0,o.t)("tile.dropdown.move_file_and_branches_to_trash"):1===rH?(0,o.t)("tile.dropdown.trash_single_tile"):(0,o.t)("tile.dropdown.trash_file",{objText:t}),callback:tz,disabled:r}},[ej]:(e,t)=>({displayText:1===rH?(0,o.t)("tile.dropdown.duplicate_single_tile"):(0,o.t)("tile.dropdown.duplicate",{objText:e}),callback:tY,disabled:t}),[eR]:(e,t)=>({displayText:1===rW?(0,o.t)("tile.dropdown.duplicate_to_draft_single_file_or_repo"):(0,o.t)("tile.dropdown.duplicate_to_draft",{objText:e}),callback:tq,disabled:t}),[eA]:()=>({displayText:(0,o.t)("tile.dropdown.open"),callback:(t,r,a,n)=>{e.openTile(n)}}),[eO]:t=>({displayText:(0,o.t)("tile.dropdown.open_new_tab"),callback:()=>(t=>{e.trackSearchFn&&e.trackSearchFn();let r=void 0===e.trackSearchFn;switch(t.type){case ee.nb.FILE:let a=(0,en.rl)(t.file);(0,X.nz)(a,t.file.key,tb,t_,tB,r);break;case ee.nb.PINNED_FILE:(0,X.nz)((0,en.jN)(t),t.file.key,tb,t_,tB,r);break;case ee.nb.PROTOTYPE:(0,X.D4)(t.prototype.url,t.prototype.file_key,t.prototype.page_id,tb);break;case ee.nb.REPO:let n=(0,q.mr)(t.repo,t.branches,tw);b.Ay.redirect((0,q.CE)(n,t.repo,"file"),"_blank");break;case ee.nb.OFFLINE_FILE:t_(L.NA({file:t.file,openNewFileIn:ef.ai.NEW_TAB,source:ep.U.OFFLINE_FILE_TILE}));return;default:(0,i.xb)(t)}})(t)}),[eN]:t=>({displayText:(0,o.t)("tile.dropdown.open_with_disabled_preview"),callback:()=>(t=>{switch(e.trackSearchFn&&e.trackSearchFn(),t.type){case ee.nb.FILE:case ee.nb.PINNED_FILE:if(t.file.editorType===es._Y.FIGMAKE){let e=(0,en.jN)({file:t.file,disablePreview:!0});(0,X.nz)(e,t.file.key,tb,t_,tB)}}})(t)}),[eP]:e=>({displayText:(0,o.t)("tile.dropdown.pin_to_project"),callback:()=>{null!=e.folderId&&t_(W.gO({folderId:e.folderId,teamId:e.teamId,fileKey:e.key})),tU()}}),[eL]:e=>({displayText:(0,o.t)("tile.dropdown.pin_to_project"),callback:()=>{null!=e.folder_id&&null!=e.default_file_key&&t_(W.gO({folderId:e.folder_id,teamId:e.team_id,fileKey:e.default_file_key})),tU()}}),[eM]:t=>{let r=!!e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.workspaceHasMaxPins;return{displayText:(0,o.t)("tile.dropdown.pin_to_workspace"),callback:()=>tD(t,r)}},[eH]:(e,t)=>({displayText:(0,o.t)("tile.dropdown.remove_from_recent_pluralized",{numFiles:e}),callback:tG,disabled:t}),[eK]:e=>({displayText:(0,o.t)("tile.dropdown.remove_from_shared_files"),callback:()=>{let t,r,a;return t="",r="",e.type===ee.nb.FILE?(t=e.sharedWithYouFields?.id??"",r=e.file.name??""):e.type===ee.nb.PROTOTYPE&&(t=e.prototype.shared_with_you_id??"",r=e.prototype.fig_file?.name??e.prototype.name??""),a=async()=>{try{await (0,_.LG)(t)}catch(e){t_(F.s.error((0,o.t)("file_browser.file_browser_actions.remove_files_from_shared_files")))}},void t_(Y.to({type:S.q,data:{fileName:r,onRemove:a}}))}}),[eD]:e=>{switch(e.type){case ee.nb.FILE:return{displayText:(0,o.t)("tile.dropdown.rename"),callback:()=>{tH({type:"FILE",id:e.file.key}),t_(K.an()),tU()}};case ee.nb.REPO:let t=(0,q.mr)(e.repo,e.branches,tw);return{displayText:(0,q.SA)(t,e.repo)?(0,o.t)("tile.dropdown.rename"):(0,o.t)("tile.dropdown.rename_file"),callback:()=>{tH({type:"REPO",id:e.repo.id}),t_(K.an()),tU()}};case ee.nb.OFFLINE_FILE:return{displayText:(0,o.t)("tile.dropdown.rename"),callback:()=>{var t;return t=e.file,void((0,V.dm)(t),t_(K.an()),tU())}};default:(0,i.xb)(e)}},[eB]:(t,r,a)=>({displayText:1===t?(0,o.t)("tile.dropdown.move_file"):(0,o.t)("tile.dropdown.move_object",{objText:r}),callback:()=>((t,r,a)=>{if(1===a){let a=e.selectedTiles[0];if(a?.type===ee.nb.FILE)(0,j.h)(el.F.toSinatra(a.file),null,t_,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:rO,hasConnectedPlanUserInOrg:rN,canMoveWithReasons:t?.canMoveWithReasons});else if(a?.type===ee.nb.REPO){let e=a.branches.find(e=>(0,q.SA)(e,a.repo));(0,j.h)(e??null,a.repo,t_,void 0,void 0,{canMove:!!r?.canMove,isUserViewerRestricted:!!r?.isUserRestrictedForSeat,planUser:r?.planUser??null,inDrafts:!!r?.isDraftRepo,draftsMoveData:rO,hasConnectedPlanUserInOrg:rN,canMoveWithReasons:r?.canMoveWithReasons})}}else{let t=e.selectedTiles.filter(e=>e.type===ee.nb.FILE).map(e=>el.F.toSinatra(e.file)),r=e.selectedTiles.filter(e=>e.type===ee.nb.REPO).map(e=>e.repo);(0,j.O)(t,r,t_)}tU()})(rx,rb,t),disabled:a||rP||(0,ec.Px)(rO,!!rx?.isFileTypeDisabled,rN),sideText:(0,ec.zS)(rO,a||!!rx?.isFileTypeDisabled,rN),rightJustifySideText:!0}),[eY]:e=>{switch(e.type){case ee.nb.FILE:return{displayText:(0,o.t)("fullscreen_actions.toggle-version-history"),callback:()=>{tK(e.file)}};case ee.nb.REPO:let t=(0,q.mr)(e.repo,e.branches,tw);return{displayText:(0,o.t)("fullscreen_actions.toggle-version-history"),callback:()=>{tK(t)}};default:(0,i.wc)(eY)}},[eW]:e=>{let t=(()=>{switch(e.type){case ee.nb.FILE:case ee.nb.PINNED_FILE:return e.file;case ee.nb.REPO:return(0,q.mr)(e.repo,e.branches,tw);default:return(0,g.$D)(s.FigmaTeam.WAYFINDING,Error("Invalid tile type when rendering DropdownActionOptions.SHARE"),{extra:{"tile.type":e.type,numFilesSelected:rI,numPinnedFilesSelected:rS,numReposSelected:rR}}),null}})(),r=ee.Tf.getEditorType(e),a=(0,$.wR)(r);return{displayText:(0,o.t)("tile.dropdown.share"),callback:()=>{t&&t_(Y.to({type:ek.g_,data:{fileKey:t.key,source:Z.nk.fileBrowserTileActionMenu}}))},sideText:(e=>{if(rC!==em.q.UPGRADE_NOT_NEEDED&&tM(e)!==em.J.AUTO_PATHWAY)return tP(e)?(0,o.t)("upgrades.request_sent"):(0,o.t)("upgrades.request")})(a),rightJustifySideText:!0,disabled:!!tP(a)&&rC===em.q.CANNOT_UPGRADE}},[eU]:e=>{switch(e.type){case ee.nb.FILE:return{displayText:(0,o.t)("tile.dropdown.show_in_project"),callback:()=>(e=>{if(null!=e.file.folderId)if(th===e.file.parentOrgId)t_(N.sf({view:"folder",folderId:e.file.folderId})),t_(K.y$({type:e_.F.FILES,tiles:[e]}));else{let t=e.file.parentOrgId?`/files/${e.file.parentOrgId}/project/${e.file.folderId}`:`/files/project/${e.file.folderId}`;t=tm?(0,p.NQ)(t,"fuid",tm.id):t,b.Ay.redirect(t)}})(e)};case ee.nb.REPO:return{displayText:(0,o.t)("tile.dropdown.show_in_project"),callback:()=>{t_(N.sf({view:"folder",folderId:e.repo.folder_id})),t_(K.y$({type:e_.F.REPOS,tiles:[e]}))}};default:(0,i.wc)(eU)}},[ez]:e=>({displayText:(0,o.t)("tile.dropdown.remove_project_pin"),callback:()=>{let t;null!=(t=e.folderId)&&t_(W.z6({folderId:t,fileKey:e.key})),tU()}}),[eV]:e=>({displayText:(0,o.t)("tile.dropdown.remove_project_pin"),callback:()=>{null!=e.folder_id&&null!=e.default_file_key&&t_(W.z6({folderId:e.folder_id,fileKey:e.default_file_key})),tU()}}),[e$]:e=>({displayText:(0,o.t)("tile.dropdown.remove_workspace_pin"),callback:()=>{t_(Y.to({type:(0,C.I)(),data:{pinnedFileId:e}})),tU()}}),[eq]:e=>({displayText:(0,o.t)("tile.dropdown.edit_workspace_pin"),callback:()=>{t_(Y.to({type:(0,I.l)(),data:{pinnedFileId:e}})),tU()}}),[eG]:e=>({displayText:(0,o.t)("tile.dropdown.create_new_branch"),callback:tQ,disabled:e}),[e5]:(e,t)=>({displayText:(0,o.t)("tile.dropdown.delete_forever",{objectText:e}),callback:tV,disabled:t}),[e8]:(e,t,r)=>({displayText:(0,o.t)("tile.dropdown.restore",{objectText:e,numFiles:r}),callback:t$,disabled:t}),[e6]:(t,r,a)=>({displayText:(0,o.t)("tile.dropdown.restore_to",{objectText:t,numFiles:a}),callback:()=>((t,r)=>{let a=t7.length+rl.length;if(0===a)return void t_(F.s.error((0,o.t)("tile.dropdown.no_permission_to_restore_error")));if(1===a){let a=e.selectedTiles[0];if(a?.type===ee.nb.FILE)(0,j.h)(el.F.toSinatra(a.file),null,t_,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:rO,canMoveWithReasons:t?.canMoveWithReasons},void 0,!0);else if(a?.type===ee.nb.REPO){let e=a.branches.find(e=>(0,q.SA)(e,a.repo));(0,j.h)(e??null,a.repo,t_,void 0,void 0,{canMove:!!r?.canMove,isUserViewerRestricted:!!r?.isUserRestrictedForSeat,planUser:r?.planUser??null,inDrafts:!!r?.isDraftRepo,draftsMoveData:rO,canMoveWithReasons:r?.canMoveWithReasons},void 0,!0)}}else{let t=e.selectedTiles.filter(e=>e.type===ee.nb.FILE).map(e=>el.F.toSinatra(e.file)),r=e.selectedTiles.filter(e=>e.type===ee.nb.REPO).map(e=>e.repo);(0,j.O)(t,r,t_,void 0,!0)}})(rx,rb),disabled:r}),[eQ]:(r,a)=>{let{favoriteSidebarSection:n}=e.loadedQueries;return t&&null!=a&&a?.length>0?tZ({is_favorited:r.isFavorited},a,n,e=>{tX(r,e,n?.id!==e)}):{displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>tX(r,void 0,!0)}},[eX]:e=>({displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>tJ(e,!0)}),[eJ]:(r,a,n)=>{let{favoriteSidebarSection:l}=e.loadedQueries;return t&&null!=n?tZ(r,n,l,e=>{t0(r,a,e,l?.id!==e)}):{displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>t0(r,a,void 0,!0)}},[eZ]:e=>({displayText:r,callback:()=>tX(e,void 0,!1)}),[e0]:e=>({displayText:r,callback:()=>tJ(e,!1)}),[e1]:(e,t)=>({displayText:r,callback:()=>t0(e,t,void 0,!1)}),[e4]:e=>(0,ex.rC)({dispatch:t_,fileKey:e.key,templateName:e.name}),[e2]:e=>({displayText:(0,o.t)("fullscreen.filename_view.file_analytics"),callback:()=>{null!=e.folderId&&t_((0,Y.to)({type:ev.e,data:{fileKey:e.key,entrypoint:G.F.FileNavigation}}))}})}),r4=(k=(rv&&e.permsByPrototypeId[rv.file_key])??null,et=(0,eo.R$)(tm,th),e7=!!r_&&!!r_.teamId&&tO,e3="folder"===tb.view&&tg[tb.folderId]||rD&&tx&&tg[tx]||[],e9=r_&&e3.includes(r_.key),te=rm&&e3.includes(rm.key),tt=ry&&ry.default_file_key&&e3.includes(ry.default_file_key),tr=e9||te||tt||Object.keys(tR[e_.F.PINNED_FILES]).length>0,ta=rI+rS+rj+rR+rA===1,tn=rh?.editorType===es._Y.FIGMAKE,tl=rh?.editorType===es._Y.FIGMAKE&&!rf,ti=(t3>0||t9>0||rr>0)&&!et&&!e7&&!tN,ts=ra.length+t8.length+rs.length,to=ri.length+re.length,td=rn.length+t6.length,tc=rl.length+t7.length,tu=0===td&&0===tc&&0===to&&e.tileActions.pinToFolder&&!e.tileActions.showInFolder&&ta,tp=(0,Q.D6)(th),{[eI]:()=>!!(e.tileActions.copyLink&&ta&&!rE),[eS]:()=>!!(e.tileActions.delete&&ts>0&&0===rS),[ej]:()=>!!(e.tileActions.duplicate&&ti),[eR]:()=>!!(e.tileActions.duplicateToDrafts&&ti),[eA]:()=>!!(e.tileActions.open&&ta),[eO]:()=>!!(e.tileActions.openNewTab&&ta&&!x.eD&&!(0,f.ce)()),[eN]:()=>!!(ta&&(tF.type===ee.nb.FILE&&tF.file.editorType===es._Y.FIGMAKE||tF.type===ee.nb.PINNED_FILE&&tF.file.editorType===es._Y.FIGMAKE)),[eP]:()=>{let e=rx?.canPin;return!!(!tr&&1===rI&&tu&&e)},[eL]:()=>{let e=rb?.canPin;return!!(!tr&&1===rR&&tu&&e)},[eM]:()=>!!(ta&&(1===rI||1===rR)&&e.tileActions.pinToWorkspace&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.shouldShowPinFileToWorkspaceAction),[eH]:()=>!!(e.tileActions.removeFromRecents&&rd>0),[eK]:()=>!!(e.tileActions.removeFromSharedFiles&&1===rc),[eD]:()=>{let t=rx?.canRename,r=rb?.canRename;return!!(e.tileActions.rename&&ta&&(1===rI&&t||1===rR&&r||1===rA))},[eB]:()=>{let t=rx?.canOpenMoveModal,r=rb?.canOpenMoveModal;return!!(e.tileActions.moveFile&&0===rA&&(ta&&(1===rI&&t||1===rR&&r)||rW>1&&rW<=tW&&rJ>0))},[eY]:()=>{let t=rx?.canRestoreFromVersion,r=!!ry&&rb?.canEditBranch(tw[ry.id]);return!!(e.tileActions.restoreFromVersion&&ta&&(1===rI&&t||1===rR&&r)&&!tn)},[eW]:()=>!!(e.tileActions.share&&ta&&(1===rI||1===rS||1===rR)&&!rx?.isFileTypeDisabled&&!tl),[eU]:()=>{let t=rx?.canShowInProject,r=rb?.canShowInProject;return!!(e.tileActions.showInFolder&&ta&&(1===rR&&r||1===rI&&t))},[ez]:()=>{let e=!!rx?.canPin;return!!(tr&&rS<=1&&tu&&e)},[eV]:()=>{let e=rb?.canPin;return!!(tr&&rR<=1&&tu&&e)},[e$]:()=>!!(e.tileActions.pinToWorkspace&&ta&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eq]:()=>!!(e.tileActions.pinToWorkspace&&1===rI&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eG]:()=>!!(e.tileActions.createBranch&&ta&&(1===rI||1===rS||1===rR)&&e.sourceFile&&e.loadedQueries.createBranchStatus&&"hidden"!==e.loadedQueries.createBranchStatus.status),[eQ]:()=>{if("deletedFiles"===tb.view||rh?.parentOrgId!==th)return!1;let t=rx?.canFavorite&&e.loadedQueries.isResourceInUserPlan,r=rx?.canFavorite&&!rx?.isFavorited&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==tb.view&&!e.loadedQueries.hasMaxFavorites&&!tp&&(r&&1===rI&&ta||rm&&1===rS&&!rm?.isFavorited))||(tp&&e.loadedQueries.userSidebarSections,!!t&&1===rI&&!!ta||!!rm&&1===rS)},[eX]:()=>{if("deletedFiles"===tb.view||"team"===tb.view||rv?.parent_org?.id!==th)return!1;let t=k?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!(!e.loadedQueries.hasMaxFavorites&&!tp&&1===rj&&ta&&t)},[eJ]:()=>{if("deletedFiles"===tb.view||ry?.parent_org_id!==th)return!1;let t=rb?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==tb.view&&!e.loadedQueries.hasMaxFavorites&&!tp&&1===rR&&ta&&t)||(tp&&e.loadedQueries.userSidebarSections,1===rR&&!!ta&&!!t)},[eZ]:()=>{if("deletedFiles"===tb.view||"team"===tb.view||rh?.parentOrgId!==th)return!1;let e=rx?.canFavorite&&rx?.isFavorited;return!!(r_?.parentOrgId===th&&(1===rI&&ta&&e||rm&&1===rS&&rm?.isFavorited))},[e0]:()=>{if("deletedFiles"===tb.view||"team"===tb.view||rv?.parent_org?.id!==th)return!1;let e=k?.canUnfavorite;return!!(1===rj&&ta&&e)},[e1]:()=>{if("deletedFiles"===tb.view||"team"===tb.view||ry?.parent_org_id!==th)return!1;let e=rb?.canUnfavorite;return!!(1===rR&&ta&&e)},[e4]:()=>{let e=!!rx?.canUseInNewFile;return!!(ta&&rh&&e)},[e5]:()=>!!(e.tileActions.deleteForever&&to>0),[e8]:()=>!!(e.tileActions.restore&&td>0&&!et),[e6]:()=>!!(e.tileActions.restoreToOtherFolders&&tc>0&&!et&&!(e.tileActions.restore&&td>0)),[e2]:()=>{let e=rh??rw,t=(0,eg.MG)(e?{parentOrgId:e.parentOrgId||null}:null,!!e?.lastPublishedAt,rM);return!!(e&&t)}}),r2=(e,...t)=>r4[e]()?[].concat(r1[e](...t)):[],r5=[[...r2(eU,tF),...r2(eA,tF),...r2(eO,tF),...r2(eN,tF)],[...r2(eG,null!=e.loadedQueries.createBranchStatus&&"disabled"===e.loadedQueries.createBranchStatus.status)],[...r2(e2,rh??rw)],[...r2(eQ,rh,e.loadedQueries.userSidebarSections),...r2(eX,rv),...r2(eJ,ry,rg,e.loadedQueries.userSidebarSections),...r2(eZ,rh),...r2(e0,rv),...r2(e1,ry,rg),...r2(eP,r_),...r2(eL,ry),...r2(ez,rh),...r2(eV,ry),...r2(eM,r_?.key||rg?.key),...r2(eq,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId),...r2(e$,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId)],[...r2(eI,tF),...r2(eW,tF),...r2(ej,rZ,!rG),...r2(eR,rZ,!rG),...r2(e4,rh)],[...r2(eY,tF),...r2(eD,tF),...r2(eB,ru,rZ,!(1===rH||rX&&rp)),...r2(eS,tF,r0,!rz),...r2(eH,rd,!rQ),...r2(eK,tF),...r2(e8,rZ,!r$,rW),...r2(e6,rZ,!rq,rW),...r2(e5,rZ,!rV)]],r8=[];return r5.filter(e=>e.length>0).forEach(e=>{r8.length>0&&r8.push({displayText:"",separator:!0}),r8.push(...e)}),(0,a.jsx)(T,{portalTarget:document.body,children:(0,a.jsx)(ew.j,{autofocusPrevOnDismount:!0,dispatch:t_,items:r8,lean:"right",minWidth:rK?void 0:140,onMount:e.onMount,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},t_,t)},parentRect:rB.targetRect,recordingKey:"tile-dropdown",showPoint:!1})})}},655615(e,t,r){r.d(t,{FA:()=>o,my:()=>d,xj:()=>u,z0:()=>c});var a=r(239976),n=r(105652),l=r(32186),i=r(424823);let s=(0,n.createContext)({onHover:()=>{},onLeave:()=>{},getItemHoveredAt:()=>void 0,items:[]});function o(){return(0,n.useContext)(s).onHover}function d(){return(0,n.useContext)(s).onLeave}function c(){return(0,n.useContext)(s).getItemHoveredAt}function u({children:e}){let[t,r]=(0,n.useState)({}),o=(0,n.useRef)({});(0,n.useEffect)(()=>()=>{o.current={}},[]);let d=(0,n.useCallback)(e=>{let t=i.Tf.getId(e);return o.current[t]?.enter},[]),c=(0,n.useCallback)(e=>{r(t=>{let r=i.Tf.getId(e);return t[r]?t:{...t,[r]:e}}),o.current[i.Tf.getId(e)]||(o.current[i.Tf.getId(e)]={enter:Date.now()})},[]),u=(0,n.useCallback)(e=>{let t=i.Tf.getId(e),a=o.current[t];if(a&&!a.leave){let e=Date.now();o.current[t]={...a,leave:e},l.az.trackDefinedEvent("file_browser.context_menu_item_hover",{hoverDurationMs:e-a.enter})}r(e=>{let r={...e};return delete r[t],r})},[]),p=(0,n.useMemo)(()=>Object.values(t),[t]),f=(0,n.useMemo)(()=>({onHover:c,onLeave:u,getItemHoveredAt:d,items:p}),[p,c,u,d]);return(0,a.jsx)(s.Provider,{value:f,children:e})}},190103(e,t,r){r.d(t,{Q4:()=>S,gE:()=>C,u5:()=>I});var a=r(417675),n=r(263740),l=r(32186),i=r(917262),s=r(925778),o=r(153745),d=r(245694),c=r(925370);if(1464==r.j)var u=r(4257);var p=r(228938),f=r(64045),_=r(679313),m=r(475712);if(1464==r.j)var h=r(919462);var y=r(515041);if(1464==r.j)var x=r(190549);var b=r(380086);if(1464==r.j)var v=r(930501);var g=r(314284),w=r(515641),E=r(597211);if(1464==r.j)var k=r(173198);if(1464==r.j)var T=r(317011);async function F(e,t,r,n,l,i){let s=[],d=null;try{d=await (0,y.nm)()(r),s=(0,x.F)(n,t,d)}catch(t){let e=t?.data?.message||(0,a.t)("file_browser.error_try_again");r(u.F.enqueue({message:e,type:"error"}))}let c=(n.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in n.authedUsers.byId).length>1,p=(0,f.JJ)(t.viewer_mode),_=s.map(e=>(0,m.y)(e,p,n,d,i)).filter(e=>null!==e);1!==_.length||c?(0===_.length&&(0,o.xi)("community","no available workspaces for workspace selection modal",{workspaces:s,userId:n.user?.id}),e({onSelectWorkspace:l,workspaces:_,mode:"new_file"})):l(_[0])}let C=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1,skipWorkspaceSelection:!1,userId:void 0,openInNewTab:!0})=>r=>async(a,o)=>{let u=o();function f(e){let o={headers:{...d.Ay.defaults.headers}},f={};e&&(o.headers["X-Figma-User-ID"]=e.userId,f.org_id=e.orgId,f.team_id=e.teamId),!0===t.adminReviewerOverride&&(f.admin_reviewer_override=!0),d.Ay.post(`/api/hub_files/v2/${r.id}/copy`,f,o).then(({data:o})=>{let d=o.meta,_=(0,w.m3)(r),m=!0!==_?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,l.sx)(h.M5.HUB_FILE_DUPLICATED,{hubFileId:r.id,figFileKey:d.key,isMonetized:_,paidStatus:m,searchSessionId:(0,p.wr)(u),file_team_id:f.team_id,org_id:f.org_id,file_folder_id:d.folder_id}),"whiteboard"===d.editor_type&&a((0,c.Hx)({storeInRecentsKey:k.$A.FigJam,id:r.id,type:k.vt.CommunityResource}));let y=(0,b.to)(d);y=(0,i.dR)(y,{"is-community-duplicate":"1",fuid:e?.userId||t.userId||""}),!0===t.isFreemiumPreview&&(y=(0,i.dR)(y,{"is-freemium-preview":"1"})),s.Ay.redirect(y,n.A.isMobileBrowser||!t.openInNewTab?void 0:"_blank")})}(0,_.YN)()&&t.skipWorkspaceSelection?f():await F(e,r,a,u,f)},I=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(a,l)=>{let o=l();function d(e){let a=(0,T.e)(v._Y.SLIDES,E.f6.COMMUNITY_RESOURCE_TILE_USE_TEMPLATE,r.library_key);e?((0,g.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,i.dR)(a,{fuid:e.userId})):t.userId&&(a=(0,i.dR)(a,{fuid:t.userId})),s.Ay.redirect(a,n.A.isMobileBrowser?void 0:"_blank")}(0,_.YN)()&&t.skipWorkspaceSelection?d():await F(e,r,a,o,d)},S=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(a,l)=>{let o=l();function d(e){let a=`/file/new?initial-library-key=${r.library_key}`;e?((0,g.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,i.dR)(a,{fuid:e.userId})):t.userId&&(a=(0,i.dR)(a,{fuid:t.userId})),s.Ay.redirect(a,n.A.isMobileBrowser?void 0:"_blank")}(0,_.YN)()&&t.skipWorkspaceSelection?d():await F(e,r,a,o,d,!0)}},887879(e,t,r){r.d(t,{A:()=>p});var a=r(645186),n=r(32186),l=r(190103),i=r(753195),s=r(892480),o=r(44811),d=r(515641),c=r(413401),u=r(228938);function p({resource:e,adminReviewerOverride:t=!1,isFreemiumPreview:r=!1,skipWorkspaceSelection:p=!1,openInNewTab:f=!0}){let _=(0,a.wA)(),m=(0,u.Jm)(),h=(0,c.T)(),y=(0,o.iZ)();if(!(0,d.U)(e))return()=>{};let x=l.gE(t=>{(0,n.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:e.id,searchSessionId:m}),_((0,s.to)({type:i._,data:{payload:t}}))},{isFreemiumPreview:r,adminReviewerOverride:t,skipWorkspaceSelection:h||p,userId:y?.id,openInNewTab:f});return()=>{_(x(e))}}},864117(e,t,r){r.d(t,{I:()=>l});var a=r(124144);if(1464==r.j)var n=r(338301);function l(){return(0,a.j6)().name===n.e0.RESOURCE_HUB_LIGHTBOX_RDP}},345564(e,t,r){r.d(t,{Y:()=>s});var a=r(296039),n=r(376750),l=r(829248),i=r(306874);function s(e,t,r=null,o=null,d=!0){let c=(0,a.bc)(i.qjT,{resourceId:e,resourceType:t,orgId:r,teamId:r?null:o},{enabled:d}),u=c.data?(0,l.eU)(c.data,t):void 0;return{status:c.status,favorite:u,hasMaxFavorites:!!c.data?.favoritedResources?.numFavorites&&(0,l.tW)(c.data?.favoritedResources.numFavorites),userSidebarSections:c.data?.currentUser?(0,n.oA)(c.data.currentUser.userSidebarSections):null,orderedSidebarSections:c.data?.currentUser.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections}}},705309(e,t,r){r.d(t,{Q:()=>h,S:()=>y});var a=r(417675),n=r(827682),l=r(376750),i=r(153745),s=r(245694),o=r(51477),d=r(4257),c=r(941948),u=r(306874),p=r(396238),f=r(874582),_=r(585852),m=r(377617);let h=(0,m.nF)(async(e,t,{loadingKey:r})=>{let s=!1;try{s=!!(0,l.oA)((await (0,n.Ek)(u.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let n;n=s?_.L.claimDeviceFile({fileKey:t.file_key}):f.Uy.claimTryFile({fileKey:t.file_key,folderId:t.folder_id}),(0,p.N)(n,e,r);let{data:l}=await n,{save_location:i,folder_name:o,org_id:u}=l.meta,{user:m,currentUserOrgId:h,selectedView:y}=e.getState(),x=(0,a.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&o&&(x=(0,a.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:o})),u&&u!==h&&m){let t={userId:m.id,orgId:u};e.dispatch(c._l({workspace:t,view:y}))}e.dispatch(d.F.enqueue({message:x}))}catch(t){e.dispatch(o.s.error("Unable to save file. Please try again later."))}}),y=(0,m.nF)(async(e,{userName:t,file_key:r},{loadingKey:n})=>{try{await s.Ay.put(`/api/try/file/${r}`,{name:(0,a.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},114094(e,t,r){let a;r.d(t,{Z:()=>p,T:()=>u});var n=r(51477),l=r(948006),i=r(354584),s=r(892480),o=r(121739),d=r(233102),c=r(377617);let u=(0,c.nF)((e,{fileKey:t,versionId:r})=>{o.W.getVersion({fileKey:t,versionId:r}).then(({data:t})=>{let r=t.meta.version;e.dispatch(s.to({type:d.y,data:{description:r.description,label:r.label,savepointID:r.id,isEditingMergeSavepoint:!0}}))},()=>{e.dispatch(n.s.error("An error occurred while retrieving the file history."))})}),p=(0,c.nF)(async(e,{fileKey:t},{liveStore:d})=>{try{let{data:n}=await o.W.getVersions({fileKey:t,pageSize:100}),c=await d.fetchFile(t),u=n.meta.versions;e.dispatch(s.to({type:a??=(0,i.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("7360"),r.e("826"),r.e("7205"),r.e("158"),r.e("612"),r.e("6802"),r.e("1386"),r.e("5683"),r.e("5389"),r.e("2860"),r.e("8883"),r.e("7976"),r.e("6781"),r.e("6687"),r.e("7500"),r.e("7471"),r.e("8251"),r.e("9646"),r.e("2857"),r.e("8295"),r.e("5519"),r.e("1761"),r.e("3278")]).then(r.bind(r,757026)).then(e=>e.FileRestoreFromVersionModal),(0,i.Ij)("FileRestoreFromVersionModal"))),data:{fig:c,versions:u}}))}catch(t){e.dispatch(n.s.error("An error occurred while retrieving the file history."))}})},40822(e,t,r){r.d(t,{$:()=>v,E:()=>b});var a=r(105652),n=r(645186),l=r(291061),i=r(295870);if(2036!=r.j)var s=r(270450);var o=r(759231),d=r(14308),c=r(878725),u=r(982021),p=r(860736),f=r(911893),_=r(44811);if(2036!=r.j)var m=r(930501);var h=r(597211);if(2036!=r.j)var y=r(783565);var x=r(71164);function b({newFileFrom:e,folderData:t,forceOpenNewTab:r}){let b=(0,n.wA)(),v=(0,_.TA)(),g=(0,n.d4)(e=>e.user),w=(0,n.d4)(e=>e.selectedView),E=(0,o.Xr)(y.P4),k=(0,n.d4)(e=>{let r="DRAFTS_FOLDER"!==t?t:void 0;return r&&r.teamId?e.teams[r.teamId]:void 0}),T=(0,n.d4)(e=>e.currentTeamId?e.teams[e.currentTeamId]:void 0),{Sprig:F}=(0,p.A)();return(0,a.useCallback)(({editorType:a,contextClicked:n,triggerElement:o,newFileDataLocalStorageKey:p})=>_=>{b((0,x.zE)({editorType:a,triggerElement:o,team:k||T,from:e,openNewFileIn:r||(0,c.oJ)(_)?h.ai.NEW_TAB:h.ai.SAME_TAB,folderData:t,callback:e=>{(0,d.Cu)({userId:v,fileKey:e},n)},newFileDataLocalStorageKey:p})),a===m._Y.SITES&&E(!0),(0,s.getFeatureFlags)().file_browser_sentiment_survey&&F("setAttribute","fb_file_created",!0),u.J.addAction("file_created",i.FigmaTeam.WAYFINDING,l.$b.INFO,{sourceComponent:n,selectedView:(0,f.fu)({selectedView:w,user:g})})},[b,t,k,T,r,e,v,E,F,w,g])}function v({editorType:e,triggerElement:t,contextClicked:r,...n}){let l=b(n);return(0,a.useMemo)(()=>l({editorType:e,triggerElement:t,contextClicked:r}),[l,e,t,r])}},151402(e,t,r){r.d(t,{MA:()=>o,om:()=>i,x1:()=>s});var a,n,l,i=1464==r.j?((a=i||{})[a.eduRestrictedSitesBanner=0]="eduRestrictedSitesBanner",a[a.TestThemeBanner=1]="TestThemeBanner",a[a.TestWarningBanner=2]="TestWarningBanner",a[a.TestOOMBanner=3]="TestOOMBanner",a[a.TestInfoBanner=4]="TestInfoBanner",a[a.StarterTeamOverFreeLimitAndLocked=5]="StarterTeamOverFreeLimitAndLocked",a[a.EduGracePeriodAccessRestricted=6]="EduGracePeriodAccessRestricted",a[a.EduGracePeriodShowReminder=7]="EduGracePeriodShowReminder",a[a.OrphanedOrgDraftsFile=8]="OrphanedOrgDraftsFile",a[a.TeamAbandonedDraftsFile=9]="TeamAbandonedDraftsFile",a[a.TeamAdminOpenInvoiceReminder=10]="TeamAdminOpenInvoiceReminder",a[a.PersonalProjectDeprecatedFile=11]="PersonalProjectDeprecatedFile",a[a.ProTeamPastDue=12]="ProTeamPastDue",a[a.ProTeamChargeFailed=13]="ProTeamChargeFailed",a[a.ProTeamNoMonthlySubEditorCountExceeded=14]="ProTeamNoMonthlySubEditorCountExceeded",a[a.MultiplayerSessionUpgrade=15]="MultiplayerSessionUpgrade",a[a.AdminI18nLocalWarnBanner=16]="AdminI18nLocalWarnBanner",a[a.FigJamTryDraftsBanner=17]="FigJamTryDraftsBanner",a[a.FigJamTryClaimBanner=18]="FigJamTryClaimBanner",a[a.CommunityResourceCTANuxBanner=19]="CommunityResourceCTANuxBanner",a[a.communityM10nApprovalBanner=20]="communityM10nApprovalBanner",a[a.communityM10nFinishSetupBanner=21]="communityM10nFinishSetupBanner",a[a.communityM10nAdtlInfoNeededBanner=22]="communityM10nAdtlInfoNeededBanner",a[a.communityResourceInReviewBanner=23]="communityResourceInReviewBanner",a[a.CommunityResourceCreatorBanner=24]="CommunityResourceCreatorBanner",a[a.ExternalContentControlBanner=25]="ExternalContentControlBanner",a[a.MemoryWarningBanner=26]="MemoryWarningBanner",a[a.MemoryErrorBanner=27]="MemoryErrorBanner",a[a.MemorySafeBanner=28]="MemorySafeBanner",a[a.AdminUserDisposableDomainWarningBanner=29]="AdminUserDisposableDomainWarningBanner",a[a.FileIsTeamTemplate=30]="FileIsTeamTemplate",a[a.DowntimeBanner=31]="DowntimeBanner",a[a.FreemiumPreviewBanner=32]="FreemiumPreviewBanner",a[a.FileCreationFailureBanner=33]="FileCreationFailureBanner",a[a.DevModePaywallBanner=34]="DevModePaywallBanner",a[a.DevModeInTrialBanner=35]="DevModeInTrialBanner",a[a.devModeStarterTrialBanner=36]="devModeStarterTrialBanner",a[a.DesktopDownloadBanner=37]="DesktopDownloadBanner",a[a.BrowserDeprecationBanner=38]="BrowserDeprecationBanner",a[a.FragmentTextSearchQualityBanner=39]="FragmentTextSearchQualityBanner",a[a.Gen1DesignViewerBanner=40]="Gen1DesignViewerBanner",a[a.DesktopDeprecationBanner=41]="DesktopDeprecationBanner",a[a.LoggedOutCta=42]="LoggedOutCta",a[a.SeatBillingTermsReminder=43]="SeatBillingTermsReminder",a[a.CooperOldFileBanner=44]="CooperOldFileBanner",a[a.InteropPagesBanner=45]="InteropPagesBanner",a[a.ForceClientReload=46]="ForceClientReload",a[a.TemplatePublishingNudgeBanner=47]="TemplatePublishingNudgeBanner",a[a.DevModeDemoFileUpsellBanner=48]="DevModeDemoFileUpsellBanner",a[a.OrderFormBillingTermsBanner=49]="OrderFormBillingTermsBanner",a[a.NonAdminBillingTermsBanner=50]="NonAdminBillingTermsBanner",a[a.OrgDowngradeBanner=51]="OrgDowngradeBanner",a[a.DevModeMCPSSEDeprecationBanner=52]="DevModeMCPSSEDeprecationBanner",a[a.SlotsEnablementReload=53]="SlotsEnablementReload",a[a.SupportShareWarningBanner=54]="SupportShareWarningBanner",a[a.GuestExpirationWarningBanner=55]="GuestExpirationWarningBanner",a):null,s=1464==r.j?((n=s||{}).INFO="info",n.WARN="warn",n.SUCCESS="success",n.ERROR="error",n.WARN_SOFT="warn_soft",n.CONFIDENTIALITY="confidentiality",n.BRAND_STRONG="brand_strong",n.DANGER="danger",n.INFO_SOFT="info_soft",n.FPL_DEFAULT="fpl_default",n.FPL_DANGER="fpl_danger",n.FPL_BRAND="fpl_brand",n.FPL_SUCCESS="fpl_success",n.FPL_WARN="fpl_warn",n):null,o=1464==r.j?((l=o||{}).STRUCTURED="structured",l.CUSTOM="custom",l):null},413401(e,t,r){r.d(t,{T:()=>l});var a=r(315547),n=r(864117);function l(){let e=(0,n.I)(),t=(0,a.AG)();return e||t}},192272(e,t,r){r.d(t,{$f:()=>Z});var a=r(239976),n=r(105652),l=r(645186),i=r(60021),s=r(865702),o=r(470683),d=r(225519),c=r(796557),u=r(359010),p=r(942356),f=r(70555),_=r(336435),m=r(425006),h=r(904907),y=r(167746),x=r(382367),b=r(769347),v=r(417675),g=r(323264),w=r(124144),E=r(824203),k=r(315171),T=r(306512),F=r(362218),C=r(87024),I=r(559381),S=r(774841),j=r(892480),R=r(354584),A=r(679786),O=r(897822),N=r(930501),P=r(867206),L=r(266646),M=r(83352),D=r(790375),B=r(152373),W=r(980041),U=r(260415),H=r(429634),K=r(27667);function Y({opacity:e}){return(0,a.jsx)("div",{style:{opacity:e},children:(0,a.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x1i71x30 x1vi7shn xp6roeo"},children:[(0,a.jsx)(H.Wi,{style:{width:24,height:24,borderRadius:4,flexShrink:0}}),(0,a.jsxs)("div",{...{className:"x78zum5 xdt5ytf xg2d0mh x1iyjqo2"},children:[(0,a.jsx)(H.Wi,{style:{height:14,width:120,borderRadius:2}}),(0,a.jsx)(H.Wi,{style:{height:12,width:180,borderRadius:2}})]})]})})}function z(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{...g.xk(K.g.searchContainer),children:[(0,a.jsx)("div",{...g.xk(K.g.searchBarWrapper),children:(0,a.jsx)(H.Wi,{style:{height:24,borderRadius:6,width:"100%"}})}),(0,a.jsx)(H.Wi,{style:{width:24,height:24,borderRadius:4}})]}),(0,a.jsx)("div",{...{className:"x1w4f5ud x1vamu9a x1gcgh60 x1jwbysl x78zum5 xdt5ytf x1nfngrj"},children:Array.from({length:5},(e,t)=>(0,a.jsx)(Y,{opacity:t<2?1:1-(t-2+1)/4},t))})]})}var V=r(502188),$=r(530721);let q={all:null,joined:N.ZF.USER_GROUPS_JOINED,created:N.ZF.USER_GROUPS_CREATED},G={k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kOIVth:"x883omv",khm7nJ:null,k1C7PZ:null,kzQI83:"x1iyjqo2",kmuXW:"xs83m0k",kCS8Yb:"x1t1x2f9",k7Eaqz:"xeuugli",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kLKAdn:"x1vi7shn",kGO01o:"xp6roeo",$$css:!0},Q={kmVPX3:"x1717udv",kg3NbH:null,kuDDbn:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,koQZXg:"x1e38ib8",keTefX:null,k71WvV:null,kfdmCh:"x1sy0etr",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kWkggS:"xjbqb8w xv2f06h",$$css:!0};function X({userGroup:e,onViewSharedFilesClick:t,onSettingsClick:r,onDeleteClick:n}){let{canEdit:l,canDelete:i}=(0,O.en)(O.Ls.FILE_BROWSER,{id:e.id,createdByUserId:e.createdByUser?.id});return(0,a.jsxs)($.zx,{children:[e.isMember&&(0,a.jsx)(o.q7,{onClick:()=>t(e),children:(0,v.t)("user_groups.view_shared_files")}),(0,a.jsx)(o.q7,{onClick:()=>r(e,l),children:(0,v.t)("user_groups.settings")}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.wv,{}),(0,a.jsx)(o.q7,{onClick:()=>n(e),children:(0,v.t)("user_groups.delete_user_group_button")})]})]})}function J({open:e,onClose:t,initialFilterOption:r,initialSortOption:k,initialSearchQuery:R,initialPlanHasUserGroups:H}){let Y=(0,l.wA)(),$=(0,A.DP)(),J=(0,O.Q3)(),ee=(0,P.S2)().unwrapOr(null),et=ee?.planRecordId,er=(0,P.px)(),ea=(0,P.j_)(er).unwrapOr(!1),{canCreate:en,userGroupCreationSetting:el}=(0,O.en)(O.Ls.FILE_BROWSER),ei=el===N.W2.ADMINS,es=en||ei,eo=d.hS({open:e,onClose:t}),{manager:ed,getTriggerProps:ec}=o.b({initialPosition:"bottom-end"}),[eu,ep]=n.useState(R??""),[ef,e_]=n.useState(r??"all"),[em,eh]=n.useState(k??"name_asc"),[ey,ex]=n.useState(H??null),eb=n.useCallback(e=>{ep(e)},[ep]),ev=n.useMemo(()=>(0,i.s)(eb,300),[eb]),eg="name_asc"===em||"name_desc"===em?N.z7.NAME:N.z7.LAST_ACTIVITY_AT,ew="name_asc"===em||"last_updated_asc"===em?"asc":"desc",eE=q[ef],{userGroups:ek,fetchMore:eT,status:eF}=(0,O.Qx)({firstPageSize:50,sortProperty:eg,sortOrder:ew,queryString:eu,useDBQuery:""===eu,filterProperty:eE}),eC=n.useMemo(()=>{let e=[];for(let t of ek){let r=t.userGroup;r&&e.push((0,U.c)(r))}return e},[ek]);n.useEffect(()=>{"loaded"===eF&&(eC.length>0?!0!==ey&&ex(!0):null!==ey||eu||ex(!1))},[eF,ey,eu,eC.length]);let eI=n.useMemo(()=>[{name:(0,v.t)("user_groups.user_group"),className:g.xW(G)??"",cellComponent:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.q,{userGroup:e,size:24}),(0,a.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k xdl72j9 xeuugli xb3r6kr"},children:[(0,a.jsx)(I.E,{fontSize:11,fontWeight:"medium",truncate:"end",showTooltipWhenTruncated:!0,children:e.name}),(0,a.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xb3r6kr xuxw1ft x1jwbysl xeuugli"},children:[(0,a.jsx)(I.E,{fontSize:11,color:"secondary",children:(0,v.t)("user_group.member_count",{count:e.memberCount})}),e.description&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.E,{fontSize:11,color:"secondary",children:"\xa0\xb7\xa0"}),(0,a.jsx)(I.E,{fontSize:11,color:"secondary",truncate:"end",showTooltipWhenTruncated:!0,children:e.description})]})]})]})]})}],[]),eS=n.useCallback(()=>{Y((0,j.AS)()),Y((0,j.to)({type:Z,data:{initialFilterOption:ef,initialSortOption:em,initialSearchQuery:eu,initialPlanHasUserGroups:ey??void 0}}))},[Y,ef,em,eu,ey]),ej=(0,a.jsxs)(o.bL,{manager:ed,children:[(0,a.jsx)("div",{...{0:{className:"x78zum5 x6s0dn4 xl56j7k"},1:{className:"x78zum5 x6s0dn4 xl56j7k xcr9a89 x19y5rnk"}}["all"!==ef|0],children:(0,a.jsx)(c.d,{"aria-label":(0,v.t)("user_group.filter_user_groups"),...ec(),children:"all"!==ef?(0,a.jsx)(h.S,{className:"x1aue78i"}):(0,a.jsx)(y.S,{})})}),(0,a.jsxs)(o.mc,{children:[(0,a.jsx)(o.hE,{children:(0,v.t)("user_group.filter.title")}),(0,a.jsxs)(u.z6,{title:"",value:ef,onChange:e=>e_(e),children:[(0,a.jsx)(u.CU,{value:"all",children:(0,v.t)("user_group.filter.all_user_groups")}),(0,a.jsx)(u.CU,{value:"joined",children:(0,v.t)("user_group.filter.groups_joined")}),(0,a.jsx)(u.CU,{value:"created",children:(0,v.t)("user_group.filter.groups_created")})]}),(0,a.jsx)(o.hE,{children:(0,v.t)("user_group.filter.sort_by")}),(0,a.jsxs)(u.z6,{title:"",value:em,onChange:e=>eh(e),children:[(0,a.jsx)(u.CU,{value:"name_asc",children:(0,v.t)("user_group.filter.sort.a_to_z")}),(0,a.jsx)(u.CU,{value:"name_desc",children:(0,v.t)("user_group.filter.sort.z_to_a")}),(0,a.jsx)(u.CU,{value:"last_updated_desc",children:(0,v.t)("user_group.filter.sort.most_recently_updated")}),(0,a.jsx)(u.CU,{value:"last_updated_asc",children:(0,v.t)("user_group.filter.sort.oldest_updated")})]})]})]}),eR=n.useCallback((e,t)=>{Y((0,j.to)({type:W.u,data:{userGroup:e,canEdit:t,onBack:eS}}))},[Y,eS]),eA=n.useCallback(e=>{Y((0,j.to)({type:D.u,data:{userGroups:[e],onCancel:()=>{Y((0,j.Lo)())},onCloseClick:()=>{Y((0,j.Lo)())}},showModalsBeneath:!0}))},[Y]),eO=n.useCallback(e=>{J(e.id)},[J]),eN=n.useMemo(()=>[{name:"menu-cell",cellComponent:e=>(0,a.jsx)(X,{userGroup:e,onViewSharedFilesClick:eO,onSettingsClick:eR,onDeleteClick:eA})}],[eO,eR,eA]),eP=n.useCallback(e=>{Y((0,j.AS)()),Y((0,j.to)({type:B.y,data:{userGroupId:e.id,onBack:eS}}))},[Y,eS]);return ee&&et?(0,a.jsx)(w.fu,{name:"user_groups_modal",children:(0,a.jsx)(f.bL,{manager:eo,width:"lg","data-testid":"user-groups-modal",children:(0,a.jsxs)(_.vo,{children:[(0,a.jsxs)(_.Jh,{...g.xk(K.g.customHeader),children:[(0,a.jsx)(_.hE,{children:(0,v.t)("user_groups.all_user_groups")}),(0,a.jsx)(_.Ch,{...g.xk(K.g.customClose)})]}),(0,a.jsx)(_.nB,{scrolling:"manual",padding:0,children:(0,a.jsx)("div",{...g.xk(K.g.modalBodyContainer,es&&!0===ey?K.g.modalBodyContainerWithFooter:K.g.modalBodyContainerWithoutFooter),children:null===ey?(0,a.jsx)(z,{}):(0,a.jsxs)(a.Fragment,{children:[ey&&(0,a.jsxs)("div",{...g.xk(K.g.searchContainer),children:[(0,a.jsx)("div",{...g.xk(K.g.searchBarWrapper),children:(0,a.jsx)(F.y2,{autoFocus:!0,styleOverrides:{boxSizing:"border-box",width:"100%",borderRadius:"6px"},onChange:ev,query:eu,placeholder:(0,v.t)("user_group.search_placeholder"),resultsCount:eC.length})}),ej]}),(0,a.jsx)("div",{...{className:"x1iyjqo2 xs83m0k xdl72j9 xysyzu8 x2lwn1j"},children:0===eC.length&&"loaded"===eF?(0,a.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x1lpwdgh x1g0v9sp x8rdmch xctkrei x2b8uid x1n0bwc9"},children:"all"!==ef?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.oW,{src:(0,E.staticAssetWithUploadsPath)("dark"===$?"40c38fef7cb51e8ecb8825f4a9a1d834d2adc783":"a70afe2b28f296873f64775063953e3ac062dbc0"),alt:(0,v.t)("user_groups.user_group_logo"),width:150}),(0,a.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,v.t)("user_groups.no_groups_match_the_current_filter")}),(0,a.jsx)("div",{...{className:"xehsoiq"},children:(0,a.jsx)(p.$n,{variant:"secondary",iconPrefix:(0,a.jsx)(x.f,{className:"x1057jvv"}),onClick:()=>e_("all"),children:(0,v.t)("user_groups.clear_filter")})})]}):eu?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.oW,{src:(0,E.staticAssetWithUploadsPath)("dark"===$?"40c38fef7cb51e8ecb8825f4a9a1d834d2adc783":"a70afe2b28f296873f64775063953e3ac062dbc0"),alt:(0,v.t)("user_groups.user_group_logo"),width:150}),(0,a.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,v.t)("user_groups.no_groups_match_your_search")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.oW,{src:(0,E.staticAssetWithUploadsPath)("df36707be31e857112158776a58401aac4b43979"),alt:(0,v.t)("user_groups.user_group_logo"),width:150}),(0,a.jsx)("div",{...{className:"xehsoiq x1akne3o xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:(0,v.t)("user_groups.no_user_groups_in_plan_yet",{planName:ee?.name??""})}),(0,a.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,v.t)("user_groups.create_your_first_user_group_for_quick_flexible_collaboration_short")}),es&&(0,a.jsx)("div",{...{className:"xehsoiq"},children:(0,a.jsx)(p.$n,{variant:"primary",iconPrefix:(0,a.jsx)(b.J,{}),disabled:ei,...ei&&{"data-tooltip":(0,v.t)("user_groups.create_user_group_disabled_by_admins"),"data-tooltip-type":"text","data-tooltip-show-above":!0},onClick:()=>{Y((0,j.AS)()),Y((0,j.to)({type:M.C,data:{source:"user_groups_modal",onBack:eS,onCancel:eS,onSuccess:e=>{Y((0,j.AS)()),Y((0,j.to)({type:B.y,data:{userGroupId:e.id,onBack:eS}}))},prefillCreatorEmail:!0}}))},children:(0,v.t)("user_groups.create_user_group")})})]})}):(0,a.jsx)(V.Cj,{columns:eI,emptyContent:null,getItemKey:e=>e.id,hideHeader:!0,isLoading:"loaded"!==eF||!!eT,itemTypeContext:{itemType:"user_group",getSelectedCountString:()=>(0,v.t)("multi_select_list.selected_count_user_groups",{numSelected:0})},items:eC,minContentWidth:0,noCheckboxColumn:!0,onFetchMore:eT,onRowClick:eP,onSelectedItemsChange:s.lQ,onSetSortState:s.lQ,rightActionColumns:eN,scrollAwayContent:eC.length>0?(0,a.jsx)("div",{...g.xk(K.g.multiSelectListScrollAwayContent),children:"all"===ef?(0,v.t)("user_group.filter.all_user_groups"):"joined"===ef?(0,v.t)("user_group.filter.groups_joined"):(0,v.t)("user_group.filter.groups_created")}):null,scrollContainerInnerClassName:g.xW(K.g.scrollContainerInner),selectAllDisabled:!0,sortState:{columnName:"",isReversed:!1},styleOverrideClassNames:{row:g.xW(Q)??""}})})]})})}),es&&!0===ey&&(0,a.jsxs)(_.wi,{children:[ei&&ea&&(0,a.jsx)("span",{...{className:"x1n0bwc9"},children:(0,v.tx)("user_groups.admins_can_manage_groups_from_admin_console",{adminConsoleLink:(0,a.jsx)(m.E,{...{className:"x1quhyk7 x1ypdohk"},onClick:()=>{Y((0,j.AS)()),Y(S.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:L.J7.MEMBERS,orgAdminSettingsViewSecondaryTab:L.M7.USER_GROUPS}))},children:(0,v.t)("user_groups.admin_console")})})}),(0,a.jsx)(_.jk,{children:(0,a.jsx)(p.$n,{variant:"primary",iconPrefix:(0,a.jsx)(b.J,{}),disabled:ei,...ei&&{"data-tooltip":(0,v.t)("user_groups.create_user_group_disabled_by_admins"),"data-tooltip-type":"text","data-tooltip-show-above":!0},onClick:()=>{Y((0,j.AS)()),Y((0,j.to)({type:M.C,data:{source:"user_groups_modal",onBack:eS,onCancel:eS,onSuccess:e=>{Y((0,j.AS)()),Y((0,j.to)({type:B.y,data:{userGroupId:e.id,onBack:eS}}))},prefillCreatorEmail:!0}}))},children:(0,v.t)("user_groups.create_user_group")})})]})]})})}):null}let Z=(0,R.Ju)(function(e){return(0,a.jsx)(k.u9,{label:"UserGroupsModal",children:(0,a.jsx)(J,{...e})})},"UserGroupsModal",R.ZU.YES)},945127(e,t,r){r.d(t,{Q:()=>o,R:()=>s});var a=r(105652),n=r(979897),l=r(296039),i=r(306874);function s(e){let t=e.canRead;return{canRead:t,canFavorite:e.canRead&&!e.isFavorited,canUnfavorite:e.canRead&&e.isFavorited}}function o(e,t=!0){let r=(0,a.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),d=(0,l.p)(i.vE,r,{enabled:t});return(0,a.useMemo)(()=>n.Qw.all(d.map(e=>e.result)).transform(e=>{let t={};for(let r of e){let e=r.prototype;e&&(t[e.id]=s(e))}return t}),[d])}},873608(e,t,r){r.d(t,{Cm:()=>u,gS:()=>f,xD:()=>_});var a=r(105652),n=r(645186);if(1464==r.j)var l=r(270450);var i=r(424823);if(1464==r.j)var s=r(959371);var o=r(170499),d=r(945127),c=r(948129);function u(e,t=!0){return function(e,t=!0){let r=(0,o.IT)(e.fileKeys||p,t);return{files:r,repos:(0,c.k8)(e.repoIds||p,t),prototypes:(0,d.Q)(e.prototypeIds||p,t)}}(a.useMemo(()=>{let t={fileKeys:[],repoIds:[],prototypeIds:[]};return e.forEach(e=>{if(e.type===i.nb.FILE)t.fileKeys.push(i.Tf.getId(e));else if(e.type===i.nb.REPO)t.repoIds.push(i.Tf.getId(e));else if(e.type===i.nb.PROTOTYPE){let r=e.prototype.id;t.prototypeIds.push(r)}}),t},[e]),t)}let p=1464==r.j?[]:null;function f(e){return a.useMemo(()=>{let t={[s.F.FILES]:{},[s.F.PINNED_FILES]:{},[s.F.PROTOTYPES]:{},[s.F.REPOS]:{},[s.F.PROJECTS]:{},[s.F.OFFLINE_FILES]:{}};if(e)for(let r of e)t[i.YC[r.type]][i.Tf.getId(r)]=!0;return t},[e])}function _(e,{enabled:t=!0}={}){let r=(0,n.d4)(e=>e.tileSelect),i=f(e),u=e&&(0,l.getFeatureFlags)().remove_tile_select_redux_reads?i:r,p=a.useMemo(()=>[...Object.keys(u[s.F.FILES]),...Object.keys(u[s.F.PINNED_FILES])],[u]),m=a.useMemo(()=>Object.keys(u[s.F.REPOS]),[u]),h=a.useMemo(()=>Object.keys(u[s.F.PROTOTYPES]).map(e=>{if(!e.includes(","))throw Error(`Expected prototype id ${e} to be a client-side generated id`);let[t,r,a]=e.split(",");return a}),[u]),y=(0,o.IT)(p,t);return{filePermissions:y,repoPermissions:(0,c.k8)(m,t),protoPermissions:(0,d.Q)(h,t)}}},348142(e,t,r){function a(){return null}r.d(t,{A:()=>n,S:()=>l}),r(974338),r(708873),new(r(387503)).b({name:"litmus",dependencies:[],exports:{"./components":"./components.ts","./litmus_view_selector":"./litmus_view_selector.ts","./is_litmus":"./is_litmus.ts"},sideEffects:!1,friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off"}}});let n=a,l=a},899886(e,t,r){r.d(t,{OF:()=>n,e7:()=>a});let a=function(){return!1},n=function(){return!1}},248069(e,t,r){r.d(t,{F:()=>c});var a=r(239976),n=r(105652),l=r(417675),i=r(824203),s=r(51477),o=r(662391);let d=class e extends n.PureComponent{constructor(e){super(e),this.state={loaded:!1,error:null,isOpen:!1}}componentDidMount(){e.singleton=this}componentWillUnmount(){e.singleton=null}init(){return(0,o.L3)().then(()=>{this.state.loaded||(window.zE("webWidget","hide"),window.zE("webWidget:on","open",()=>{this.setState({isOpen:!0})}),window.zE("webWidget:on","close",()=>{this.setState({isOpen:!1}),this.close(!0)})),this.setState({loaded:!0,error:null})}).catch(e=>{throw e&&console.error("Unable to load Zendesk Web Widget:",e),this.setState({loaded:!1,error:e}),e})}open(e){let{userEmail:t,userName:r}=this.props;(0,i.isProd)()&&t?.endsWith("@figma.com")?this.props.dispatch(s.s.flash("Hello there! Sadly Figmates cannot use this feature. Please use a non-@figma.com account to test Zendesk")):this.init().then(()=>(0,o.wB)({name:r,email:t},e)).then(()=>{this.state.isOpen||(0,o.b_)()}).catch(()=>{this.props.dispatch(s.s.flash((0,l.t)("help_widget.zendesk.unavailable_error_message",{supportEmail:(0,i.supportEmail)()})))})}close(e=!1){this.state.loaded&&(this.state.isOpen||e)&&(window.zE("webWidget","hide"),window.zE("webWidget","close"))}isError(){return!!this.state.error}render(){return(0,a.jsx)("div",{className:"zendesk-web-widget"})}};d.singleton=null;let c=1464==r.j?d:null},633875(e,t,r){r.d(t,{AV:()=>u,xv:()=>f,Bm:()=>p});var a=r(239976),n=r(105652),l=r(836848),i=r(575015),s=r(224542),o=r.n(s),d=r(263618);let c="loading_page--fadeOut--vsa4j";function u({backgroundColor:e="default",children:t,loaded:r,loadingElementId:s,loadingElementClassName:u,delay:p=0}){let f=n.useRef(null),_=n.useRef(null);n.useEffect(()=>{if(f.current&&!_.current&&!(0,i.Lg)()){let e=document.getElementById(s);e&&(_.current=e.cloneNode(!0),f.current.appendChild(_.current))}},[s,f]);let m={animationDelay:`${p}ms`,backgroundColor:function(e){if("default"===e)return"var(--color-bg)";(0,l.xb)(e)}(e)};return(0,a.jsxs)(a.Fragment,{children:[r&&t,(0,a.jsx)("div",{"data-testid":`${s}-loading-skeleton`,ref:f,className:o()(u,d.s.eventsNone.absolute.top0.left0.right0.bottom0.overflowHidden.opacity1.$,{[c]:r}),style:m})]})}function p({result:e,children:t,...r}){let n="loaded"===e.status;return(0,a.jsx)(u,{...r,loaded:n,children:n?t(e.data):null})}function f({loaded:e,loadingSkeletonElement:t,showElementBeforeLoaded:r,children:l}){let i=n.useRef(e);return(0,a.jsxs)("div",{className:d.s.grid.$,children:[(e||r)&&(0,a.jsx)("div",{className:o()(d.s.gridRowEnd1.gridColumnEnd1.$),children:l}),(0,a.jsx)("div",{className:o()(d.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[c]:e,[d.s.opacity1.$]:!i.current}),children:t})]})}},70801(e,t,r){r.d(t,{e:()=>b});var a=r(239976),n=r(270450),l=r(759231),i=r(105652),s=r(23226),o=r(483218),d=r(114668),c=r(930501),u=r(456549),p=r(576847),f=r(263618);function _({thumbnailUrl:e,thumbnailType:t,clientMeta:r,lastTouchedAt:n,config:l,...s}){let[d,c]=i.useState(1),[u,p]=i.useState({x:0,y:0}),_=i.useRef(null),m=l?.get("FJZoomableThumbnailsScale",3.5)??3.5,h=i.useCallback(e=>{let t=_.current;if(!t)return;let r=t.getBoundingClientRect();p({x:e.clientX-r.left,y:e.clientY-r.top})},[p]),y=i.useCallback(()=>{c(m)},[m,c]),x=i.useCallback(()=>{c(1)},[c]);return(0,a.jsx)("div",{className:f.s.hFull.wFull.$,onMouseMove:h,onMouseEnter:y,onMouseLeave:x,onDragStart:x,children:(0,a.jsx)("div",{ref:_,className:f.s.hFull.wFull.$,children:(0,a.jsx)(o.V,{thumbnailUrl:e,thumbnailType:t,lastTouchedAt:n,clientMeta:r,addtlStyles:{transform:`scale(${d})`,transformOrigin:`${u.x}px ${u.y}px`,transition:`transform 0.4s ease ${.5*(d>1)}s`},draggable:!0,...s})})})}function m({thumbnailUrl:e,thumbnailType:t,additionalThumbnailUrls:r,clientMeta:n,lastTouchedAt:l,editorType:f,...m}){let{getConfig:h}=(0,s.I7)("exp_search_fb_thumbnail_previews"),y=h(),x=y.get("shouldAutoplay",!0),b=i.useRef(null);switch(f){case c._Y.WHITEBOARD:if(t===d.F.WHITEBOARD)break;return(0,a.jsx)(_,{thumbnailUrl:e,clientMeta:n,thumbnailType:t,lastTouchedAt:l,config:y,...m});default:let v=(r||[]).slice(0,6);if(v.length<3)break;if(x)return(0,a.jsx)(u.A,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:v,clientMeta:n,thumbnailType:t,lastTouchedAt:l,...m});return(0,a.jsx)(p._,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:v,clientMeta:n,thumbnailType:t,lastTouchedAt:l,...m})}return(0,a.jsx)(o.V,{thumbnailUrl:e,clientMeta:n,thumbnailType:t,lastTouchedAt:l,...m})}var h=r(160524),y=r(840290),x=r(424823);function b({tile:e,interactiveThumbnailsEnabled:t,...r}){var i;let s,u,p=x.Tf.getIsPasswordProtected(e),f=(0,l.md)((0,x.hi)({tile:e,enabled:p})),_=x.Tf.getThumbnailUrl(e),b=x.Tf.getTouchedAt(e),v=(i=e,s=x.Tf.getIsThumbnailFullWidth(i),u=x.Tf.getEditorType(i),i.type===x.nb.PROTOTYPE?d.F.PROTOTYPE:i.type===x.nb.OFFLINE_FILE?d.F.OFFLINE:u===c._Y.SLIDES?d.F.SLIDES:u===c._Y.WHITEBOARD?s?d.F.WHITEBOARD:d.F.DEFAULT_WHITEBOARD:s?d.F.DESIGN:d.F.DEFAULT_DESIGN);if(p){if("loading"===f.status)return(0,a.jsx)(y.q,{...r});if(!f.unwrapOr(!1))return(0,a.jsx)(h.N,{thumbnailType:v,...r})}let g=x.Tf.getClientMeta(e),w=x.Tf.getEditorType(e),E=x.Tf.getFileOrMainBranchKey(e);return(0,n.getFeatureFlags)().scrub_file_browser_search_results&&t&&_?(0,a.jsx)(m,{thumbnailUrl:_,thumbnailType:v,additionalThumbnailUrls:x.Tf.getPreviewThumbnailUrls(e)??[],clientMeta:g,lastTouchedAt:b,editorType:w,...r},E):(0,a.jsx)(o.V,{thumbnailUrl:_,clientMeta:g,thumbnailType:v,lastTouchedAt:b,...r},E)}},456549(e,t,r){r.d(t,{A:()=>f});var a=r(239976),n=r(105652),l=r(295870),i=r(224542),s=r.n(i),o=r(153745),d=r(483218),c=r(263618),u=r(89084),p=r(958850);let f=n.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:i,lastTouchedAt:f,..._},m)=>{let[h,y]=n.useState(0),[x,b]=n.useState(!1),[v,g]=n.useState(!1),w=n.useRef(null),E=n.useRef(void 0),k=n.useRef(void 0),[T,F]=n.useState(!1),C=(0,u.E)(e,t,r,!0),I=C.length,S=C[h];n.useEffect(()=>{T||Promise.all(t.map(e=>(0,u.N)(e))).then(()=>{F(!0)}).catch(e=>{(0,o.x1)(l.FigmaTeam.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[T,t]);let j=()=>{k.current||(k.current=window.setInterval(()=>{y(e=>(e+1)%I)},800))},R=()=>{k.current&&(clearInterval(k.current),k.current=void 0)},A=()=>{clearTimeout(E.current),E.current=void 0,b(!1),g(!1),R(),y(0)},O=(e,t)=>{if(R(),0!==t.buttons){A(),y(0);return}y(e)};if(n.useEffect(()=>{clearInterval(k.current),clearTimeout(E.current)},[]),!T)return(0,a.jsx)("div",{className:c.s.hFull.wFull.$,children:(0,a.jsx)(d.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:f,clientMeta:i,..._})});let N=Array.from({length:C.length}).map((e,t)=>(0,a.jsx)("div",{className:p.j6,onMouseEnter:v?e=>O(t,e):void 0,onMouseMove:v?e=>O(t,e):void 0,children:(0,a.jsx)("button",{className:s()(p.Om,{[p.o]:t===h})},t)},t));return(0,a.jsx)("div",{className:c.s.hFull.wFull.$,ref:m,onMouseEnter:()=>{b(!0),j(),E.current=window.setTimeout(()=>{g(!0)},200)},onMouseLeave:A,onDragStart:A,children:(0,a.jsxs)("div",{ref:w,className:c.s.hFull.wFull.$,children:[(0,a.jsx)("div",{className:p.rR}),(0,a.jsx)(d.V,{thumbnailUrl:S,thumbnailType:r,lastTouchedAt:f,clientMeta:i,draggable:!0,..._}),(0,a.jsx)("div",{className:s()(p.r$,{[p.R]:!x}),onMouseLeave:v?()=>{j()}:void 0,children:N})]})})})},89084(e,t,r){if(r.d(t,{E:()=>l,N:()=>n}),1464==r.j)var a=r(114668);function n(e){return new Promise((t,r)=>{let a=new Image;a.src=e,a.crossOrigin="anonymous",a.onload=()=>{t(e)},a.onerror=e=>{r(e)}})}function l(e,t,r,n){return 0===t.length?[e]:n||r===a.F.SLIDES?[e,...t]:[e,...t,e]}},576847(e,t,r){r.d(t,{_:()=>m,i:()=>_});var a=r(239976),n=r(105652),l=r(295870),i=r(759231),s=r(224542),o=r.n(s),d=r(153745),c=r(483218),u=r(263618),p=r(89084),f=r(958850);let _=(0,i.eU)(new Set),m=n.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:s,lastTouchedAt:m,showEmptyState:h,...y},x)=>{let[b,v]=n.useState(0),[g,w]=n.useState(b),[E,k]=n.useState(500),T=n.useRef(void 0),F=n.useRef(b),C=n.useRef(null);n.useEffect(()=>{F.current=b,T.current||(T.current=window.setTimeout(()=>{w(F.current),T.current=void 0,k(100)},E))},[b]);let[I,S]=n.useState(!1),j=(0,p.E)(e,t,r),R=j.length,A=j[g];n.useEffect(()=>{I||Promise.all(t.map(e=>(0,p.N)(e))).then(()=>{S(!0)}).catch(e=>{(0,d.x1)(l.FigmaTeam.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[I,t]);let O=n.useCallback(e=>{let t=C.current;if(!t)return;let r=t.getBoundingClientRect(),a=r.width/R;v(Math.max(0,Math.min(Math.floor((e.clientX-r.left)/a),R-1)))},[R]),N=()=>{clearTimeout(T.current),T.current=void 0,v(0),w(0),k(500)},P=(0,i.Xr)(_),L="IntersectionObserver"in window,[M,D]=n.useState(!1);return(n.useEffect(()=>{if(!L||!I||"function"==typeof x||!x?.current)return;let e=x.current,t=new IntersectionObserver(([e])=>{D(e.isIntersecting)},{threshold:1});return t.observe(e),()=>{t.unobserve(e)}},[x,t,I,L]),n.useEffect(()=>(M?P(t=>new Set(t).add(e)):P(t=>{let r=new Set(t);return r.delete(e),r}),()=>{P(t=>{let r=new Set(t);return r.delete(e),r})}),[M,e,P]),I)?(0,a.jsx)("div",{className:o()(u.s.hFull.wFull.$,f.xn),ref:x,onMouseMove:O,onMouseEnter:()=>{k(500)},onMouseLeave:N,onDragStart:N,children:(0,a.jsxs)("div",{ref:C,className:u.s.hFull.wFull.$,children:[(0,a.jsx)("div",{"data-onboarding-key":M?"scrubbable-thumbnail":void 0,className:f.rR}),(0,a.jsx)(c.V,{thumbnailUrl:A,thumbnailType:r,lastTouchedAt:m,clientMeta:s,draggable:!0,...y})]})}):(0,a.jsx)("div",{onMouseEnter:h?e=>{e.target.style.transition="opacity 0.2s ease-in-out",e.target.style.opacity="0.5",setTimeout(()=>{e.target.style.opacity="1"},200)}:void 0,className:u.s.hFull.wFull.$,children:(0,a.jsx)(c.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:m,clientMeta:s,...y})})})},708421(e,t,r){r.d(t,{ID:()=>a}),r(323264);let a=1464==r.j?{inputMargin:"8px",previewRowHeight:"48px",containerWidth:"380px",containerWidthDesktopNewTab:"816px",bottomPaddingDesktopNewTab:"32px",barHeight:"32px",facetedSearchHeight:"40px"}:null},814153(e,t,r){if(r.d(t,{z:()=>n}),1464==r.j)var a=r(270450);function n(){return(0,a.getFeatureFlags)().sites_beta?"BETA":"UNKNOWN"}},172871(e,t,r){r.d(t,{v:()=>l});var a=r(105652),n=r(239976);let l=(0,a.memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17 14.942V16.5c0 .005 0 .024-.02.063a.8.8 0 0 1-.153.198c-.183.18-.498.388-.969.584-.937.39-2.3.655-3.858.655s-2.921-.265-3.858-.655c-.47-.196-.786-.404-.969-.584a.8.8 0 0 1-.154-.198A.14.14 0 0 1 7 16.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442m0-1.442c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545C7.041 13.712 7 13.576 7 13.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442zm-9.742-2.6c-.217-.188-.258-.324-.258-.4V8.942c.274.169.593.316.94.442C9.003 9.771 10.439 10 12 10s2.997-.23 4.06-.616c.347-.126.666-.273.94-.442V10.5c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545M17 7.5c0-.005 0-.024-.02-.063a.8.8 0 0 0-.153-.198c-.183-.18-.498-.388-.969-.584C14.921 6.265 13.558 6 12 6s-2.921.265-3.858.655c-.47.196-.786.404-.969.584a.8.8 0 0 0-.154.198A.14.14 0 0 0 7 7.5c0 .076.04.212.258.4.216.185.558.375 1.024.544C9.209 8.782 10.524 9 12 9s2.79-.218 3.718-.556c.466-.17.808-.359 1.024-.545.217-.187.258-.323.258-.399m-11 0C6 6.12 8.686 5 12 5s6 1.12 6 2.5v9c0 1.38-2.686 2.5-6 2.5s-6-1.12-6-2.5z",clipRule:"evenodd"})})})},542484(e,t,r){r.d(t,{s:()=>l});var a=r(105652),n=r(239976);let l=(0,a.memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.5 6a.5.5 0 0 1 .5.5v9.793l1.146-1.146a.5.5 0 0 1 .707.707l-2 2a.5.5 0 0 1-.707 0l-2-2-.064-.079a.5.5 0 0 1 .693-.693l.078.064L7 16.293V6.5a.5.5 0 0 1 .5-.5m10 10a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"})})})},405005(e,t,r){r.d(t,{w:()=>l});var a=r(105652),n=r(239976);let l=(0,a.memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M18 4a2 2 0 0 1 2 2v6.172l-.01.197a2 2 0 0 1-.576 1.217l-5.828 5.828-.146.133a2 2 0 0 1-1.268.453H6l-.204-.01A2 2 0 0 1 4 18V6a2 2 0 0 1 2-2zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6v-5a2 2 0 0 1 2-2h5V6a1 1 0 0 0-1-1zm8 8a1 1 0 0 0-1 1v4.586L18.586 13z"})})})},728177(e,t,r){r.d(t,{R:()=>l});var a=r(105652),n=r(239976);let l=(0,a.memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})})}}]);

//# debugId=c69cd9ac-531b-5ce0-9810-b7d566b687a0

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/11c9e6bf883f8df7ee1ef019f0c19458ca0cafe8/8295-3f2adce6e476fc98.min.js.map